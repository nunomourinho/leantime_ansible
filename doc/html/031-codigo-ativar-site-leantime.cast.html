<span id="line-0">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/tasks.yml </span>
<span id="line-1">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 157 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                                tasks/tasks.yml                                                             </span></span>
<span id="line-2"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-3"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-4">---- name: Atualiza a cache (equivalente a apt update)apt:update_cache: truecache_valid_time: 3600- name: "Atualiza o sistema operativo"apt:upgrade: safe- name: "Instalar as dependencias necess√°ria ao programa leantime"apt:pkg:- mc- screen- git- apache2- mysql-server- php- php-mysql- php-ldap- php-cli- php-soap- php-json- graphviz- php-xml- php-gd- php-zip- libapache2-mod-php- php-dev- libmcrypt-dev- gcc- make- autoconf- libc-dev</span>
<span id="line-5">[?12l[?25h[?25l - autoconf    - libc-dev  - pkg-config- pwgen- curl- unzip    - zip  - php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurl</span>
<span id="line-6"><span style="color: #00aaaa">   # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</span>- name: "Instala o servi√ßo apache2 no arranque do sistema"service:name: apache2state: startedenabled: true</span>
<span id="line-7"><span style="color: #00aaaa">   # Fonte: https://www.mydailytutorials.com/using-ansible-find-module-search-filesfolder</span>- name: "Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurse: trueregister: caminho_php_ini</span>
<span id="line-8"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</span>- name: "Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"</span>
<span id="line-9">[?12l[?25h[?25lregexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:regexp: "^file_uploads"  line: "file_uploads = 1"regexp: "^upload_max_filesize"  line: "upload_max_filesize = 1G"regexp: "^max_file_uploads"  line: "max_file_uploads = 20"regexp: "^post_max_size"  line: "post_max_size = 2G"regexp: "^memory_limit"  line: "memory_limit = 2G"- regexp: "^max_input_time" line: "max_input_time = 3600"</span>
<span id="line-10"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/2.7/modules/file_module.html</span>- name: Cria a directoria tempor√°ria leantime e a directoria de apache leantimefile:path: "{{ item.path }}"state: directory mode: 0755    owner: www-data  group: www-datawith_items:- path: "/tmp/leantime"- path: "/var/www/leantime"</span>
<span id="line-11"><span style="color: #00aaaa">   # Fonte: Ansible for DevOps - Server and configuration management for humans de Jeff Geerling, p√°gina 98</span>
<span id="line-12"></span>   - name: "Cria a base de dados de mysql para o leantime"  mysql_db: "db=leantime_database state=present"</span>
<span id="line-13">- name: "Cria o utilizador para a base de dados leantime"mysql_user:namlogin_leantime }}"</span>
<span id="line-14">[?12l[?25h[?25lmysql_user:namlogin_leantime }}"  password: "{{ password_leantime }}"priv: "leantime_database.*:ALL"host: localhoststate: present</span>
<span id="line-15">- name: "Faz o download do software leantime a partir do reposit√≥rio git"get_url:url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipdest: /tmp/leantimemode: 0755</span>
<span id="line-16"><span style="color: #00aaaa">   # O ficheiro Leantime-versao.zip necessita de ser descomprimido</span>- name: Descomprime o software leantimeunarchive: src: "/tmp/leantime/Leantime-{{ versao_leantime }}.zip"    dest: "/var/www/leantime"  owner: www-datagroup: www-datamode: 0755remote_src: true</span>
<span id="line-17"><span style="color: #00aaaa">   # Ap√≥s a descompress√£o, se o ficheiro configuration.php n√£o existir, este necessita de ser</span>
<span id="line-18">   # criado a partir do ficheiro configuration.sample.php</span>
<span id="line-19">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html</span>- name: Copia o ficheiro de configura√ß√£o configuration.sample.phpansible.builtin.copy: src: /var/www/leantime/config/configuration.sample.php    dest: /var/www/leantime/config/configuration.php  owner: www-datagroup: www-data    mode: '0755'  remote_src: trueforce: false</span>
<span id="line-20">[?12l[?25h[?25l  remote_src: trueforce: false</span>
<span id="line-21"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.ansible.builtin.replace:path: /var/www/leantime/config/configuration.php    regexp: "{{ item.regexp  }}"  replace: "{{ item.line }}"with_items:- regexp: 'dbUser=""'  line: 'dbUser="{{ login_leantime }}"'- regexp: 'dbDatabase=""' line: 'dbDatabase="leantime_database"'    - regexp: 'dbPassword=""'    line: 'dbPassword="{{ password_leantime }}"'</span>
<span id="line-22"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html</span>- name: Copia o template do site para a p√°sta /etc/apache2/sites-availableansible.builtin.template:src: leantime.template.j2dest: /etc/apache2/sites-available/leantime.confowner: root group: www-data mode: 0755</span>
<span id="line-23">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span></span>
<span id="line-24">[?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l</span>
<span id="line-25"><span style="color: #00aaaa">  #</span>[?12l[?25h[?25l<span style="color: #00aaaa"> </span>[?12l[?25h[?25l<span style="color: #00aaaa">F</span>[?12l[?25h[?25l<span style="color: #00aaaa">o</span>
<span id="line-26"></span>[?12l[?25h[?25l<span style="color: #00aaaa">n</span>[?12l[?25h[?25l<span style="color: #00aaaa">t</span>[?12l[?25h[?25l<span style="color: #00aaaa">e</span>[?12l[?25h[?25l<span style="color: #00aaaa">:</span>[?12l[?25h[?25l<span style="color: #00aaaa"> </span>[?12l[?25h[?25l<span style="color: #00aaaa">h</span>[?12l[?25h[?25l<span style="color: #00aaaa">t</span>[?12l[?25h[?25l<span style="color: #00aaaa">t</span>[?12l[?25h[?25l<span style="color: #00aaaa">p</span>[?12l[?25h[?25l<span style="color: #00aaaa">s</span>[?12l[?25h[?25l<span style="color: #00aaaa">:</span>[?12l[?25h[?25l<span style="color: #00aaaa">/</span>[?12l[?25h[?25l<span style="color: #00aaaa">/</span>[?12l[?25h[?25l<span style="color: #00aaaa">d</span>[?12l[?25h[?25l<span style="color: #00aaaa">o</span>[?12l[?25h[?25l<span style="color: #00aaaa">c</span>[?12l[?25h[?25l<span style="color: #00aaaa">s</span>[?12l[?25h[?25l<span style="color: #00aaaa">.</span>[?12l[?25h[?25l<span style="color: #00aaaa">a</span>[?12l[?25h[?25l<span style="color: #00aaaa">n</span>[?12l[?25h[?25l<span style="color: #00aaaa">s</span>[?12l[?25h[?25l<span style="color: #00aaaa">i</span>[?12l[?25h[?25l<span style="color: #00aaaa">b</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">e</span>[?12l[?25h[?25l<span style="color: #00aaaa">.</span>[?12l[?25h[?25l<span style="color: #00aaaa">c</span>[?12l[?25h[?25l<span style="color: #00aaaa">o</span>[?12l[?25h[?25l<span style="color: #00aaaa">m</span>[?12l[?25h[?25l<span style="color: #00aaaa">/</span>[?12l[?25h[?25l<span style="color: #00aaaa">a</span>[?12l[?25h[?25l<span style="color: #00aaaa">n</span>[?12l[?25h[?25l<span style="color: #00aaaa">s</span>[?12l[?25h[?25l<span style="color: #00aaaa">i</span>[?12l[?25h[?25l<span style="color: #00aaaa">b</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">e</span>[?12l[?25h[?25l<span style="color: #00aaaa">/</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">a</span>[?12l[?25h[?25l<span style="color: #00aaaa">t</span>[?12l[?25h[?25l<span style="color: #00aaaa">e</span>[?12l[?25h[?25l<span style="color: #00aaaa">s</span>[?12l[?25h[?25l<span style="color: #00aaaa">t</span>[?12l[?25h[?25l<span style="color: #00aaaa">/</span>[?12l[?25h[?25l<span style="color: #00aaaa">c</span>[?12l[?25h[?25l<span style="color: #00aaaa">o</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">e</span>[?12l[?25h[?25l<span style="color: #00aaaa">c</span>[?12l[?25h[?25l<span style="color: #00aaaa">t</span>[?12l[?25h[?25l<span style="color: #00aaaa">i</span>[?12l[?25h[?25l<span style="color: #00aaaa">o</span>[?12l[?25h[?25l<span style="color: #00aaaa">n</span>[?12l[?25h[?25l<span style="color: #00aaaa">s</span>[?12l[?25h[?25l<span style="color: #00aaaa">/</span>[?12l[?25h[?25l<span style="color: #00aaaa">a</span>[?12l[?25h[?25l<span style="color: #00aaaa">n</span>[?12l[?25h[?25l<span style="color: #00aaaa">s</span>[?12l[?25h[?25l<span style="color: #00aaaa">i</span>[?12l[?25h[?25l<span style="color: #00aaaa">b</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">e</span>[?12l[?25h[?25l<span style="color: #00aaaa">/</span>[?12l[?25h[?25l<span style="color: #00aaaa">b</span>[?12l[?25h[?25l<span style="color: #00aaaa">u</span>[?12l[?25h[?25l<span style="color: #00aaaa">i</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">t</span>[?12l[?25h[?25l<span style="color: #00aaaa">i</span>[?12l[?25h[?25l<span style="color: #00aaaa">n</span>[?12l[?25h[?25l<span style="color: #00aaaa">/</span>[?12l[?25h[?25l<span style="color: #00aaaa">f</span>[?12l[?25h[?25l<span style="color: #00aaaa">i</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">e</span>[?12l[?25h[?25l<span style="color: #00aaaa">_</span>[?12l[?25h[?25l<span style="color: #00aaaa">m</span>[?12l[?25h[?25l<span style="color: #00aaaa">o</span>[?12l[?25h[?25l<span style="color: #00aaaa">d</span>[?12l[?25h[?25l<span style="color: #00aaaa">u</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l<span style="color: #00aaaa">e</span>[?12l[?25h[?25l<span style="color: #00aaaa">.</span>[?12l[?25h[?25l<span style="color: #00aaaa">h</span>[?12l[?25h[?25l<span style="color: #00aaaa">t</span>[?12l[?25h[?25l<span style="color: #00aaaa">m</span>[?12l[?25h[?25l<span style="color: #00aaaa">l</span>[?12l[?25h[?25l</span>
<span id="line-27">[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l-[?12l[?25h[?25l [?12l[?25h[?25ln[?12l[?25h[?25la[?12l[?25h[?25lm[?12l[?25h[?25le[?12l[?25h[?25l:[?12l[?25h[?25l [?12l[?25h[?25l"[?12l[?25h[?25lC[?12l[?25h[?25lr[?12l[?25h[?25li[?12l[?25h[?25la[?12l[?25h[?25l [?12l[?25h[?25lu[?12l[?25h[?25lm[?12l[?25h[?25l [?12l[?25h[?25ll[?12l[?25h[?25li[?12l[?25h[?25ln[?12l[?25h[?25lk[?12l[?25h[?25l [?12l[?25h[?25ls[?12l[?25h[?25li[?12l[?25h[?25lm[?12l[?25h[?25lb[?12l[?25h[?25l√≥[?12l[?25h[?25ll[?12l[?25h[?25li[?12l[?25h[?25lc[?12l[?25h[?25lo[?12l[?25h[?25l [?12l[?25h[?25lp[?12l[?25h[?25la[?12l[?25h[?25lr[?12l[?25h[?25la[?12l[?25h[?25l [?12l[?25h[?25lo[?12l[?25h[?25l [?12l[?25h[?25lf[?12l[?25h[?25li[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25le[?12l[?25h[?25li[?12l[?25h[?25lr[?12l[?25h[?25lo[?12l[?25h[?25l [?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25la[?12l[?25h[?25ln[?12l[?25h[?25lt[?12l[?25h[?25li[?12l[?25h[?25lm[?12l[?25h[?25le[?12l[?25h[?25l.[?12l[?25h[?25lc[?12l[?25h[?25lo[?12l[?25h[?25ln[?12l[?25h[?25lf[?12l[?25h[?25l [?12l[?25h[?25ln[?12l[?25h[?25la[?12l[?25h[?25l [?12l[?25h[?25lp[?12l[?25h[?25ls[?12l[?25h[?25lt[?12l[?25h[?25la[?12l[?25h[?25l [?12l[?25h[?25l/[?12l[?25h[?25le[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25l/[?12l[?25h[?25la[?12l[?25h[?25lp[?12l[?25h[?25la[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25le[?12l[?25h[?25l/[?12l[?25h[?25ls[?12l[?25h[?25li[?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25ls[?12l[?25h[?25l-[?12l[?25h[?25le[?12l[?25h[?25ln[?12l[?25h[?25la[?12l[?25h[?25lb[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25ld[?12l[?25h[?25l"[?12l[?25h[?25l</span>
<span id="line-28">[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25la[?12l[?25h[?25ln[?12l[?25h[?25ls[?12l[?25h[?25li[?12l[?25h[?25lb[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25l.[?12l[?25h[?25lb[?12l[?25h[?25lu[?12l[?25h[?25li[?12l[?25h[?25ll[?12l[?25h[?25lt[?12l[?25h[?25li[?12l[?25h[?25ln[?12l[?25h[?25l.[?12l[?25h[?25lf[?12l[?25h[?25li[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25l:[?12l[?25h[?25l</span>
<span id="line-29">[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25ls[?12l[?25h[?25lr[?12l[?25h[?25lc[?12l[?25h[?25l:[?12l[?25h[?25l [?12l[?25h[?25l/[?12l[?25h[?25le[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25l/[?12l[?25h[?25la[?12l[?25h[?25lp[?12l[?25h[?25la[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25le[?12l[?25h[?25l2[?12l[?25h[?25l/[?12l[?25h[?25ls[?12l[?25h[?25li[?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25ls[?12l[?25h[?25l-[?12l[?25h[?25la[?12l[?25h[?25lv[?12l[?25h[?25la[?12l[?25h[?25li[?12l[?25h[?25ll[?12l[?25h[?25la[?12l[?25h[?25lb[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25l/[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25la[?12l[?25h[?25ln[?12l[?25h[?25lt[?12l[?25h[?25li[?12l[?25h[?25lm[?12l[?25h[?25le[?12l[?25h[?25l.[?12l[?25h[?25lc[?12l[?25h[?25lo[?12l[?25h[?25ln[?12l[?25h[?25lf[?12l[?25h[?25l</span>
<span id="line-30">[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25ld[?12l[?25h[?25le[?12l[?25h[?25ls[?12l[?25h[?25lt[?12l[?25h[?25l:[?12l[?25h[?25l [?12l[?25h[?25l/[?12l[?25h[?25le[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25l/[?12l[?25h[?25la[?12l[?25h[?25lp[?12l[?25h[?25la[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25le[?12l[?25h[?25l2[?12l[?25h[?25l/[?12l[?25h[?25ls[?12l[?25h[?25li[?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25ls[?12l[?25h[?25l-[?12l[?25h[?25le[?12l[?25h[?25ln[?12l[?25h[?25la[?12l[?25h[?25lb[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25ld[?12l[?25h[?25l</span>
<span id="line-31">[?12l[?25h[?25l  [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25lo[?12l[?25h[?25lw[?12l[?25h[?25ln[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25l:[?12l[?25h[?25l [?12l[?25h[?25lr[?12l[?25h[?25lo[?12l[?25h[?25lo[?12l[?25h[?25lt[?12l[?25h[?25l</span>
<span id="line-32">[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25lg[?12l[?25h[?25lr[?12l[?25h[?25lo[?12l[?25h[?25lu[?12l[?25h[?25lp[?12l[?25h[?25l:[?12l[?25h[?25l [?12l[?25h[?25lr[?12l[?25h[?25lo[?12l[?25h[?25lo[?12l[?25h[?25lt[?12l[?25h[?25l</span>
<span id="line-33">[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25lm[?12l[?25h[?25lo[?12l[?25h[?25ld[?12l[?25h[?25le[?12l[?25h[?25l:[?12l[?25h[?25l [?12l[?25h[?25l'[?12l[?25h[?25l0[?12l[?25h[?25l7[?12l[?25h[?25l7[?12l[?25h[?25l7[?12l[?25h[?25l'[?12l[?25h[?25l</span>
<span id="line-34">[?12l[?25h[?25l[?12l[?25h[?25lm[?12l[?25h[?25l [?12l[?25h[?25ll[?12l[?25h[?25li[?12l[?25h[?25ln[?12l[?25h[?25lk[?12l[?25h[?25l [?12l[?25h[?25ls[?12l[?25h[?25li[?12l[?25h[?25lm[?12l[?25h[?25lb[?12l[?25h[?25l[?12l[?25h[?25ll[?12l[?25h[?25li[?12l[?25h[?25lc[?12l[?25h[?25lo[?12l[?25h[?25l [?12l[?25h[?25lp[?12l[?25h[?25la[?12l[?25h[?25lr[?12l[?25h[?25la[?12l[?25h[?25l [?12l[?25h[?25lo[?12l[?25h[?25l [?12l[?25h[?25lf[?12l[?25h[?25li[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25le[?12l[?25h[?25li[?12l[?25h[?25lr[?12l[?25h[?25lo[?12l[?25h[?25l [?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25la[?12l[?25h[?25ln[?12l[?25h[?25lt[?12l[?25h[?25li[?12l[?25h[?25lm[?12l[?25h[?25le[?12l[?25h[?25l.[?12l[?25h[?25lc[?12l[?25h[?25lo[?12l[?25h[?25ln[?12l[?25h[?25lf[?12l[?25h[?25l [?12l[?25h[?25ln[?12l[?25h[?25la[?12l[?25h[?25l [?12l[?25h[?25lp[?12l[?25h[?25lasta /etc/apache/sites-enabled"[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l'[?12l[?25h[?25l[?12l[?25h[?25l78</span>
<span id="line-35"></span>
<span id="line-36">[?12l[?25h[?25l[?12l[?25h[?25l         <span style="background-color: #AAAAAA; color: #000000">M-D</span> Formato DOS<span style="background-color: #AAAAAA; color: #000000">M-A</span> Anexar<span style="background-color: #AAAAAA; color: #000000">B</span> Seguran√ßa<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">M-M</span> Formato Mac<span style="background-color: #AAAAAA; color: #000000">M-P</span> Prepor<span style="background-color: #AAAAAA; color: #000000">^T</span> P/ ficheiros</span>
<span id="line-37">[?12l[?25h[?25l[?12l[?25h[?1049l</span>
<span id="line-38">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule lint</span>
<span id="line-39"><span style="color: #0000aa">INFO    </span> default scenario test matrix: dependency, lint</span>
<span id="line-40"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-41"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-42"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-43"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">dependency</span></span>
<span id="line-44"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-45"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-46"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">lint</span></span>
<span id="line-47">COMMAND: set -e</span>
<span id="line-48">yamllint .</span>
<span id="line-49">ansible-lint</span>
<span id="line-50"></span>
<span id="line-51">./tasks/tasks.yml</span>
<span id="line-52">  160:3     error    syntax error: expected '&lt;document start&gt;', but found '&lt;block sequence start&gt;' (syntax)</span>
<span id="line-53"></span>
<span id="line-54"><span style="font-weight: bold; color: #aa0000">CRITICAL</span> Lint failed with error code <span style="font-weight: bold; color: #00aaaa">1</span></span>
<span id="line-55">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule lintnano tasks/tasks.yml </span>
<span id="line-56">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 167 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                                tasks/tasks.yml                                                             </span></span>
<span id="line-57"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-58"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-59">---- name: Atualiza a cache (equivalente a apt update)apt:update_cache: truecache_valid_time: 3600- name: "Atualiza o sistema operativo"apt:upgrade: safe- name: "Instalar as dependencias necess√°ria ao programa leantime"apt:pkg:- mc- screen- git- apache2- mysql-server- php- php-mysql- php-ldap- php-cli- php-soap- php-json- graphviz- php-xml- php-gd- php-zip- libapache2-mod-php- php-dev- libmcrypt-dev- gcc- make- autoconf- libc-dev</span>
<span id="line-60">[?12l[?25h[?25l         In. par√°g<span style="background-color: #AAAAAA; color: #000000">^Y</span> Prim.linha<span style="background-color: #AAAAAA; color: #000000">^T</span> Ir para txt<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">O</span> Fim par√°g<span style="background-color: #AAAAAA; color: #000000">V</span> √ölt. linha</span>
<span id="line-61"><span style="background-color: #AAAAAA; color: #000000">Insira n¬∫ da linha, n¬∫ da coluna:                                                                                                         </span>[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">1</span>
<span id="line-62"></span>[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">6</span>
<span id="line-63"></span>[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">0</span>
<span id="line-64"></span>[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">,</span>
<span id="line-65"></span>[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">3</span>
<span id="line-66"></span>[?12l[?25h[?25l</span>
<span id="line-67"><span style="background-color: #AAAAAA; color: #000000">^O</span> GravarProcurar      <span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt<span style="background-color: #AAAAAA; color: #000000">X</span> Sair    <span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt<span style="background-color: #AAAAAA; color: #000000">T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-68"> - regexp: 'dbUser=""' line: 'dbUser="{{ login_leantime }}"'  - regexp: 'dbDatabase=""'  line: 'dbDatabase="leantime_database"'- regexp: 'dbPassword=""'line: 'dbPassword="{{ password_leantime }}"'</span>
<span id="line-69"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html</span>- name: Copia o template do site para a p√°sta /etc/apache2/sites-availableansible.builtin.template:    src: leantime.template.j2  dest: /etc/apache2/sites-available/leantime.confowner: rootgroup: www-datamode: 0755</span>
<span id="line-70"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</span>- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"ansible.builtin.file:src: /etc/apache2/sites-available/leantime.confdest: /etc/apache2/sites-enabledowner: rootgroup: rootmode: '0777'state: link</span>
<span id="line-71">  [?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span></span>
<span id="line-72">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-73">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-74"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</span>
<span id="line-75">   </span>[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-76">     ansible.builtin.file:[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-77"> src: /etc/apache2/sites-available/leantime.conf[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-78"> dest: /etc/apache2/sites-enabled[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-79"> owner: root[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-80"> group: root[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-81"> mode: '0777'[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-82"> state: link[?12l[?25h[?25l</span>
<span id="line-83">[?12l[?25h[?25l[?12l[?25h[?25l         <span style="background-color: #AAAAAA; color: #000000">M-D</span> Formato DOS<span style="background-color: #AAAAAA; color: #000000">M-A</span> Anexar<span style="background-color: #AAAAAA; color: #000000">B</span> Seguran√ßa<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">M-M</span> Formato Mac<span style="background-color: #AAAAAA; color: #000000">M-P</span> Prepor<span style="background-color: #AAAAAA; color: #000000">^T</span> P/ ficheiros</span>
<span id="line-84"><span style="background-color: #AAAAAA; color: #000000">Nome do ficheiro onde escrever: tasks/tasks.yml                                                                                           </span>[?12l[?25h[?25l <span style="background-color: #AAAAAA; color: #000000">[ A escrever... ]</span><span style="background-color: #AAAAAA; color: #000000">          </span><span style="background-color: #AAAAAA; color: #000000">[ 167 linhas escritas ]</span><span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar      <span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor<span style="background-color: #AAAAAA; color: #000000">U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt<span style="background-color: #AAAAAA; color: #000000">X</span> Sair    <span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer      <span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-85">[?12l[?25h[?25l[?12l[?25h[?1049l</span>
<span id="line-86">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/tasks.yml molecule lint</span>
<span id="line-87"><span style="color: #0000aa">INFO    </span> default scenario test matrix: dependency, lint</span>
<span id="line-88"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-89"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-90"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-91"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">dependency</span></span>
<span id="line-92"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-93"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-94"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">lint</span></span>
<span id="line-95">COMMAND: set -e</span>
<span id="line-96">yamllint .</span>
<span id="line-97">ansible-lint</span>
<span id="line-98"></span>
<span id="line-99">Loading custom .yamllint config file, this extends our internal yamllint config.</span>
<span id="line-100">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule converge</span>
<span id="line-101"><span style="color: #0000aa">INFO    </span> default scenario test matrix: dependency, create, prepare, converge</span>
<span id="line-102"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-103"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-104"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-105"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">dependency</span></span>
<span id="line-106"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-107"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-108"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">create</span></span>
<span id="line-109"><span style="color: #aa0000">WARNING </span> Skipping, instances already created.</span>
<span id="line-110"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">prepare</span></span>
<span id="line-111"><span style="color: #aa0000">WARNING </span> Skipping, instances already prepared.</span>
<span id="line-112"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">converge</span></span>
<span id="line-113"></span>
<span id="line-114">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-115"></span>
<span id="line-116">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-117"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-118"></span>
<span id="line-119">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-120"></span>
<span id="line-121">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-122"><span style="color: #aa5500">changed: [ubuntu-20.04]</span></span>
<span id="line-123"></span>
<span id="line-124">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-125"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-126"></span>
<span id="line-127">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-128"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-129"></span>
<span id="line-130">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-131"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-132"></span>
<span id="line-133">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-134"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-135"></span>
<span id="line-136">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-137"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-138"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-139"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-140"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-141"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-142"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-143"></span>
<span id="line-144">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-145"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-146"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-147"></span>
<span id="line-148">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-149"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-150"></span>
<span id="line-151">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-152"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-153"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-154"></span>
<span id="line-155">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-156"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-157"></span>
<span id="line-158">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-159"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-160"></span>
<span id="line-161">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-162"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-163"></span>
<span id="line-164">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-165"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-166"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-167"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-168"></span>
<span id="line-169">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-170"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-171"></span>
<span id="line-172">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-173"><span style="color: #aa0000">fatal: [ubuntu-20.04]: FAILED! =&gt; {"changed": false, "gid": 0, "group": "root", "mode": "0755", "msg": "refusing to convert from directory to symlink for /etc/apache2/sites-enabled", "owner": "root", "path": "/etc/apache2/sites-enabled", "size": 4096, "state": "directory", "uid": 0}</span></span>
<span id="line-174"></span>
<span id="line-175">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-176"><span style="color: #aa0000">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=15  </span> <span style="color: #aa5500">changed=1   </span> unreachable=0    <span style="color: #aa0000">failed=1   </span> skipped=0    rescued=0    ignored=0</span>
<span id="line-177"></span>
<span id="line-178"></span>
<span id="line-179"><span style="font-weight: bold; color: #aa0000">CRITICAL</span> Ansible return code was <span style="font-weight: bold; color: #00aaaa">2</span>, command was: ansible-playbook --inventory <span style="color: #E850A8">/home/admlocal/.cache/molecule/leantime_ansible/default/</span><span style="color: #ff90e8">inventory</span> --skip-tags molecule-notest,notest <span style="color: #E850A8">/home/admlocal/leantime_ansible/molecule/default/</span><span style="color: #ff90e8">converge.yml</span></span>
<span id="line-180">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule convergelintnano tasks/tasks.yml </span>
<span id="line-181">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 167 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                                tasks/tasks.yml                                                             </span></span>
<span id="line-182"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-183"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-184">---- name: Atualiza a cache (equivalente a apt update)apt:update_cache: truecache_valid_time: 3600- name: "Atualiza o sistema operativo"apt:upgrade: safe- name: "Instalar as dependencias necess√°ria ao programa leantime"apt:pkg:- mc- screen- git- apache2- mysql-server- php- php-mysql- php-ldap- php-cli- php-soap- php-json- graphviz- php-xml- php-gd- php-zip- libapache2-mod-php- php-dev- libmcrypt-dev- gcc- make- autoconf- libc-dev</span>
<span id="line-185">[?12l[?25h[?25l - autoconf    - libc-dev  - pkg-config- pwgen- curl- unzip    - zip  - php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurl</span>
<span id="line-186"><span style="color: #00aaaa">   # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</span>- name: "Instala o servi√ßo apache2 no arranque do sistema"service:name: apache2state: startedenabled: true</span>
<span id="line-187"><span style="color: #00aaaa">   # Fonte: https://www.mydailytutorials.com/using-ansible-find-module-search-filesfolder</span>- name: "Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurse: trueregister: caminho_php_ini</span>
<span id="line-188"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</span>- name: "Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"</span>
<span id="line-189">[?12l[?25h[?25lregexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:regexp: "^file_uploads"  line: "file_uploads = 1"regexp: "^upload_max_filesize"  line: "upload_max_filesize = 1G"regexp: "^max_file_uploads"  line: "max_file_uploads = 20"regexp: "^post_max_size"  line: "post_max_size = 2G"regexp: "^memory_limit"  line: "memory_limit = 2G"- regexp: "^max_input_time" line: "max_input_time = 3600"</span>
<span id="line-190"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/2.7/modules/file_module.html</span>- name: Cria a directoria tempor√°ria leantime e a directoria de apache leantimefile:path: "{{ item.path }}"state: directory mode: 0755    owner: www-data  group: www-datawith_items:- path: "/tmp/leantime"- path: "/var/www/leantime"</span>
<span id="line-191"><span style="color: #00aaaa">   # Fonte: Ansible for DevOps - Server and configuration management for humans de Jeff Geerling, p√°gina 98</span>
<span id="line-192"></span>   - name: "Cria a base de dados de mysql para o leantime"  mysql_db: "db=leantime_database state=present"</span>
<span id="line-193">- name: "Cria o utilizador para a base de dados leantime"mysql_user:namlogin_leantime }}"</span>
<span id="line-194">[?12l[?25h[?25lmysql_user:namlogin_leantime }}"  password: "{{ password_leantime }}"priv: "leantime_database.*:ALL"host: localhoststate: present</span>
<span id="line-195">- name: "Faz o download do software leantime a partir do reposit√≥rio git"get_url:url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipdest: /tmp/leantimemode: 0755</span>
<span id="line-196"><span style="color: #00aaaa">   # O ficheiro Leantime-versao.zip necessita de ser descomprimido</span>- name: Descomprime o software leantimeunarchive: src: "/tmp/leantime/Leantime-{{ versao_leantime }}.zip"    dest: "/var/www/leantime"  owner: www-datagroup: www-datamode: 0755remote_src: true</span>
<span id="line-197"><span style="color: #00aaaa">   # Ap√≥s a descompress√£o, se o ficheiro configuration.php n√£o existir, este necessita de ser</span>
<span id="line-198">   # criado a partir do ficheiro configuration.sample.php</span>
<span id="line-199">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html</span>- name: Copia o ficheiro de configura√ß√£o configuration.sample.phpansible.builtin.copy: src: /var/www/leantime/config/configuration.sample.php    dest: /var/www/leantime/config/configuration.php  owner: www-datagroup: www-data    mode: '0755'  remote_src: trueforce: false</span>
<span id="line-200">[?12l[?25h[?25l  remote_src: trueforce: false</span>
<span id="line-201"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.ansible.builtin.replace:path: /var/www/leantime/config/configuration.php    regexp: "{{ item.regexp  }}"  replace: "{{ item.line }}"with_items:- regexp: 'dbUser=""'  line: 'dbUser="{{ login_leantime }}"'- regexp: 'dbDatabase=""' line: 'dbDatabase="leantime_database"'    - regexp: 'dbPassword=""'    line: 'dbPassword="{{ password_leantime }}"'</span>
<span id="line-202"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html</span>- name: Copia o template do site para a p√°sta /etc/apache2/sites-availableansible.builtin.template:src: leantime.template.j2dest: /etc/apache2/sites-available/leantime.confowner: root group: www-data mode: 0755</span>
<span id="line-203"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</span>- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"ansible.builtin.file:src: /etc/apache2/sites-available/leantime.confdest: /etc/apache2/sites-enabledowner: rootgroup: rootmode: '0777'state: link</span>
<span id="line-204">[?12l[?25h[?25lmode: '0777'state: link</span>
<span id="line-205">[?12l[?25h[?25l78Mgroup: root</span>
<span id="line-206">[?12l[?25h[?25l78Mowner: root</span>
<span id="line-207">[?12l[?25h[?25l78Mdest: /etc/apache2/sites-enabled</span>
<span id="line-208">[?12l[?25h[?25l78Msrc: /etc/apache2/sites-available/leantime.conf</span>
<span id="line-209">[?12l[?25h[?25l78Mansible.builtin.file:</span>
<span id="line-210">[?12l[?25h[?25l78M- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"</span>
<span id="line-211">[?12l[?25h[?25l78M<span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</span>
<span id="line-212"></span>[?12l[?25h[?25l78M[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-213">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span>M</span>
<span id="line-214">leantime.conf</span>
<span id="line-215">[?12l[?25h[?25l</span>
<span id="line-216">[?12l[?25h[?25l[?12l[?25h[?25l78</span>
<span id="line-217">Mleantime.conf</span>
<span id="line-218">[?12l[?25h[?25l</span>
<span id="line-219">[?12l[?25h[?25l[?12l[?25h[?25l/[?12l[?25h[?25l78</span>
<span id="line-220">Mleantime.conf</span>
<span id="line-221">[?12l[?25h[?25l</span>
<span id="line-222">[?12l[?25h[?25l         <span style="background-color: #AAAAAA; color: #000000">M-D</span> Formato DOS<span style="background-color: #AAAAAA; color: #000000">M-A</span> Anexar<span style="background-color: #AAAAAA; color: #000000">B</span> Seguran√ßa<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">M-M</span> Formato Mac<span style="background-color: #AAAAAA; color: #000000">M-P</span> Prepor<span style="background-color: #AAAAAA; color: #000000">^T</span> P/ ficheiros</span>
<span id="line-223"><span style="background-color: #AAAAAA; color: #000000">Nome do ficheiro onde escrever: tasks/tasks.yml                                                                                           </span>[?12l[?25h[?25l <span style="background-color: #AAAAAA; color: #000000">[ A escrever... ]</span><span style="background-color: #AAAAAA; color: #000000">          </span><span style="background-color: #AAAAAA; color: #000000">[ 167 linhas escritas ]</span><span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar      <span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor<span style="background-color: #AAAAAA; color: #000000">U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt<span style="background-color: #AAAAAA; color: #000000">X</span> Sair    <span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer      <span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-224">[?12l[?25h[?25l</span>
<span id="line-225">[?12l[?25h[?1049l</span>
<span id="line-226">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/tasks.yml molecule converge</span>
<span id="line-227"><span style="color: #0000aa">INFO    </span> default scenario test matrix: dependency, create, prepare, converge</span>
<span id="line-228"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-229"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-230"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-231"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">dependency</span></span>
<span id="line-232"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-233"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-234"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">create</span></span>
<span id="line-235"><span style="color: #aa0000">WARNING </span> Skipping, instances already created.</span>
<span id="line-236"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">prepare</span></span>
<span id="line-237"><span style="color: #aa0000">WARNING </span> Skipping, instances already prepared.</span>
<span id="line-238"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">converge</span></span>
<span id="line-239"></span>
<span id="line-240">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-241"></span>
<span id="line-242">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-243"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-244"></span>
<span id="line-245">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-246"></span>
<span id="line-247">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-248"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-249"></span>
<span id="line-250">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-251"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-252"></span>
<span id="line-253">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-254"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-255"></span>
<span id="line-256">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-257"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-258"></span>
<span id="line-259">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-260"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-261"></span>
<span id="line-262">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-263"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-264"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-265"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-266"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-267"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-268"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-269"></span>
<span id="line-270">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-271"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-272"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-273"></span>
<span id="line-274">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-275"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-276"></span>
<span id="line-277">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-278"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-279"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-280"></span>
<span id="line-281">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-282"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-283"></span>
<span id="line-284">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-285"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-286"></span>
<span id="line-287">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-288"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-289"></span>
<span id="line-290">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-291"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-292"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-293"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-294"></span>
<span id="line-295">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-296"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-297"></span>
<span id="line-298">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-299"><span style="color: #aa5500">changed: [ubuntu-20.04]</span></span>
<span id="line-300"></span>
<span id="line-301">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-302"><span style="color: #aa5500">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> <span style="color: #aa5500">changed=1   </span> unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-303"></span>
<span id="line-304"></span>
<span id="line-305">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule convergeidempotence</span>
<span id="line-306"><span style="color: #0000aa">INFO    </span> default scenario test matrix: idempotence</span>
<span id="line-307"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-308"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-309"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-310"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">idempotence</span></span>
<span id="line-311"></span>
<span id="line-312">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-313"></span>
<span id="line-314">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-315"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-316"></span>
<span id="line-317">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-318"></span>
<span id="line-319">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-320"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-321"></span>
<span id="line-322">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-323"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-324"></span>
<span id="line-325">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-326"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-327"></span>
<span id="line-328">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-329"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-330"></span>
<span id="line-331">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-332"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-333"></span>
<span id="line-334">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-335"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-336"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-337"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-338"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-339"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-340"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-341"></span>
<span id="line-342">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-343"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-344"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-345"></span>
<span id="line-346">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-347"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-348"></span>
<span id="line-349">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-350"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-351"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-352"></span>
<span id="line-353">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-354"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-355"></span>
<span id="line-356">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-357"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-358"></span>
<span id="line-359">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-360"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-361"></span>
<span id="line-362">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-363"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-364"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-365"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-366"></span>
<span id="line-367">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-368"><span style="color: #aa5500">changed: [ubuntu-20.04]</span></span>
<span id="line-369"></span>
<span id="line-370">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-371"><span style="color: #aa5500">changed: [ubuntu-20.04]</span></span>
<span id="line-372"></span>
<span id="line-373">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-374"><span style="color: #aa5500">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> <span style="color: #aa5500">changed=2   </span> unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-375"></span>
<span id="line-376"></span>
<span id="line-377"><span style="font-weight: bold; color: #aa0000">CRITICAL</span> Idempotence test failed because of the following tasks:</span>
<span id="line-378">*  =&gt; leantime_ansible : Copia o template do site para a p√°sta <span style="color: #E850A8">/etc/apache2/</span><span style="color: #ff90e8">sites-available</span></span>
<span id="line-379">*  =&gt; leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta <span style="color: #E850A8">/etc/apache/</span><span style="color: #ff90e8">sites-enabled</span></span>
<span id="line-380">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/</span>
<span id="line-381">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="font-weight: bold"></span><span style="font-weight: bold; color: #F5F1DE"></span><span style="font-weight: bold; color: #F5F1DE; background-color: #aa0000">[ "tasks/" √© uma pasta ]</span><span style="font-weight: bold"></span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                                  Novo buffer                                                               </span></span>
<span id="line-382"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-383"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-384">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?1049l</span>
<span id="line-385">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/tasks.yml </span>
<span id="line-386">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 167 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                                tasks/tasks.yml                                                             </span></span>
<span id="line-387"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-388"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-389">---- name: Atualiza a cache (equivalente a apt update)apt:update_cache: truecache_valid_time: 3600- name: "Atualiza o sistema operativo"apt:upgrade: safe- name: "Instalar as dependencias necess√°ria ao programa leantime"apt:pkg:- mc- screen- git- apache2- mysql-server- php- php-mysql- php-ldap- php-cli- php-soap- php-json- graphviz- php-xml- php-gd- php-zip- libapache2-mod-php- php-dev- libmcrypt-dev- gcc- make- autoconf- libc-dev</span>
<span id="line-390">[?12l[?25h[?25l - autoconf    - libc-dev  - pkg-config- pwgen- curl- unzip    - zip  - php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurl</span>
<span id="line-391"><span style="color: #00aaaa">   # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</span>- name: "Instala o servi√ßo apache2 no arranque do sistema"service:name: apache2state: startedenabled: true</span>
<span id="line-392"><span style="color: #00aaaa">   # Fonte: https://www.mydailytutorials.com/using-ansible-find-module-search-filesfolder</span>- name: "Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurse: trueregister: caminho_php_ini</span>
<span id="line-393"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</span>- name: "Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"</span>
<span id="line-394">[?12l[?25h[?25lregexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:regexp: "^file_uploads"  line: "file_uploads = 1"regexp: "^upload_max_filesize"  line: "upload_max_filesize = 1G"regexp: "^max_file_uploads"  line: "max_file_uploads = 20"regexp: "^post_max_size"  line: "post_max_size = 2G"regexp: "^memory_limit"  line: "memory_limit = 2G"- regexp: "^max_input_time" line: "max_input_time = 3600"</span>
<span id="line-395"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/2.7/modules/file_module.html</span>- name: Cria a directoria tempor√°ria leantime e a directoria de apache leantimefile:path: "{{ item.path }}"state: directory mode: 0755    owner: www-data  group: www-datawith_items:- path: "/tmp/leantime"- path: "/var/www/leantime"</span>
<span id="line-396"><span style="color: #00aaaa">   # Fonte: Ansible for DevOps - Server and configuration management for humans de Jeff Geerling, p√°gina 98</span>
<span id="line-397"></span>   - name: "Cria a base de dados de mysql para o leantime"  mysql_db: "db=leantime_database state=present"</span>
<span id="line-398">- name: "Cria o utilizador para a base de dados leantime"mysql_user:namlogin_leantime }}"</span>
<span id="line-399">[?12l[?25h[?25lmysql_user:namlogin_leantime }}"  password: "{{ password_leantime }}"priv: "leantime_database.*:ALL"host: localhoststate: present</span>
<span id="line-400">- name: "Faz o download do software leantime a partir do reposit√≥rio git"get_url:url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipdest: /tmp/leantimemode: 0755</span>
<span id="line-401"><span style="color: #00aaaa">   # O ficheiro Leantime-versao.zip necessita de ser descomprimido</span>- name: Descomprime o software leantimeunarchive: src: "/tmp/leantime/Leantime-{{ versao_leantime }}.zip"    dest: "/var/www/leantime"  owner: www-datagroup: www-datamode: 0755remote_src: true</span>
<span id="line-402"><span style="color: #00aaaa">   # Ap√≥s a descompress√£o, se o ficheiro configuration.php n√£o existir, este necessita de ser</span>
<span id="line-403">   # criado a partir do ficheiro configuration.sample.php</span>
<span id="line-404">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html</span>- name: Copia o ficheiro de configura√ß√£o configuration.sample.phpansible.builtin.copy: src: /var/www/leantime/config/configuration.sample.php    dest: /var/www/leantime/config/configuration.php  owner: www-datagroup: www-data    mode: '0755'  remote_src: trueforce: false</span>
<span id="line-405">[?12l[?25h[?25l  remote_src: trueforce: false</span>
<span id="line-406"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.ansible.builtin.replace:path: /var/www/leantime/config/configuration.php    regexp: "{{ item.regexp  }}"  replace: "{{ item.line }}"with_items:- regexp: 'dbUser=""'  line: 'dbUser="{{ login_leantime }}"'- regexp: 'dbDatabase=""' line: 'dbDatabase="leantime_database"'    - regexp: 'dbPassword=""'    line: 'dbPassword="{{ password_leantime }}"'</span>
<span id="line-407"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html</span>- name: Copia o template do site para a p√°sta /etc/apache2/sites-availableansible.builtin.template:src: leantime.template.j2dest: /etc/apache2/sites-available/leantime.confowner: root group: www-data mode: 0755</span>
<span id="line-408"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</span>- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"ansible.builtin.file:src: /etc/apache2/sites-available/leantime.confdest: /etc/apache2/sites-enabled/leantime.confowner: rootgroup: rootmode: '0777'state: link</span>
<span id="line-409">[?12l[?25h[?25lmode: '0777'state: link</span>
<span id="line-410">[?12l[?25h[?25l78Mgroup: root</span>
<span id="line-411">[?12l[?25h[?25l78Mowner: root</span>
<span id="line-412">[?12l[?25h[?25l78Mdest: /etc/apache2/sites-enabled/leantime.conf</span>
<span id="line-413">[?12l[?25h[?25l78Msrc: /etc/apache2/sites-available/leantime.conf</span>
<span id="line-414">[?12l[?25h[?25l78Mansible.builtin.file:</span>
<span id="line-415">[?12l[?25h[?25l78M- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"</span>
<span id="line-416">[?12l[?25h[?25l78M<span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</span>
<span id="line-417"></span>[?12l[?25h[?25l78M[?12l[?25h[?25l78Mmode: 0755</span>
<span id="line-418">[?12l[?25h[?25l78Mgroup: www-data</span>
<span id="line-419">[?12l[?25h[?25l78Mowner: root</span>
<span id="line-420">[?12l[?25h[?25l78Mdest: /etc/apache2/sites-available/leantime.conf</span>
<span id="line-421">[?12l[?25h[?25l78Msrc: leantime.template.j2</span>
<span id="line-422">[?12l[?25h[?25l78Mansible.builtin.template:</span>
<span id="line-423">[?12l[?25h[?25l78M- name: Copia o template do site para a p√°sta /etc/apache2/sites-available</span>
<span id="line-424">[?12l[?25h[?25l78M<span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html</span>
<span id="line-425"></span>[?12l[?25h[?25l78M[?12l[?25h[?25l78Mline: 'dbPassword="{{ password_leantime }}"'</span>
<span id="line-426">[?12l[?25h[?25l78M- regexp: 'dbPassword=""'</span>
<span id="line-427">[?12l[?25h[?25l78Mline: 'dbDatabase="leantime_database"'</span>
<span id="line-428">[?12l[?25h[?25l78M- regexp: 'dbDatabase=""'</span>
<span id="line-429">[?12l[?25h[?25l78Mline: 'dbUser="{{ login_leantime }}"'</span>
<span id="line-430">[?12l[?25h[?25l78M- regexp: 'dbUser=""'</span>
<span id="line-431">[?12l[?25h[?25l78Mwith_items:</span>
<span id="line-432">[?12l[?25h[?25l78Mreplace: "{{ item.line }}"</span>
<span id="line-433">[?12l[?25h[?25l78Mregexp: "{{ item.regexp  }}"</span>
<span id="line-434">[?12l[?25h[?25l78Mpath: /var/www/leantime/config/configuration.php</span>
<span id="line-435">[?12l[?25h[?25l78Mansible.builtin.replace:</span>
<span id="line-436">[?12l[?25h[?25l78M- name: Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.</span>
<span id="line-437">[?12l[?25h[?25l78M<span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>
<span id="line-438"></span>[?12l[?25h[?25l78M[?12l[?25h[?25l78Mforce: false</span>
<span id="line-439">[?12l[?25h[?25l78Mremote_src: true</span>
<span id="line-440">[?12l[?25h[?25l78Mmode: '0755'</span>
<span id="line-441">[?12l[?25h[?25l78Mgroup: www-data</span>
<span id="line-442">[?12l[?25h[?25l78Mowner: www-data</span>
<span id="line-443">[?12l[?25h[?25l78Mdest: /var/www/leantime/config/configuration.php</span>
<span id="line-444">[?12l[?25h[?25l78Msrc: /var/www/leantime/config/configuration.sample.php</span>
<span id="line-445">[?12l[?25h[?25l78Mansible.builtin.copy:</span>
<span id="line-446">[?12l[?25h[?25l78M- name: Copia o ficheiro de configura√ß√£o configuration.sample.php</span>
<span id="line-447">[?12l[?25h[?25l78M<span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html</span>
<span id="line-448"></span>[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span></span>
<span id="line-449">- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"</span>
<span id="line-450">[?12l[?25h[?25l78Mforce: false</span>
<span id="line-451">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l78</span>
<span id="line-452">- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"</span>
<span id="line-453">[?12l[?25h[?25l78</span>
<span id="line-454">ansible.builtin.file:</span>
<span id="line-455">[?12l[?25h[?25l78</span>
<span id="line-456">src: /etc/apache2/sites-available/leantime.conf</span>
<span id="line-457">[?12l[?25h[?25l78</span>
<span id="line-458">dest: /etc/apache2/sites-enabled/leantime.conf</span>
<span id="line-459">[?12l[?25h[?25l78</span>
<span id="line-460">owner: root</span>
<span id="line-461">[?12l[?25h[?25l78</span>
<span id="line-462">group: root</span>
<span id="line-463">[?12l[?25h[?25l78</span>
<span id="line-464">mode: '0777'</span>
<span id="line-465">[?12l[?25h[?25l78</span>
<span id="line-466">state: link</span>
<span id="line-467">[?12l[?25h[?25l78</span>
<span id="line-468">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l78Mforce: false</span>
<span id="line-469">[?12l[?25h[?25l         <span style="background-color: #AAAAAA; color: #000000">M-D</span> Formato DOS<span style="background-color: #AAAAAA; color: #000000">M-A</span> Anexar<span style="background-color: #AAAAAA; color: #000000">B</span> Seguran√ßa<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">M-M</span> Formato Mac<span style="background-color: #AAAAAA; color: #000000">M-P</span> Prepor<span style="background-color: #AAAAAA; color: #000000">^T</span> P/ ficheiros</span>
<span id="line-470"><span style="background-color: #AAAAAA; color: #000000">Nome do ficheiro onde escrever: tasks/tasks.yml                                                                                           </span>[?12l[?25h[?25l <span style="background-color: #AAAAAA; color: #000000">[ A escrever... ]</span><span style="background-color: #AAAAAA; color: #000000">          </span><span style="background-color: #AAAAAA; color: #000000">[ 168 linhas escritas ]</span><span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar      <span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor<span style="background-color: #AAAAAA; color: #000000">U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt<span style="background-color: #AAAAAA; color: #000000">X</span> Sair    <span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer      <span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-471">[?12l[?25h[?25l[?12l[?25h[?1049l</span>
<span id="line-472">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/tasks.yml molecule idempotenceconverge</span>
<span id="line-473"><span style="color: #0000aa">INFO    </span> default scenario test matrix: dependency, create, prepare, converge</span>
<span id="line-474"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-475"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-476"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-477"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">dependency</span></span>
<span id="line-478"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-479"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-480"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">create</span></span>
<span id="line-481"><span style="color: #aa0000">WARNING </span> Skipping, instances already created.</span>
<span id="line-482"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">prepare</span></span>
<span id="line-483"><span style="color: #aa0000">WARNING </span> Skipping, instances already prepared.</span>
<span id="line-484"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">converge</span></span>
<span id="line-485"></span>
<span id="line-486">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-487"></span>
<span id="line-488">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-489"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-490"></span>
<span id="line-491">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-492"></span>
<span id="line-493">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-494"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-495"></span>
<span id="line-496">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-497"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-498"></span>
<span id="line-499">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-500"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-501"></span>
<span id="line-502">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-503"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-504"></span>
<span id="line-505">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-506"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-507"></span>
<span id="line-508">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-509"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-510"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-511"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-512"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-513"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-514"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-515"></span>
<span id="line-516">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-517"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-518"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-519"></span>
<span id="line-520">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-521"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-522"></span>
<span id="line-523">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-524"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-525"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-526"></span>
<span id="line-527">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-528"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-529"></span>
<span id="line-530">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-531"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-532"></span>
<span id="line-533">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-534"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-535"></span>
<span id="line-536">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-537"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-538"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-539"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-540"></span>
<span id="line-541">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-542"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-543"></span>
<span id="line-544">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-545"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-546"></span>
<span id="line-547">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-548"><span style="color: #00aa00">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-549"></span>
<span id="line-550"></span>
<span id="line-551">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule convergeidempotence</span>
<span id="line-552"><span style="color: #0000aa">INFO    </span> default scenario test matrix: idempotence</span>
<span id="line-553"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-554"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-555"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-556"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">idempotence</span></span>
<span id="line-557"></span>
<span id="line-558">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-559"></span>
<span id="line-560">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-561"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-562"></span>
<span id="line-563">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-564"></span>
<span id="line-565">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-566"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-567"></span>
<span id="line-568">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-569"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-570"></span>
<span id="line-571">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-572"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-573"></span>
<span id="line-574">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-575"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-576"></span>
<span id="line-577">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-578"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-579"></span>
<span id="line-580">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-581"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-582"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-583"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-584"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-585"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-586"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-587"></span>
<span id="line-588">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-589"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-590"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-591"></span>
<span id="line-592">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-593"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-594"></span>
<span id="line-595">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-596"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-597"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-598"></span>
<span id="line-599">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-600"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-601"></span>
<span id="line-602">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-603"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-604"></span>
<span id="line-605">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-606"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-607"></span>
<span id="line-608">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-609"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-610"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-611"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-612"></span>
<span id="line-613">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-614"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-615"></span>
<span id="line-616">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-617"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-618"></span>
<span id="line-619">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-620"><span style="color: #00aa00">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-621"></span>
<span id="line-622"></span>
<span id="line-623"><span style="color: #0000aa">INFO    </span> Idempotence completed successfully.</span>
<span id="line-624">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule verify</span>
<span id="line-625"><span style="color: #0000aa">INFO    </span> default scenario test matrix: verify</span>
<span id="line-626"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-627"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-628"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-629"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">verify</span></span>
<span id="line-630"><span style="color: #0000aa">INFO    </span> Running Ansible Verifier</span>
<span id="line-631"></span>
<span id="line-632">PLAY [Infraestrutura conduzida por testes] ***********************************************************************************************</span>
<span id="line-633"></span>
<span id="line-634">TASK [Vari√°veis] *************************************************************************************************************************</span>
<span id="line-635"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-636"></span>
<span id="line-637">TASK [Simula√ß√£o: Atualizar a cache do sistema] *******************************************************************************************</span>
<span id="line-638"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-639"></span>
<span id="line-640">TASK [teste: a cache encontra-se actualizada?] *******************************************************************************************</span>
<span id="line-641"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-642"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-643"><span style="color: #00aa00">    "msg": "SUCESSO: A cache est√° atualizada"</span></span>
<span id="line-644"><span style="color: #00aa00">}</span></span>
<span id="line-645"></span>
<span id="line-646">TASK [Atualizar o sistema operativo (equivalente a apt upgrade)] *************************************************************************</span>
<span id="line-647"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-648"></span>
<span id="line-649">TASK [teste: o sistema operativo encontra-se atualizado?] ********************************************************************************</span>
<span id="line-650"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-651"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-652"><span style="color: #00aa00">    "msg": "SUCESSO: O sistema operativo est√° atualizado"</span></span>
<span id="line-653"><span style="color: #00aa00">}</span></span>
<span id="line-654"></span>
<span id="line-655">TASK [Teste: a cache encontra-se atualizada?] ********************************************************************************************</span>
<span id="line-656"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-657"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-658"><span style="color: #00aa00">    "msg": "SUCESSO: A cache est√° atualizada"</span></span>
<span id="line-659"><span style="color: #00aa00">}</span></span>
<span id="line-660"></span>
<span id="line-661">TASK [Simula√ß√£o: testa se as aplica√ß√µes dependencia do software leantime se encontram instaladas] ****************************************</span>
<span id="line-662"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-663"></span>
<span id="line-664">TASK [Teste: as dependencias encontra-se instaladas?] ************************************************************************************</span>
<span id="line-665"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-666"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-667"><span style="color: #00aa00">    "msg": "SUCESSO: As dependencias estavam instaladas"</span></span>
<span id="line-668"><span style="color: #00aa00">}</span></span>
<span id="line-669"></span>
<span id="line-670">TASK [Simula√ß√£o: Testar se o servi√ßo apache2 se encontra instalado, iniciado e ativo no arranque] ****************************************</span>
<span id="line-671"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-672"></span>
<span id="line-673">TASK [Teste: O servi√ßo apache2 encontra-se ativo no arranque no sistema, e est√° iniciado?] ***********************************************</span>
<span id="line-674"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-675"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-676"><span style="color: #00aa00">    "msg": "SUCESSO: O servi√ßo apache2 est√° correctamente instalado e inicia com o arranque do sistema"</span></span>
<span id="line-677"><span style="color: #00aa00">}</span></span>
<span id="line-678"></span>
<span id="line-679">TASK [Rotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2] ********************************************************</span>
<span id="line-680"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-681"></span>
<span id="line-682">TASK [Simula√ß√£o: Ativa a op√ß√£o file_uploads no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ****************************************</span>
<span id="line-683"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-684"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-685"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-686"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-687"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-688"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-689"></span>
<span id="line-690">TASK [Teste: As linhas do php.ini encontram-se alteradas ?] ******************************************************************************</span>
<span id="line-691"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-692"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-693"><span style="color: #00aa00">    "msg": "SUCESSO: O ficheiro php.ini foi alterado com sucesso"</span></span>
<span id="line-694"><span style="color: #00aa00">}</span></span>
<span id="line-695"></span>
<span id="line-696">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre a pastas /var/www/leantime] **********************************************************************</span>
<span id="line-697"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-698"></span>
<span id="line-699">TASK [Teste: A pasta /var/www/leantime existe e tem as permiss√µes certas?] ***************************************************************</span>
<span id="line-700"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-701"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-702"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas no site leantime"</span></span>
<span id="line-703"><span style="color: #00aa00">}</span></span>
<span id="line-704"></span>
<span id="line-705">TASK [Simula√ß√£o: Verifica se √© necess√°rio criar a base de dados leantime_database] *******************************************************</span>
<span id="line-706"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-707"></span>
<span id="line-708">TASK [Teste: A base de dados leantime_database existe ?] *********************************************************************************</span>
<span id="line-709"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-710"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-711"><span style="color: #00aa00">    "msg": "SUCESSO: A base de dados leantime_database j√° se encontra criada"</span></span>
<span id="line-712"><span style="color: #00aa00">}</span></span>
<span id="line-713"></span>
<span id="line-714">TASK [Simula√ß√£o e Teste: Verifica se o endere√ßo git para a vers√£o de leantime existe] ****************************************************</span>
<span id="line-715"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-716"></span>
<span id="line-717">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /var/www/leantime/config/configuration.php] *******************************************</span>
<span id="line-718"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-719"></span>
<span id="line-720">TASK [Teste: O ficheiro /var/www/leantime/config/configuration.php existe e tem as permiss√µes certas?] ***********************************</span>
<span id="line-721"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-722"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-723"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas e ficheiro configuration.php existente"</span></span>
<span id="line-724"><span style="color: #00aa00">}</span></span>
<span id="line-725"></span>
<span id="line-726">TASK [Simula√ß√£o: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] ******************************</span>
<span id="line-727"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-728"></span>
<span id="line-729">TASK [Teste: O dbUser foi alterado?] *****************************************************************************************************</span>
<span id="line-730"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-731"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-732"><span style="color: #00aa00">    "msg": "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"</span></span>
<span id="line-733"><span style="color: #00aa00">}</span></span>
<span id="line-734"></span>
<span id="line-735">TASK [Simula√ß√£o: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] **************************</span>
<span id="line-736"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-737"></span>
<span id="line-738">TASK [Teste: a vari√°vel dbDatabase foi alterada?] ****************************************************************************************</span>
<span id="line-739"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-740"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-741"><span style="color: #00aa00">    "msg": "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"</span></span>
<span id="line-742"><span style="color: #00aa00">}</span></span>
<span id="line-743"></span>
<span id="line-744">TASK [Simula√ß√£o: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] **************************</span>
<span id="line-745"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-746"></span>
<span id="line-747">TASK [Teste: O dbPassword foi alterado?] *************************************************************************************************</span>
<span id="line-748"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-749"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-750"><span style="color: #00aa00">    "msg": "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"</span></span>
<span id="line-751"><span style="color: #00aa00">}</span></span>
<span id="line-752"></span>
<span id="line-753">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-available/leantime.conf] *******************************************</span>
<span id="line-754"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-755"></span>
<span id="line-756">TASK [Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?] ***********************************</span>
<span id="line-757"><span style="color: #aa0000">fatal: [ubuntu-20.04]: FAILED! =&gt; {</span></span>
<span id="line-758"><span style="color: #aa0000">    "assertion": "ficheiro.stat.mode == \"0755\"",</span></span>
<span id="line-759"><span style="color: #aa0000">    "changed": false,</span></span>
<span id="line-760"><span style="color: #aa0000">    "evaluated_to": false,</span></span>
<span id="line-761"><span style="color: #aa0000">    "msg": "ERRO: Permiss√µes incorrectas"</span></span>
<span id="line-762"><span style="color: #aa0000">}</span></span>
<span id="line-763"></span>
<span id="line-764">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-765"><span style="color: #aa0000">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=27  </span> changed=0    unreachable=0    <span style="color: #aa0000">failed=1   </span> skipped=0    rescued=0    ignored=0</span>
<span id="line-766"></span>
<span id="line-767"></span>
<span id="line-768"><span style="font-weight: bold; color: #aa0000">CRITICAL</span> Ansible return code was <span style="font-weight: bold; color: #00aaaa">2</span>, command was: ansible-playbook --inventory <span style="color: #E850A8">/home/admlocal/.cache/molecule/leantime_ansible/default/</span><span style="color: #ff90e8">inventory</span> --skip-tags molecule-notest,notest <span style="color: #E850A8">/home/admlocal/leantime_ansible/molecule/default/</span><span style="color: #ff90e8">verify.yml</span></span>
<span id="line-769">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule verifyidempotenceconvergenano tasks/tasks.yml </span>
<span id="line-770">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 168 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                                tasks/tasks.yml                                                             </span></span>
<span id="line-771"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-772"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-773">---- name: Atualiza a cache (equivalente a apt update)apt:update_cache: truecache_valid_time: 3600- name: "Atualiza o sistema operativo"apt:upgrade: safe- name: "Instalar as dependencias necess√°ria ao programa leantime"apt:pkg:- mc- screen- git- apache2- mysql-server- php- php-mysql- php-ldap- php-cli- php-soap- php-json- graphviz- php-xml- php-gd- php-zip- libapache2-mod-php- php-dev- libmcrypt-dev- gcc- make- autoconf- libc-dev</span>
<span id="line-774">[?12l[?25h[?25l - autoconf    - libc-dev  - pkg-config- pwgen- curl- unzip    - zip  - php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurl</span>
<span id="line-775"><span style="color: #00aaaa">   # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</span>- name: "Instala o servi√ßo apache2 no arranque do sistema"service:name: apache2state: startedenabled: true</span>
<span id="line-776"><span style="color: #00aaaa">   # Fonte: https://www.mydailytutorials.com/using-ansible-find-module-search-filesfolder</span>- name: "Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurse: trueregister: caminho_php_ini</span>
<span id="line-777"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</span>- name: "Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"</span>
<span id="line-778">[?12l[?25h[?25lregexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:regexp: "^file_uploads"  line: "file_uploads = 1"regexp: "^upload_max_filesize"  line: "upload_max_filesize = 1G"regexp: "^max_file_uploads"  line: "max_file_uploads = 20"regexp: "^post_max_size"  line: "post_max_size = 2G"regexp: "^memory_limit"  line: "memory_limit = 2G"- regexp: "^max_input_time" line: "max_input_time = 3600"</span>
<span id="line-779"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/2.7/modules/file_module.html</span>- name: Cria a directoria tempor√°ria leantime e a directoria de apache leantimefile:path: "{{ item.path }}"state: directory mode: 0755    owner: www-data  group: www-datawith_items:- path: "/tmp/leantime"- path: "/var/www/leantime"</span>
<span id="line-780"><span style="color: #00aaaa">   # Fonte: Ansible for DevOps - Server and configuration management for humans de Jeff Geerling, p√°gina 98</span>
<span id="line-781"></span>   - name: "Cria a base de dados de mysql para o leantime"  mysql_db: "db=leantime_database state=present"</span>
<span id="line-782">- name: "Cria o utilizador para a base de dados leantime"mysql_user:namlogin_leantime }}"</span>
<span id="line-783">[?12l[?25h[?25lmysql_user:namlogin_leantime }}"  password: "{{ password_leantime }}"priv: "leantime_database.*:ALL"host: localhoststate: present</span>
<span id="line-784">- name: "Faz o download do software leantime a partir do reposit√≥rio git"get_url:url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipdest: /tmp/leantimemode: 0755</span>
<span id="line-785"><span style="color: #00aaaa">   # O ficheiro Leantime-versao.zip necessita de ser descomprimido</span>- name: Descomprime o software leantimeunarchive: src: "/tmp/leantime/Leantime-{{ versao_leantime }}.zip"    dest: "/var/www/leantime"  owner: www-datagroup: www-datamode: 0755remote_src: true</span>
<span id="line-786"><span style="color: #00aaaa">   # Ap√≥s a descompress√£o, se o ficheiro configuration.php n√£o existir, este necessita de ser</span>
<span id="line-787">   # criado a partir do ficheiro configuration.sample.php</span>
<span id="line-788">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html</span>- name: Copia o ficheiro de configura√ß√£o configuration.sample.phpansible.builtin.copy: src: /var/www/leantime/config/configuration.sample.php    dest: /var/www/leantime/config/configuration.php  owner: www-datagroup: www-data    mode: '0755'  remote_src: trueforce: false</span>
<span id="line-789">[?12l[?25h[?25l  remote_src: trueforce: false</span>
<span id="line-790"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.ansible.builtin.replace:path: /var/www/leantime/config/configuration.php    regexp: "{{ item.regexp  }}"  replace: "{{ item.line }}"with_items:- regexp: 'dbUser=""'  line: 'dbUser="{{ login_leantime }}"'- regexp: 'dbDatabase=""' line: 'dbDatabase="leantime_database"'    - regexp: 'dbPassword=""'    line: 'dbPassword="{{ password_leantime }}"'</span>
<span id="line-791"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html</span>- name: Copia o template do site para a p√°sta /etc/apache2/sites-availableansible.builtin.template:src: leantime.template.j2dest: /etc/apache2/sites-available/leantime.confowner: root group: www-data mode: 0755 force: false</span>
<span id="line-792"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</span>- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"ansible.builtin.file:src: /etc/apache2/sites-available/leantime.confdest: /etc/apache2/sites-enabled/leantime.confowner: rootgroup: rootmode: '0777'</span>
<span id="line-793">[?12l[?25h[?25lgroup: rootmode: '0777'state: link</span>
<span id="line-794">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span>'[?12l[?25h[?25l'[?12l[?25h[?25l5'[?12l[?25h[?25l55'[?12l[?25h[?25l[?12l[?25h[?25l         <span style="background-color: #AAAAAA; color: #000000">M-D</span> Formato DOS<span style="background-color: #AAAAAA; color: #000000">M-A</span> Anexar<span style="background-color: #AAAAAA; color: #000000">B</span> Seguran√ßa<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">M-M</span> Formato Mac<span style="background-color: #AAAAAA; color: #000000">M-P</span> Prepor<span style="background-color: #AAAAAA; color: #000000">^T</span> P/ ficheiros</span>
<span id="line-795"><span style="background-color: #AAAAAA; color: #000000">Nome do ficheiro onde escrever: tasks/tasks.yml                                                                                           </span>[?12l[?25h[?25l <span style="background-color: #AAAAAA; color: #000000">[ A escrever... ]</span><span style="background-color: #AAAAAA; color: #000000">          </span><span style="background-color: #AAAAAA; color: #000000">[ 168 linhas escritas ]</span><span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar      <span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor<span style="background-color: #AAAAAA; color: #000000">U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt<span style="background-color: #AAAAAA; color: #000000">X</span> Sair    <span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer      <span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-796">[?12l[?25h[?25l</span>
<span id="line-797">[?12l[?25h[?1049l</span>
<span id="line-798">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/tasks.yml molecule verifyidempotenceconverge</span>
<span id="line-799"><span style="color: #0000aa">INFO    </span> default scenario test matrix: dependency, create, prepare, converge</span>
<span id="line-800"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-801"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-802"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-803"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">dependency</span></span>
<span id="line-804"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-805"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-806"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">create</span></span>
<span id="line-807"><span style="color: #aa0000">WARNING </span> Skipping, instances already created.</span>
<span id="line-808"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">prepare</span></span>
<span id="line-809"><span style="color: #aa0000">WARNING </span> Skipping, instances already prepared.</span>
<span id="line-810"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">converge</span></span>
<span id="line-811"></span>
<span id="line-812">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-813"></span>
<span id="line-814">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-815"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-816"></span>
<span id="line-817">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-818"></span>
<span id="line-819">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-820"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-821"></span>
<span id="line-822">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-823"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-824"></span>
<span id="line-825">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-826"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-827"></span>
<span id="line-828">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-829"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-830"></span>
<span id="line-831">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-832"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-833"></span>
<span id="line-834">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-835"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-836"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-837"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-838"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-839"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-840"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-841"></span>
<span id="line-842">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-843"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-844"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-845"></span>
<span id="line-846">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-847"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-848"></span>
<span id="line-849">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-850"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-851"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-852"></span>
<span id="line-853">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-854"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-855"></span>
<span id="line-856">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-857"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-858"></span>
<span id="line-859">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-860"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-861"></span>
<span id="line-862">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-863"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-864"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-865"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-866"></span>
<span id="line-867">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-868"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-869"></span>
<span id="line-870">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-871"><span style="color: #aa5500">changed: [ubuntu-20.04]</span></span>
<span id="line-872"></span>
<span id="line-873">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-874"><span style="color: #aa5500">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> <span style="color: #aa5500">changed=1   </span> unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-875"></span>
<span id="line-876"></span>
<span id="line-877">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule convergeidempotenece</span>
<span id="line-878">Usage: molecule [OPTIONS] COMMAND [ARGS]...</span>
<span id="line-879">Try "molecule --help" for help.</span>
<span id="line-880"></span>
<span id="line-881">Error: No such command "idempotece".</span>
<span id="line-882">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule idempotecence</span>
<span id="line-883"><span style="color: #0000aa">INFO    </span> default scenario test matrix: idempotence</span>
<span id="line-884"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-885"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-886"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-887"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">idempotence</span></span>
<span id="line-888"></span>
<span id="line-889">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-890"></span>
<span id="line-891">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-892"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-893"></span>
<span id="line-894">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-895"></span>
<span id="line-896">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-897"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-898"></span>
<span id="line-899">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-900"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-901"></span>
<span id="line-902">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-903"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-904"></span>
<span id="line-905">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-906"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-907"></span>
<span id="line-908">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-909"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-910"></span>
<span id="line-911">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-912"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-913"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-914"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-915"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-916"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-917"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-918"></span>
<span id="line-919">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-920"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-921"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-922"></span>
<span id="line-923">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-924"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-925"></span>
<span id="line-926">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-927"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-928"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-929"></span>
<span id="line-930">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-931"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-932"></span>
<span id="line-933">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-934"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-935"></span>
<span id="line-936">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-937"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-938"></span>
<span id="line-939">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-940"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-941"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-942"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-943"></span>
<span id="line-944">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-945"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-946"></span>
<span id="line-947">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-948"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-949"></span>
<span id="line-950">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-951"><span style="color: #00aa00">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-952"></span>
<span id="line-953"></span>
<span id="line-954"><span style="color: #0000aa">INFO    </span> Idempotence completed successfully.</span>
<span id="line-955">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule idempotenceverify</span>
<span id="line-956"><span style="color: #0000aa">INFO    </span> default scenario test matrix: verify</span>
<span id="line-957"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-958"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-959"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-960"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">verify</span></span>
<span id="line-961"><span style="color: #0000aa">INFO    </span> Running Ansible Verifier</span>
<span id="line-962"></span>
<span id="line-963">PLAY [Infraestrutura conduzida por testes] ***********************************************************************************************</span>
<span id="line-964"></span>
<span id="line-965">TASK [Vari√°veis] *************************************************************************************************************************</span>
<span id="line-966"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-967"></span>
<span id="line-968">TASK [Simula√ß√£o: Atualizar a cache do sistema] *******************************************************************************************</span>
<span id="line-969"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-970"></span>
<span id="line-971">TASK [teste: a cache encontra-se actualizada?] *******************************************************************************************</span>
<span id="line-972"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-973"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-974"><span style="color: #00aa00">    "msg": "SUCESSO: A cache est√° atualizada"</span></span>
<span id="line-975"><span style="color: #00aa00">}</span></span>
<span id="line-976"></span>
<span id="line-977">TASK [Atualizar o sistema operativo (equivalente a apt upgrade)] *************************************************************************</span>
<span id="line-978"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-979"></span>
<span id="line-980">TASK [teste: o sistema operativo encontra-se atualizado?] ********************************************************************************</span>
<span id="line-981"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-982"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-983"><span style="color: #00aa00">    "msg": "SUCESSO: O sistema operativo est√° atualizado"</span></span>
<span id="line-984"><span style="color: #00aa00">}</span></span>
<span id="line-985"></span>
<span id="line-986">TASK [Teste: a cache encontra-se atualizada?] ********************************************************************************************</span>
<span id="line-987"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-988"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-989"><span style="color: #00aa00">    "msg": "SUCESSO: A cache est√° atualizada"</span></span>
<span id="line-990"><span style="color: #00aa00">}</span></span>
<span id="line-991"></span>
<span id="line-992">TASK [Simula√ß√£o: testa se as aplica√ß√µes dependencia do software leantime se encontram instaladas] ****************************************</span>
<span id="line-993"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-994"></span>
<span id="line-995">TASK [Teste: as dependencias encontra-se instaladas?] ************************************************************************************</span>
<span id="line-996"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-997"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-998"><span style="color: #00aa00">    "msg": "SUCESSO: As dependencias estavam instaladas"</span></span>
<span id="line-999"><span style="color: #00aa00">}</span></span>
<span id="line-1000"></span>
<span id="line-1001">TASK [Simula√ß√£o: Testar se o servi√ßo apache2 se encontra instalado, iniciado e ativo no arranque] ****************************************</span>
<span id="line-1002"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1003"></span>
<span id="line-1004">TASK [Teste: O servi√ßo apache2 encontra-se ativo no arranque no sistema, e est√° iniciado?] ***********************************************</span>
<span id="line-1005"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1006"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1007"><span style="color: #00aa00">    "msg": "SUCESSO: O servi√ßo apache2 est√° correctamente instalado e inicia com o arranque do sistema"</span></span>
<span id="line-1008"><span style="color: #00aa00">}</span></span>
<span id="line-1009"></span>
<span id="line-1010">TASK [Rotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2] ********************************************************</span>
<span id="line-1011"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1012"></span>
<span id="line-1013">TASK [Simula√ß√£o: Ativa a op√ß√£o file_uploads no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ****************************************</span>
<span id="line-1014"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-1015"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-1016"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-1017"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-1018"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-1019"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-1020"></span>
<span id="line-1021">TASK [Teste: As linhas do php.ini encontram-se alteradas ?] ******************************************************************************</span>
<span id="line-1022"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1023"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1024"><span style="color: #00aa00">    "msg": "SUCESSO: O ficheiro php.ini foi alterado com sucesso"</span></span>
<span id="line-1025"><span style="color: #00aa00">}</span></span>
<span id="line-1026"></span>
<span id="line-1027">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre a pastas /var/www/leantime] **********************************************************************</span>
<span id="line-1028"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1029"></span>
<span id="line-1030">TASK [Teste: A pasta /var/www/leantime existe e tem as permiss√µes certas?] ***************************************************************</span>
<span id="line-1031"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1032"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1033"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas no site leantime"</span></span>
<span id="line-1034"><span style="color: #00aa00">}</span></span>
<span id="line-1035"></span>
<span id="line-1036">TASK [Simula√ß√£o: Verifica se √© necess√°rio criar a base de dados leantime_database] *******************************************************</span>
<span id="line-1037"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1038"></span>
<span id="line-1039">TASK [Teste: A base de dados leantime_database existe ?] *********************************************************************************</span>
<span id="line-1040"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1041"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1042"><span style="color: #00aa00">    "msg": "SUCESSO: A base de dados leantime_database j√° se encontra criada"</span></span>
<span id="line-1043"><span style="color: #00aa00">}</span></span>
<span id="line-1044"></span>
<span id="line-1045">TASK [Simula√ß√£o e Teste: Verifica se o endere√ßo git para a vers√£o de leantime existe] ****************************************************</span>
<span id="line-1046"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1047"></span>
<span id="line-1048">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /var/www/leantime/config/configuration.php] *******************************************</span>
<span id="line-1049"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1050"></span>
<span id="line-1051">TASK [Teste: O ficheiro /var/www/leantime/config/configuration.php existe e tem as permiss√µes certas?] ***********************************</span>
<span id="line-1052"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1053"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1054"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas e ficheiro configuration.php existente"</span></span>
<span id="line-1055"><span style="color: #00aa00">}</span></span>
<span id="line-1056"></span>
<span id="line-1057">TASK [Simula√ß√£o: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] ******************************</span>
<span id="line-1058"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1059"></span>
<span id="line-1060">TASK [Teste: O dbUser foi alterado?] *****************************************************************************************************</span>
<span id="line-1061"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1062"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1063"><span style="color: #00aa00">    "msg": "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1064"><span style="color: #00aa00">}</span></span>
<span id="line-1065"></span>
<span id="line-1066">TASK [Simula√ß√£o: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] **************************</span>
<span id="line-1067"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1068"></span>
<span id="line-1069">TASK [Teste: a vari√°vel dbDatabase foi alterada?] ****************************************************************************************</span>
<span id="line-1070"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1071"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1072"><span style="color: #00aa00">    "msg": "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1073"><span style="color: #00aa00">}</span></span>
<span id="line-1074"></span>
<span id="line-1075">TASK [Simula√ß√£o: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] **************************</span>
<span id="line-1076"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1077"></span>
<span id="line-1078">TASK [Teste: O dbPassword foi alterado?] *************************************************************************************************</span>
<span id="line-1079"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1080"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1081"><span style="color: #00aa00">    "msg": "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1082"><span style="color: #00aa00">}</span></span>
<span id="line-1083"></span>
<span id="line-1084">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-available/leantime.conf] *******************************************</span>
<span id="line-1085"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1086"></span>
<span id="line-1087">TASK [Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?] ***********************************</span>
<span id="line-1088"><span style="color: #aa0000">fatal: [ubuntu-20.04]: FAILED! =&gt; {</span></span>
<span id="line-1089"><span style="color: #aa0000">    "assertion": "ficheiro.stat.gr_name == \"www-data\"",</span></span>
<span id="line-1090"><span style="color: #aa0000">    "changed": false,</span></span>
<span id="line-1091"><span style="color: #aa0000">    "evaluated_to": false,</span></span>
<span id="line-1092"><span style="color: #aa0000">    "msg": "ERRO: Permiss√µes incorrectas"</span></span>
<span id="line-1093"><span style="color: #aa0000">}</span></span>
<span id="line-1094"></span>
<span id="line-1095">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-1096"><span style="color: #aa0000">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=27  </span> changed=0    unreachable=0    <span style="color: #aa0000">failed=1   </span> skipped=0    rescued=0    ignored=0</span>
<span id="line-1097"></span>
<span id="line-1098"></span>
<span id="line-1099"><span style="font-weight: bold; color: #aa0000">CRITICAL</span> Ansible return code was <span style="font-weight: bold; color: #00aaaa">2</span>, command was: ansible-playbook --inventory <span style="color: #E850A8">/home/admlocal/.cache/molecule/leantime_ansible/default/</span><span style="color: #ff90e8">inventory</span> --skip-tags molecule-notest,notest <span style="color: #E850A8">/home/admlocal/leantime_ansible/molecule/default/</span><span style="color: #ff90e8">verify.yml</span></span>
<span id="line-1100">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano molecule/default/verify.yml </span>
<span id="line-1101">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 302 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                          molecule/default/verify.yml                                                       </span></span>
<span id="line-1102"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-1103"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-1104">---</span>
<span id="line-1105"><span style="color: #00aaaa"># Tutorial de inspira√ß√£o para a infraestrutura conduzida por teste no site</span>
<span id="line-1106"># https://www.adictosaltrabajo.com/2020/05/08/ansible-testing-using-molecule-with-ansible-as-verifier/</span>
<span id="line-1107"></span>- name: "Infraestrutura conduzida por testes"hosts: allgather_facts: falsebecome: truetasks:- name: Vari√°veisinclude_vars:file: ../../vars/main.yml- name: "Simula√ß√£o: Atualizar a cache do sistema"apt:update_cache: truecache_valid_time: 3600check_mode: trueregister: estado- name: "teste: a cache encontra-se actualizada?"assert:that:- not estado.changedsuccess_msg: "SUCESSO: A cache est√° atualizada"fail_msg: "ERRO: Existem actualiza√ß√µes pendentes"- name: "Atualizar o sistema operativo (equivalente a apt upgrade)"apt:upgrade: safecheck_mode: trueregister: estado- name: "teste: o sistema operativo encontra-se atualizado?"</span>
<span id="line-1108">[?12l[?25h[?25l  - name: "teste: o sistema operativo encontra-se atualizado?"</span>
<span id="line-1109">    assert:that: - not estado.changed    success_msg: "SUCESSO: O sistema operativo est√° atualizado"    fail_msg: "ERRO: Existem actualiza√ß√µes pendentes"</span>
<span id="line-1110">  - name: "Teste: a cache encontra-se atualizada?"  assert:    that:  - not estado.changedsuccess_msg: "SUCESSO: A cache est√° atualizada"fail_msg: "ERRO: Existem atualiza√ß√µes pendentes"</span>
<span id="line-1111">  - name: "Simula√ß√£o: testa se as aplica√ß√µes dependencia do software leantime se encontram instaladas"apt:pkg:  - mc  - screen- git    - apache2  - mysql-server- phpphp-mysql- php-ldap- php-cli- php-soap    - php-json  - graphviz- php-xml  - php-gd  - php-zip- libapache2-mod-php    - php-dev</span>
<span id="line-1112">[?12l[?25h[?25l- libapache2-mod-php    - php-dev  - libmcrypt-dev- gccmake- autoconf- libc-dev- pkg-config    - pwgen  - curl- unzipzip- php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurlcheck_mode: trueregister: estado</span>
<span id="line-1113">  - name: "Teste: as dependencias encontra-se instaladas?"assert:that:not estado.changedsuccess_msg: "SUCESSO: As dependencias estavam instaladas"fail_msg: "ERRO: Faltam instalar algumas dependencias. O software pode estar parcialmente instalado"</span>
<span id="line-1114"><span style="color: #00aaaa">  # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</span>- name: "Simula√ß√£o: Testar se o servi√ßo apache2 se encontra instalado, iniciado e ativo no arranque"service:name: apache2state: startedenabled: truecheck_mode: true</span>
<span id="line-1115">[?12l[?25h[?25lenabled: trueO servi√ßo apache2 encontra-se ativo no arranque no sistema, e est√° iniciado?"O servi√ßo apache2 est√° correctamente instalado e inicia com o arranque do sistema"O servi√ßo apache2 n√£o se encontra correcta<span style="color: #00aaaa">: https://www.mydailytutorials.com/using--find-module-search-filesfolder</span>Rotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurseregister: caminho_php_ini</span>
<span id="line-1116"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</span>- name: "Simula√ß√£o: Ativa a op√ß√£o file_uploads no ficheiro php.ini, utilizando o m√≥dulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:- regexp: "^file_uploads"line: "file_uploads = 1"- regexp: "^upload_max_filesize"line: "upload_max_filesize = 1G"- regexp: "^max_file_uploads"line: "max_file_uploads = 20"- regexp: "^post_max_size"line: "post_max_size = 2G"- regexp: "^memory_limit"</span>
<span id="line-1117">[?12l[?25h[?25l78line: "post_max_size = 2G"- regexp: "^memory_limit"line: "memory_limit = 2G"- regexp: "^max_input_time"  line: "max_input_time = 3600"As linhas do php.ini encontram-se alteradas ?"ficheiro php.ini foi alterado com sucesso"Algumas altera√ß√µes ao ficheiro php.ini n√£o tiveram sucesso"<span style="color: #00aaaa">O site deve existir na pasta /var/www/leantime. Este teste visa determinar se a pasta</span>
<span id="line-1118">  # existe e se temas permiss√µes certas</span>
<span id="line-1119">  # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre a pastas /var/www/leantime"</span>
<span id="line-1120">    stat:    path: "/var/www/leantime"register: pasta</span>
<span id="line-1121">  - name: "Teste: A pasta /var/www/leantime existe e tem as permiss√µes certas?"assert:  that:  - pasta.stat.exists- pasta.stat.isdir  - pasta.stat.mode == "0755"- pasta.stat.pw_name == "www-data"  - pasta.stat.gr_name == "www-data"success_msg: "SUCESSO: Permiss√µes correctas no site leantime"fail_msg: "ERRO: Permiss√µes incorrectas no site leantime ou site n√£o existente"</span>
<span id="line-1122"><span style="color: #00aaaa">  # Outro dos requesitos √© a exist√™ncia de uma base de dados para o site.</span>
<span id="line-1123"></span>[?12l[?25h[?25l<span style="color: #00aaaa">  # Outro dos requesitos √© a exist√™ncia de uma base de dados para o site.</span>
<span id="line-1124">  # Esta base de dados deve ser criada, logo tem de ser testada para determinar se ela existe ou n√£o.</span>
<span id="line-1125">  # Fonte de inspira√ß√£o: https://serverfault.com/questions/173978/from-a-shell-script-how-can-i-check-whether-a-mysql-database-exists</span>- name: "Simula√ß√£o: Verifica se √© necess√°rio criar a base de dados leantime_database"shell: "mysql -u root -e 'use leantime_database'"resultfailed_when: false  changed_when: false</span>
<span id="line-1126">  - name: "Teste: A base de dados leantime_database existe ?"assert:that:- result.rc == 0success_msg: "SUCESSO: A base de dados leantime_database j√° se encontra criada"fail_msg: "ERRO: N√£o existe a base de dados leantime_database"</span>
<span id="line-1127"><span style="color: #00aaaa">  # Teste: O download do software leantime deve ser poss√≠vel, a partir do site do leantime</span>- name: "Simula√ß√£o e Teste: Verifica se o endere√ßo git para a vers√£o de leantime existe"uri:url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipregister: resultado<span style="color: #00aaaa">Teste: Do ficheiro configuration.php no site do leantime. A exist√™ncia deste ficheiro       com as permiss√µes certas indica que o processo de unzip correu bemDocumenta√ß√£o oficial em: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>o ficheiro /var/www/leantime/config/configuration.php"/config/configuration.php"ficheiroO ficheiro /var/www/leantime/config/configuration.php existe e tem as permiss√µes certas?"ficheiro.stat.exists</span>
<span id="line-1128">[?12l[?25h[?25lthat: - ficheiro.stat.exists - ficheiro.stat.isreg - ficheiro.stat.mode == "0755" - ficheiro.stat.pw_name == "www-data"    - ficheiro.stat.gr_name == "www-data"  success_msg: "SUCESSO: Permiss√µes correctas e ficheiro configuration.php existente"  fail_msg: "ERRO: Permiss√µes incorrectas ou ficheiro configuration.php n√£o existente"</span>
<span id="line-1129"><span style="color: #00aaaa">  # Teste: O ficheiro /var/www/leantime/config/configuration.php necessita de ser alterado.</span>
<span id="line-1130">  # As vari√°veis dbuser, dbDatabase, e dbPassword necessitam de estar configuradas.</span>
<span id="line-1131">  # Por simula√ß√£o o sistema vai determinar se estas est√£o configuradas com o valor esperado.</span>
<span id="line-1132">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:path: /var/www/leantime/config/configuration.phpregexp: 'dbUser=""' replace: 'dbUser="{{ login_leantime }}"'  check_mode: yesregister: conffailed_when: false</span>
<span id="line-1133">  - name: "Teste: O dbUser foi alterado?"</span>
<span id="line-1134">    assert: that: - conf is not changed    - conf is not failed  success_msg: "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"fail_msg: "ERRO: O dbUser n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1135"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:path: /var/www/leantime/config/configuration.php</span>
<span id="line-1136">[?12l[?25h[?25l    ansible.builtin.replace:path: /var/www/leantime/config/configuration.phpregexp: 'dbDatabase=""'replace: 'dbDatabase="leantime_database"'check_mode: yesregister: conffailed_when: false</span>
<span id="line-1137">  - name: "Teste: a vari√°vel dbDatabase foi alterada?"</span>
<span id="line-1138">    assert: that: - conf is not changed - conf is not failed    success_msg: "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"  fail_msg: "ERRO: O dbDatabase n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1139"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:  path: /var/www/leantime/config/configuration.php  regexp: 'dbPassword=""'replace: 'dbPassword="{{ password_leantime }}"'  check_mode: yesregister: conffailed_when: false</span>
<span id="line-1140">  - name: "Teste: O dbPassword foi alterado?"assert:that:- conf is not changed- conf is not failed success_msg: "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"    fail_msg: "ERRO: O dbPassword n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1141"><span style="color: #00aaaa">  # A configura√ß√£o do site leantime necessita que seja criado um site atrav√©s de um ficheiro de</span>
<span id="line-1142"></span>[?12l[?25h[?25l<span style="color: #00aaaa">  # A configura√ß√£o do site leantime necessita que seja criado um site atrav√©s de um ficheiro de</span>
<span id="line-1143">  # configura√ß√£o, dentro das pasta do apache2. Deve existir um ficheiro de configura√ß√£o do</span>
<span id="line-1144">  # leantime em (/etc/apache2/sites-available</span></span>
<span id="line-1145"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-available/leantime.conf"stat:path: "/etc/apache2/sites-available/leantime.conf"  register: ficheiro</span>
<span id="line-1146">  - name: "Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?"assert:that:  - ficheiro.stat.exists  - ficheiro.stat.isreg- ficheiro.stat.mode == "0755" - ficheiro.stat.pw_name == "root" - ficheiro.stat.gr_name == "www-data"  success_msg: "SUCESSO: Permiss√µes correctas"fail_msg: "ERRO: Permiss√µes incorrectas"</span>
<span id="line-1147"><span style="color: #00aaaa">  # O site deve estar ativo no apache. Este teste vai verificar se o site se encontra ativo</span>
<span id="line-1148">  # https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-enabled/leantime.conf"stat:path: "/etc/apache2/sites-enabled/leantime.conf"  register: ficheiro</span>
<span id="line-1149">  - name: "Teste: O ficheiro /etc/apache2/sites-enabled/leantime.conf existe e tem as permiss√µes certas?"assert:that:  - ficheiro.stat.exists  - ficheiro.stat.islnk- ficheiro.stat.mode == "0777" - ficheiro.stat.pw_name == "root"</span>
<span id="line-1150">[?12l[?25h[?25l77root"</span>
<span id="line-1151">[?12l[?25h[?25l78M- ficheiro.stat.islnk</span>
<span id="line-1152">[?12l[?25h[?25l78M- ficheiro.stat.exists</span>
<span id="line-1153">[?12l[?25h[?25l78Mthat:</span>
<span id="line-1154">[?12l[?25h[?25l78Massert:</span>
<span id="line-1155">[?12l[?25h[?25l78M- name: "Teste: O ficheiro /etc/apache2/sites-enabled/leantime.conf existe e tem as permiss√µes certas?"</span>
<span id="line-1156">[?12l[?25h[?25l78M[?12l[?25h[?25l[?12l[?25h[?1049l</span>
<span id="line-1157">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano molecule/default/verify.yml </span>
<span id="line-1158">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 302 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                          molecule/default/verify.yml                                                       </span></span>
<span id="line-1159"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-1160"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-1161">---</span>
<span id="line-1162"><span style="color: #00aaaa"># Tutorial de inspira√ß√£o para a infraestrutura conduzida por teste no site</span>
<span id="line-1163"># https://www.adictosaltrabajo.com/2020/05/08/ansible-testing-using-molecule-with-ansible-as-verifier/</span>
<span id="line-1164"></span>- name: "Infraestrutura conduzida por testes"hosts: allgather_facts: falsebecome: truetasks:- name: Vari√°veisinclude_vars:file: ../../vars/main.yml- name: "Simula√ß√£o: Atualizar a cache do sistema"apt:update_cache: truecache_valid_time: 3600check_mode: trueregister: estado- name: "teste: a cache encontra-se actualizada?"assert:that:- not estado.changedsuccess_msg: "SUCESSO: A cache est√° atualizada"fail_msg: "ERRO: Existem actualiza√ß√µes pendentes"- name: "Atualizar o sistema operativo (equivalente a apt upgrade)"apt:upgrade: safecheck_mode: trueregister: estado- name: "teste: o sistema operativo encontra-se atualizado?"</span>
<span id="line-1165">[?12l[?25h[?25l  - name: "teste: o sistema operativo encontra-se atualizado?"</span>
<span id="line-1166">    assert:that: - not estado.changed    success_msg: "SUCESSO: O sistema operativo est√° atualizado"    fail_msg: "ERRO: Existem actualiza√ß√µes pendentes"</span>
<span id="line-1167">  - name: "Teste: a cache encontra-se atualizada?"  assert:    that:  - not estado.changedsuccess_msg: "SUCESSO: A cache est√° atualizada"fail_msg: "ERRO: Existem atualiza√ß√µes pendentes"</span>
<span id="line-1168">  - name: "Simula√ß√£o: testa se as aplica√ß√µes dependencia do software leantime se encontram instaladas"apt:pkg:  - mc  - screen- git    - apache2  - mysql-server- phpphp-mysql- php-ldap- php-cli- php-soap    - php-json  - graphviz- php-xml  - php-gd  - php-zip- libapache2-mod-php    - php-dev</span>
<span id="line-1169">[?12l[?25h[?25l- libapache2-mod-php    - php-dev  - libmcrypt-dev- gccmake- autoconf- libc-dev- pkg-config    - pwgen  - curl- unzipzip- php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurlcheck_mode: trueregister: estado</span>
<span id="line-1170">  - name: "Teste: as dependencias encontra-se instaladas?"assert:that:not estado.changedsuccess_msg: "SUCESSO: As dependencias estavam instaladas"fail_msg: "ERRO: Faltam instalar algumas dependencias. O software pode estar parcialmente instalado"</span>
<span id="line-1171"><span style="color: #00aaaa">  # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</span>- name: "Simula√ß√£o: Testar se o servi√ßo apache2 se encontra instalado, iniciado e ativo no arranque"service:name: apache2state: startedenabled: truecheck_mode: true</span>
<span id="line-1172">[?12l[?25h[?25lenabled: trueO servi√ßo apache2 encontra-se ativo no arranque no sistema, e est√° iniciado?"O servi√ßo apache2 est√° correctamente instalado e inicia com o arranque do sistema"O servi√ßo apache2 n√£o se encontra correcta<span style="color: #00aaaa">: https://www.mydailytutorials.com/using--find-module-search-filesfolder</span>Rotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurseregister: caminho_php_ini</span>
<span id="line-1173"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</span>- name: "Simula√ß√£o: Ativa a op√ß√£o file_uploads no ficheiro php.ini, utilizando o m√≥dulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:- regexp: "^file_uploads"line: "file_uploads = 1"- regexp: "^upload_max_filesize"line: "upload_max_filesize = 1G"- regexp: "^max_file_uploads"line: "max_file_uploads = 20"- regexp: "^post_max_size"line: "post_max_size = 2G"- regexp: "^memory_limit"</span>
<span id="line-1174">[?12l[?25h[?25l78line: "post_max_size = 2G"- regexp: "^memory_limit"line: "memory_limit = 2G"- regexp: "^max_input_time"  line: "max_input_time = 3600"As linhas do php.ini encontram-se alteradas ?"ficheiro php.ini foi alterado com sucesso"Algumas altera√ß√µes ao ficheiro php.ini n√£o tiveram sucesso"<span style="color: #00aaaa">O site deve existir na pasta /var/www/leantime. Este teste visa determinar se a pasta</span>
<span id="line-1175">  # existe e se temas permiss√µes certas</span>
<span id="line-1176">  # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre a pastas /var/www/leantime"</span>
<span id="line-1177">    stat:    path: "/var/www/leantime"register: pasta</span>
<span id="line-1178">  - name: "Teste: A pasta /var/www/leantime existe e tem as permiss√µes certas?"assert:  that:  - pasta.stat.exists- pasta.stat.isdir  - pasta.stat.mode == "0755"- pasta.stat.pw_name == "www-data"  - pasta.stat.gr_name == "www-data"success_msg: "SUCESSO: Permiss√µes correctas no site leantime"fail_msg: "ERRO: Permiss√µes incorrectas no site leantime ou site n√£o existente"</span>
<span id="line-1179"><span style="color: #00aaaa">  # Outro dos requesitos √© a exist√™ncia de uma base de dados para o site.</span>
<span id="line-1180"></span>[?12l[?25h[?25l<span style="color: #00aaaa">  # Outro dos requesitos √© a exist√™ncia de uma base de dados para o site.</span>
<span id="line-1181">  # Esta base de dados deve ser criada, logo tem de ser testada para determinar se ela existe ou n√£o.</span>
<span id="line-1182">  # Fonte de inspira√ß√£o: https://serverfault.com/questions/173978/from-a-shell-script-how-can-i-check-whether-a-mysql-database-exists</span>- name: "Simula√ß√£o: Verifica se √© necess√°rio criar a base de dados leantime_database"shell: "mysql -u root -e 'use leantime_database'"resultfailed_when: false  changed_when: false</span>
<span id="line-1183">  - name: "Teste: A base de dados leantime_database existe ?"assert:that:- result.rc == 0success_msg: "SUCESSO: A base de dados leantime_database j√° se encontra criada"fail_msg: "ERRO: N√£o existe a base de dados leantime_database"</span>
<span id="line-1184"><span style="color: #00aaaa">  # Teste: O download do software leantime deve ser poss√≠vel, a partir do site do leantime</span>- name: "Simula√ß√£o e Teste: Verifica se o endere√ßo git para a vers√£o de leantime existe"uri:url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipregister: resultado<span style="color: #00aaaa">Teste: Do ficheiro configuration.php no site do leantime. A exist√™ncia deste ficheiro       com as permiss√µes certas indica que o processo de unzip correu bemDocumenta√ß√£o oficial em: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>o ficheiro /var/www/leantime/config/configuration.php"/config/configuration.php"ficheiroO ficheiro /var/www/leantime/config/configuration.php existe e tem as permiss√µes certas?"ficheiro.stat.exists</span>
<span id="line-1185">[?12l[?25h[?25lthat: - ficheiro.stat.exists - ficheiro.stat.isreg - ficheiro.stat.mode == "0755" - ficheiro.stat.pw_name == "www-data"    - ficheiro.stat.gr_name == "www-data"  success_msg: "SUCESSO: Permiss√µes correctas e ficheiro configuration.php existente"  fail_msg: "ERRO: Permiss√µes incorrectas ou ficheiro configuration.php n√£o existente"</span>
<span id="line-1186"><span style="color: #00aaaa">  # Teste: O ficheiro /var/www/leantime/config/configuration.php necessita de ser alterado.</span>
<span id="line-1187">  # As vari√°veis dbuser, dbDatabase, e dbPassword necessitam de estar configuradas.</span>
<span id="line-1188">  # Por simula√ß√£o o sistema vai determinar se estas est√£o configuradas com o valor esperado.</span>
<span id="line-1189">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:path: /var/www/leantime/config/configuration.phpregexp: 'dbUser=""' replace: 'dbUser="{{ login_leantime }}"'  check_mode: yesregister: conffailed_when: false</span>
<span id="line-1190">  - name: "Teste: O dbUser foi alterado?"</span>
<span id="line-1191">    assert: that: - conf is not changed    - conf is not failed  success_msg: "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"fail_msg: "ERRO: O dbUser n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1192"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:path: /var/www/leantime/config/configuration.php</span>
<span id="line-1193">[?12l[?25h[?25l    ansible.builtin.replace:path: /var/www/leantime/config/configuration.phpregexp: 'dbDatabase=""'replace: 'dbDatabase="leantime_database"'check_mode: yesregister: conffailed_when: false</span>
<span id="line-1194">  - name: "Teste: a vari√°vel dbDatabase foi alterada?"</span>
<span id="line-1195">    assert: that: - conf is not changed - conf is not failed    success_msg: "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"  fail_msg: "ERRO: O dbDatabase n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1196"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:  path: /var/www/leantime/config/configuration.php  regexp: 'dbPassword=""'replace: 'dbPassword="{{ password_leantime }}"'  check_mode: yesregister: conffailed_when: false</span>
<span id="line-1197">  - name: "Teste: O dbPassword foi alterado?"assert:that:- conf is not changed- conf is not failed success_msg: "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"    fail_msg: "ERRO: O dbPassword n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1198"><span style="color: #00aaaa">  # A configura√ß√£o do site leantime necessita que seja criado um site atrav√©s de um ficheiro de</span>
<span id="line-1199"></span>[?12l[?25h[?25l<span style="color: #00aaaa">  # A configura√ß√£o do site leantime necessita que seja criado um site atrav√©s de um ficheiro de</span>
<span id="line-1200">  # configura√ß√£o, dentro das pasta do apache2. Deve existir um ficheiro de configura√ß√£o do</span>
<span id="line-1201">  # leantime em (/etc/apache2/sites-available</span></span>
<span id="line-1202"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-available/leantime.conf"stat:path: "/etc/apache2/sites-available/leantime.conf"  register: ficheiro</span>
<span id="line-1203">  - name: "Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?"assert:that:  - ficheiro.stat.exists  - ficheiro.stat.isreg- ficheiro.stat.mode == "0755" - ficheiro.stat.pw_name == "root" - ficheiro.stat.gr_name == "www-data"  success_msg: "SUCESSO: Permiss√µes correctas"fail_msg: "ERRO: Permiss√µes incorrectas"</span>
<span id="line-1204"><span style="color: #00aaaa">  # O site deve estar ativo no apache. Este teste vai verificar se o site se encontra ativo</span>
<span id="line-1205">  # https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-enabled/leantime.conf"stat:path: "/etc/apache2/sites-enabled/leantime.conf"  register: ficheiro</span>
<span id="line-1206">  - name: "Teste: O ficheiro /etc/apache2/sites-enabled/leantime.conf existe e tem as permiss√µes certas?"assert:that:  - ficheiro.stat.exists  - ficheiro.stat.islnk- ficheiro.stat.mode == "0777" - ficheiro.stat.pw_name == "root"</span>
<span id="line-1207">[?12l[?25h[?25l77root"</span>
<span id="line-1208">[?12l[?25h[?25l78M- ficheiro.stat.islnk</span>
<span id="line-1209">[?12l[?25h[?25l78M- ficheiro.stat.exists</span>
<span id="line-1210">[?12l[?25h[?25l78Mthat:</span>
<span id="line-1211">[?12l[?25h[?25l78Massert:</span>
<span id="line-1212">[?12l[?25h[?25l78M- name: "Teste: O ficheiro /etc/apache2/sites-enabled/leantime.conf existe e tem as permiss√µes certas?"</span>
<span id="line-1213">[?12l[?25h[?25l78M[?12l[?25h[?25l78Mregister: ficheiro</span>
<span id="line-1214">[?12l[?25h[?25l78Mpath: "/etc/apache2/sites-enabled/leantime.conf"</span>
<span id="line-1215">[?12l[?25h[?25l78Mstat:</span>
<span id="line-1216">[?12l[?25h[?25l78M- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-enabled/leantime.conf"</span>
<span id="line-1217">[?12l[?25h[?25l78M<span style="color: #00aaaa">  # https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>
<span id="line-1218"></span>[?12l[?25h[?25l78M<span style="color: #00aaaa">  # O site deve estar ativo no apache. Este teste vai verificar se o site se encontra ativo</span>
<span id="line-1219"></span>[?12l[?25h[?25l78M[?12l[?25h[?25l78Mfail_msg: "ERRO: Permiss√µes incorrectas"</span>
<span id="line-1220">[?12l[?25h[?25l78Msuccess_msg: "SUCESSO: Permiss√µes correctas"</span>
<span id="line-1221">[?12l[?25h[?25l78M- ficheiro.stat.gr_name == "www-data"</span>
<span id="line-1222">[?12l[?25h[?25l78M- ficheiro.stat.pw_name == "root"</span>
<span id="line-1223">[?12l[?25h[?25l78M- ficheiro.stat.mode == "0755"</span>
<span id="line-1224">[?12l[?25h[?25l78M- ficheiro.stat.isreg</span>
<span id="line-1225">[?12l[?25h[?25l78M- ficheiro.stat.exists</span>
<span id="line-1226">[?12l[?25h[?25l78Mthat:</span>
<span id="line-1227">[?12l[?25h[?25l78Massert:</span>
<span id="line-1228">[?12l[?25h[?25l78M- name: "Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?"</span>
<span id="line-1229">[?12l[?25h[?25l78M[?12l[?25h[?25l78Mregister: ficheiro</span>
<span id="line-1230">[?12l[?25h[?25l78Mpath: "/etc/apache2/sites-available/leantime.conf"</span>
<span id="line-1231">[?12l[?25h[?25l78Mstat:</span>
<span id="line-1232">[?12l[?25h[?25l78M- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-available/leantime.conf"</span>
<span id="line-1233">[?12l[?25h[?25l78M<span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>
<span id="line-1234"></span>[?12l[?25h[?25l78M<span style="color: #00aaaa">  # leantime em (/etc/apache2/sites-available</span>
<span id="line-1235"></span>[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25lata"[?12l[?25h[?25l</span>
<span id="line-1236">[?12l[?25h[?1049l</span>
<span id="line-1237">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule login</span>
<span id="line-1238"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">login</span></span>
<span id="line-1239">Welcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-72-generic x86_64)</span>
<span id="line-1240"></span>
<span id="line-1241"> * Documentation:  https://help.ubuntu.com</span>
<span id="line-1242"> * Management:     https://landscape.canonical.com</span>
<span id="line-1243"> * Support:        https://ubuntu.com/advantage</span>
<span id="line-1244"></span>
<span id="line-1245">  System information as of Tue May 25 20:56:10 UTC 2021</span>
<span id="line-1246"></span>
<span id="line-1247">  System load:  0.26              Processes:               130</span>
<span id="line-1248">  Usage of /:   7.8% of 38.71GB   Users logged in:         0</span>
<span id="line-1249">  Memory usage: 31%               IPv4 address for enp0s3: 10.0.2.15</span>
<span id="line-1250">  Swap usage:   0%                IPv4 address for enp0s8: 172.28.128.21</span>
<span id="line-1251"></span>
<span id="line-1252"> * Super-optimized for small spaces - read how we shrank the memory</span>
<span id="line-1253">   footprint of MicroK8s to make it the smallest full K8s around.</span>
<span id="line-1254"></span>
<span id="line-1255">   https://ubuntu.com/blog/microk8s-memory-optimisation</span>
<span id="line-1256"></span>
<span id="line-1257"></span>
<span id="line-1258"></span>
<span id="line-1259"></span>
<span id="line-1260">*** System restart required ***</span>
<span id="line-1261">Last login: Tue May 25 20:54:44 2021 from 10.0.2.2</span>
<span id="line-1262"></span>
<span id="line-1263">]0;vagrant@ubuntu-20: ~vagrant@ubuntu-20:~$ sudo /i*i-i</span>
<span id="line-1264">]0;root@ubuntu-20: ~root@ubuntu-20:~# ls /etc/apache2/sites-available/- /etc/apache2/sites-available/a /etc/apache2/sites-available/l /etc/apache2/sites-available/h /etc/apache2/sites-available/ /etc/apache2/sites-available/</span>
<span id="line-1265">ls-alh: command not found</span>
<span id="line-1266">]0;root@ubuntu-20: ~root@ubuntu-20:~# ls-alh  /etc/apache2/sites-available/[1@ </span>
<span id="line-1267">total 24K</span>
<span id="line-1268">drwxr-xr-x 2 root root 4.0K May 25 18:57 <span style="font-weight: bold; color: #0000aa">.</span></span>
<span id="line-1269">drwxr-xr-x 8 root root 4.0K May 20 21:19 <span style="font-weight: bold; color: #0000aa">..</span></span>
<span id="line-1270">-rw-r--r-- 1 root root 1.4K Apr 13  2020 000-default.conf</span>
<span id="line-1271">-rw-r--r-- 1 root root 6.2K Apr 13  2020 default-ssl.conf</span>
<span id="line-1272">-rwxr-xr-x 1 root root  320 May 25 18:57 <span style="font-weight: bold; color: #00aa00">leantime.conf</span></span>
<span id="line-1273">]0;root@ubuntu-20: ~root@ubuntu-20:~# rm leals -alh  /etc/apache2/sites-available/[1@r[1@mleantime.conf </span>
<span id="line-1274">]0;root@ubuntu-20: ~root@ubuntu-20:~# rm  /etc/apache2/sites-available/leantime.conf </span>
<span id="line-1275">ls -alh  /etc/apache2/sites-available/</span>
<span id="line-1276"></span>
<span id="line-1277">[1@ /////////e/n/abled/</span>
<span id="line-1278">total 8.0K</span>
<span id="line-1279">drwxr-xr-x 2 root root 4.0K May 25 20:49 <span style="font-weight: bold; color: #0000aa">.</span></span>
<span id="line-1280">drwxr-xr-x 8 root root 4.0K May 20 21:19 <span style="font-weight: bold; color: #0000aa">..</span></span>
<span id="line-1281">lrwxrwxrwx 1 root root   35 May 20 21:19 <span style="font-weight: bold; color: #00aaaa">000-default.conf</span> -&gt; ../sites-available/000-default.conf</span>
<span id="line-1282">lrwxrwxrwx 1 root root   42 May 25 20:49 <span style="font-weight: bold; color: #aa0000; background-color: #000316">leantime.conf</span> -&gt; <span style="font-weight: bold; color: #aa0000; background-color: #000316">/etc/apache2/sites-available/leantime.conf</span></span>
<span id="line-1283">]0;root@ubuntu-20: ~root@ubuntu-20:~# ls -alh  /etc/apache2/sites-enabled/[1@r[1@mleantime.conf </span>
<span id="line-1284">]0;root@ubuntu-20: ~root@ubuntu-20:~# exit</span>
<span id="line-1285">logout</span>
<span id="line-1286">]0;vagrant@ubuntu-20: ~vagrant@ubuntu-20:~$ exit</span>
<span id="line-1287">logout</span>
<span id="line-1288">Connection to 127.0.0.1 closed.</span>
<span id="line-1289"></span>
<span id="line-1290">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/tasks.yml </span>
<span id="line-1291">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 168 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                                tasks/tasks.yml                                                             </span></span>
<span id="line-1292"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-1293"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-1294">---- name: Atualiza a cache (equivalente a apt update)apt:update_cache: truecache_valid_time: 3600- name: "Atualiza o sistema operativo"apt:upgrade: safe- name: "Instalar as dependencias necess√°ria ao programa leantime"apt:pkg:- mc- screen- git- apache2- mysql-server- php- php-mysql- php-ldap- php-cli- php-soap- php-json- graphviz- php-xml- php-gd- php-zip- libapache2-mod-php- php-dev- libmcrypt-dev- gcc- make- autoconf- libc-dev</span>
<span id="line-1295">[?12l[?25h[?25l - autoconf    - libc-dev  - pkg-config- pwgen- curl- unzip    - zip  - php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurl</span>
<span id="line-1296"><span style="color: #00aaaa">   # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</span>- name: "Instala o servi√ßo apache2 no arranque do sistema"service:name: apache2state: startedenabled: true</span>
<span id="line-1297"><span style="color: #00aaaa">   # Fonte: https://www.mydailytutorials.com/using-ansible-find-module-search-filesfolder</span>- name: "Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurse: trueregister: caminho_php_ini</span>
<span id="line-1298"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</span>- name: "Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"</span>
<span id="line-1299">[?12l[?25h[?25lregexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:regexp: "^file_uploads"  line: "file_uploads = 1"regexp: "^upload_max_filesize"  line: "upload_max_filesize = 1G"regexp: "^max_file_uploads"  line: "max_file_uploads = 20"regexp: "^post_max_size"  line: "post_max_size = 2G"regexp: "^memory_limit"  line: "memory_limit = 2G"- regexp: "^max_input_time" line: "max_input_time = 3600"</span>
<span id="line-1300"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/2.7/modules/file_module.html</span>- name: Cria a directoria tempor√°ria leantime e a directoria de apache leantimefile:path: "{{ item.path }}"state: directory mode: 0755    owner: www-data  group: www-datawith_items:- path: "/tmp/leantime"- path: "/var/www/leantime"</span>
<span id="line-1301"><span style="color: #00aaaa">   # Fonte: Ansible for DevOps - Server and configuration management for humans de Jeff Geerling, p√°gina 98</span>
<span id="line-1302"></span>   - name: "Cria a base de dados de mysql para o leantime"  mysql_db: "db=leantime_database state=present"</span>
<span id="line-1303">- name: "Cria o utilizador para a base de dados leantime"mysql_user:namlogin_leantime }}"</span>
<span id="line-1304">[?12l[?25h[?25lmysql_user:namlogin_leantime }}"  password: "{{ password_leantime }}"priv: "leantime_database.*:ALL"host: localhoststate: present</span>
<span id="line-1305">- name: "Faz o download do software leantime a partir do reposit√≥rio git"get_url:url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipdest: /tmp/leantimemode: 0755</span>
<span id="line-1306"><span style="color: #00aaaa">   # O ficheiro Leantime-versao.zip necessita de ser descomprimido</span>- name: Descomprime o software leantimeunarchive: src: "/tmp/leantime/Leantime-{{ versao_leantime }}.zip"    dest: "/var/www/leantime"  owner: www-datagroup: www-datamode: 0755remote_src: true</span>
<span id="line-1307"><span style="color: #00aaaa">   # Ap√≥s a descompress√£o, se o ficheiro configuration.php n√£o existir, este necessita de ser</span>
<span id="line-1308">   # criado a partir do ficheiro configuration.sample.php</span>
<span id="line-1309">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html</span>- name: Copia o ficheiro de configura√ß√£o configuration.sample.phpansible.builtin.copy: src: /var/www/leantime/config/configuration.sample.php    dest: /var/www/leantime/config/configuration.php  owner: www-datagroup: www-data    mode: '0755'  remote_src: trueforce: false</span>
<span id="line-1310">[?12l[?25h[?25l  remote_src: trueforce: false</span>
<span id="line-1311"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.ansible.builtin.replace:path: /var/www/leantime/config/configuration.php    regexp: "{{ item.regexp  }}"  replace: "{{ item.line }}"with_items:- regexp: 'dbUser=""'  line: 'dbUser="{{ login_leantime }}"'- regexp: 'dbDatabase=""' line: 'dbDatabase="leantime_database"'    - regexp: 'dbPassword=""'    line: 'dbPassword="{{ password_leantime }}"'</span>
<span id="line-1312"><span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html</span>- name: Copia o template do site para a p√°sta /etc/apache2/sites-availableansible.builtin.template:src: leantime.template.j2dest: /etc/apache2/sites-available/leantime.confowner: root group: www-data mode: 0755force: false<span style="color: #00aaaa">file</span>"Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"fileetc/apache2/sites-available/leantime.confetc/apache2/sites-enabled/leantime.confrootroot</span>
<span id="line-1313">[?12l[?25h[?25lgroup: rootmode: '0755'state: link</span>
<span id="line-1314">[?12l[?25h[?25l78Mowner: root</span>
<span id="line-1315">[?12l[?25h[?25l78Mdest: /etc/apache2/sites-enabled/leantime.conf</span>
<span id="line-1316">[?12l[?25h[?25l78Msrc: /etc/apache2/sites-available/leantime.conf</span>
<span id="line-1317">[?12l[?25h[?25l78Mansible.builtin.file:</span>
<span id="line-1318">[?12l[?25h[?25l78M- name: "Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled"</span>
<span id="line-1319">[?12l[?25h[?25l78M<span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/file_module.html</span>
<span id="line-1320"></span>[?12l[?25h[?25l78M[?12l[?25h[?25l78Mforce: false</span>
<span id="line-1321">[?12l[?25h[?25l78Mmode: 0755</span>
<span id="line-1322">[?12l[?25h[?25l78Mgroup: www-data</span>
<span id="line-1323">[?12l[?25h[?25l78Mowner: root</span>
<span id="line-1324">[?12l[?25h[?25l78Mdest: /etc/apache2/sites-available/leantime.conf</span>
<span id="line-1325">[?12l[?25h[?25l78Msrc: leantime.template.j2</span>
<span id="line-1326">[?12l[?25h[?25l78Mansible.builtin.template:</span>
<span id="line-1327">[?12l[?25h[?25l78M- name: Copia o template do site para a p√°sta /etc/apache2/sites-available</span>
<span id="line-1328">[?12l[?25h[?25l78M<span style="color: #00aaaa">   # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_module.html</span>
<span id="line-1329"></span>[?12l[?25h[?25l78M[?12l[?25h[?25l78Mline: 'dbPassword="{{ password_leantime }}"'</span>
<span id="line-1330">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span>'[?12l[?25h[?25l'[?12l[?25h[?25l77'[?12l[?25h[?25l777'[?12l[?25h[?25l         <span style="background-color: #AAAAAA; color: #000000">M-D</span> Formato DOS<span style="background-color: #AAAAAA; color: #000000">M-A</span> Anexar<span style="background-color: #AAAAAA; color: #000000">B</span> Seguran√ßa<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">M-M</span> Formato Mac<span style="background-color: #AAAAAA; color: #000000">M-P</span> Prepor<span style="background-color: #AAAAAA; color: #000000">^T</span> P/ ficheiros</span>
<span id="line-1331"><span style="background-color: #AAAAAA; color: #000000">Nome do ficheiro onde escrever: tasks/tasks.yml                                                                                           </span>[?12l[?25h[?25l <span style="background-color: #AAAAAA; color: #000000">[ A escrever... ]</span><span style="background-color: #AAAAAA; color: #000000">          </span><span style="background-color: #AAAAAA; color: #000000">[ 168 linhas escritas ]</span><span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar      <span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor<span style="background-color: #AAAAAA; color: #000000">U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt<span style="background-color: #AAAAAA; color: #000000">X</span> Sair    <span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer      <span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-1332">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25ls[?12l[?25h[?25l</span>
<span id="line-1333">[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span>
<span id="line-1334"></span> [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25lw[?12l[?25h[?25lw[?12l[?25h[?25lw[?12l[?25h[?25l-[?12l[?25h[?25ld[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25la[?12l[?25h[?25l         <span style="background-color: #AAAAAA; color: #000000">M-D</span> Formato DOS<span style="background-color: #AAAAAA; color: #000000">M-A</span> Anexar<span style="background-color: #AAAAAA; color: #000000">B</span> Seguran√ßa<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">M-M</span> Formato Mac<span style="background-color: #AAAAAA; color: #000000">M-P</span> Prepor<span style="background-color: #AAAAAA; color: #000000">^T</span> P/ ficheiros</span>
<span id="line-1335"><span style="background-color: #AAAAAA; color: #000000">Nome do ficheiro onde escrever: tasks/tasks.yml                                                                                           </span>[?12l[?25h[?25l <span style="background-color: #AAAAAA; color: #000000">[ A escrever... ]</span><span style="background-color: #AAAAAA; color: #000000">          </span><span style="background-color: #AAAAAA; color: #000000">[ 168 linhas escritas ]</span><span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar      <span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor<span style="background-color: #AAAAAA; color: #000000">U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt<span style="background-color: #AAAAAA; color: #000000">X</span> Sair    <span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer      <span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-1336">[?12l[?25h[?25l</span>
<span id="line-1337">[?12l[?25h[?1049l</span>
<span id="line-1338">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano tasks/tasks.yml molecule loginconvergeverify</span>
<span id="line-1339"><span style="color: #0000aa">INFO    </span> default scenario test matrix: verify</span>
<span id="line-1340"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-1341"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-1342"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-1343"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">verify</span></span>
<span id="line-1344"><span style="color: #0000aa">INFO    </span> Running Ansible Verifier</span>
<span id="line-1345"></span>
<span id="line-1346">PLAY [Infraestrutura conduzida por testes] ***********************************************************************************************</span>
<span id="line-1347"></span>
<span id="line-1348">TASK [Vari√°veis] *************************************************************************************************************************</span>
<span id="line-1349"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1350"></span>
<span id="line-1351">TASK [Simula√ß√£o: Atualizar a cache do sistema] *******************************************************************************************</span>
<span id="line-1352"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1353"></span>
<span id="line-1354">TASK [teste: a cache encontra-se actualizada?] *******************************************************************************************</span>
<span id="line-1355"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1356"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1357"><span style="color: #00aa00">    "msg": "SUCESSO: A cache est√° atualizada"</span></span>
<span id="line-1358"><span style="color: #00aa00">}</span></span>
<span id="line-1359"></span>
<span id="line-1360">TASK [Atualizar o sistema operativo (equivalente a apt upgrade)] *************************************************************************</span>
<span id="line-1361"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1362"></span>
<span id="line-1363">TASK [teste: o sistema operativo encontra-se atualizado?] ********************************************************************************</span>
<span id="line-1364"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1365"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1366"><span style="color: #00aa00">    "msg": "SUCESSO: O sistema operativo est√° atualizado"</span></span>
<span id="line-1367"><span style="color: #00aa00">}</span></span>
<span id="line-1368"></span>
<span id="line-1369">TASK [Teste: a cache encontra-se atualizada?] ********************************************************************************************</span>
<span id="line-1370"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1371"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1372"><span style="color: #00aa00">    "msg": "SUCESSO: A cache est√° atualizada"</span></span>
<span id="line-1373"><span style="color: #00aa00">}</span></span>
<span id="line-1374"></span>
<span id="line-1375">TASK [Simula√ß√£o: testa se as aplica√ß√µes dependencia do software leantime se encontram instaladas] ****************************************</span>
<span id="line-1376"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1377"></span>
<span id="line-1378">TASK [Teste: as dependencias encontra-se instaladas?] ************************************************************************************</span>
<span id="line-1379"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1380"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1381"><span style="color: #00aa00">    "msg": "SUCESSO: As dependencias estavam instaladas"</span></span>
<span id="line-1382"><span style="color: #00aa00">}</span></span>
<span id="line-1383"></span>
<span id="line-1384">TASK [Simula√ß√£o: Testar se o servi√ßo apache2 se encontra instalado, iniciado e ativo no arranque] ****************************************</span>
<span id="line-1385"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1386"></span>
<span id="line-1387">TASK [Teste: O servi√ßo apache2 encontra-se ativo no arranque no sistema, e est√° iniciado?] ***********************************************</span>
<span id="line-1388"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1389"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1390"><span style="color: #00aa00">    "msg": "SUCESSO: O servi√ßo apache2 est√° correctamente instalado e inicia com o arranque do sistema"</span></span>
<span id="line-1391"><span style="color: #00aa00">}</span></span>
<span id="line-1392"></span>
<span id="line-1393">TASK [Rotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2] ********************************************************</span>
<span id="line-1394"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1395"></span>
<span id="line-1396">TASK [Simula√ß√£o: Ativa a op√ß√£o file_uploads no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ****************************************</span>
<span id="line-1397"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-1398"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-1399"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-1400"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-1401"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-1402"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-1403"></span>
<span id="line-1404">TASK [Teste: As linhas do php.ini encontram-se alteradas ?] ******************************************************************************</span>
<span id="line-1405"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1406"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1407"><span style="color: #00aa00">    "msg": "SUCESSO: O ficheiro php.ini foi alterado com sucesso"</span></span>
<span id="line-1408"><span style="color: #00aa00">}</span></span>
<span id="line-1409"></span>
<span id="line-1410">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre a pastas /var/www/leantime] **********************************************************************</span>
<span id="line-1411"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1412"></span>
<span id="line-1413">TASK [Teste: A pasta /var/www/leantime existe e tem as permiss√µes certas?] ***************************************************************</span>
<span id="line-1414"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1415"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1416"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas no site leantime"</span></span>
<span id="line-1417"><span style="color: #00aa00">}</span></span>
<span id="line-1418"></span>
<span id="line-1419">TASK [Simula√ß√£o: Verifica se √© necess√°rio criar a base de dados leantime_database] *******************************************************</span>
<span id="line-1420"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1421"></span>
<span id="line-1422">TASK [Teste: A base de dados leantime_database existe ?] *********************************************************************************</span>
<span id="line-1423"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1424"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1425"><span style="color: #00aa00">    "msg": "SUCESSO: A base de dados leantime_database j√° se encontra criada"</span></span>
<span id="line-1426"><span style="color: #00aa00">}</span></span>
<span id="line-1427"></span>
<span id="line-1428">TASK [Simula√ß√£o e Teste: Verifica se o endere√ßo git para a vers√£o de leantime existe] ****************************************************</span>
<span id="line-1429"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1430"></span>
<span id="line-1431">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /var/www/leantime/config/configuration.php] *******************************************</span>
<span id="line-1432"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1433"></span>
<span id="line-1434">TASK [Teste: O ficheiro /var/www/leantime/config/configuration.php existe e tem as permiss√µes certas?] ***********************************</span>
<span id="line-1435"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1436"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1437"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas e ficheiro configuration.php existente"</span></span>
<span id="line-1438"><span style="color: #00aa00">}</span></span>
<span id="line-1439"></span>
<span id="line-1440">TASK [Simula√ß√£o: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] ******************************</span>
<span id="line-1441"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1442"></span>
<span id="line-1443">TASK [Teste: O dbUser foi alterado?] *****************************************************************************************************</span>
<span id="line-1444"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1445"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1446"><span style="color: #00aa00">    "msg": "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1447"><span style="color: #00aa00">}</span></span>
<span id="line-1448"></span>
<span id="line-1449">TASK [Simula√ß√£o: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] **************************</span>
<span id="line-1450"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1451"></span>
<span id="line-1452">TASK [Teste: a vari√°vel dbDatabase foi alterada?] ****************************************************************************************</span>
<span id="line-1453"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1454"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1455"><span style="color: #00aa00">    "msg": "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1456"><span style="color: #00aa00">}</span></span>
<span id="line-1457"></span>
<span id="line-1458">TASK [Simula√ß√£o: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] **************************</span>
<span id="line-1459"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1460"></span>
<span id="line-1461">TASK [Teste: O dbPassword foi alterado?] *************************************************************************************************</span>
<span id="line-1462"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1463"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1464"><span style="color: #00aa00">    "msg": "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1465"><span style="color: #00aa00">}</span></span>
<span id="line-1466"></span>
<span id="line-1467">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-available/leantime.conf] *******************************************</span>
<span id="line-1468"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1469"></span>
<span id="line-1470">TASK [Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?] ***********************************</span>
<span id="line-1471"><span style="color: #aa0000">fatal: [ubuntu-20.04]: FAILED! =&gt; {</span></span>
<span id="line-1472"><span style="color: #aa0000">    "assertion": "ficheiro.stat.exists",</span></span>
<span id="line-1473"><span style="color: #aa0000">    "changed": false,</span></span>
<span id="line-1474"><span style="color: #aa0000">    "evaluated_to": false,</span></span>
<span id="line-1475"><span style="color: #aa0000">    "msg": "ERRO: Permiss√µes incorrectas"</span></span>
<span id="line-1476"><span style="color: #aa0000">}</span></span>
<span id="line-1477"></span>
<span id="line-1478">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-1479"><span style="color: #aa0000">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=27  </span> changed=0    unreachable=0    <span style="color: #aa0000">failed=1   </span> skipped=0    rescued=0    ignored=0</span>
<span id="line-1480"></span>
<span id="line-1481"></span>
<span id="line-1482"><span style="font-weight: bold; color: #aa0000">CRITICAL</span> Ansible return code was <span style="font-weight: bold; color: #00aaaa">2</span>, command was: ansible-playbook --inventory <span style="color: #E850A8">/home/admlocal/.cache/molecule/leantime_ansible/default/</span><span style="color: #ff90e8">inventory</span> --skip-tags molecule-notest,notest <span style="color: #E850A8">/home/admlocal/leantime_ansible/molecule/default/</span><span style="color: #ff90e8">verify.yml</span></span>
<span id="line-1483">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule verifyconverge</span>
<span id="line-1484"><span style="color: #0000aa">INFO    </span> default scenario test matrix: dependency, create, prepare, converge</span>
<span id="line-1485"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-1486"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-1487"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-1488"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">dependency</span></span>
<span id="line-1489"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-1490"><span style="color: #aa0000">WARNING </span> Skipping, missing the requirements file.</span>
<span id="line-1491"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">create</span></span>
<span id="line-1492"><span style="color: #aa0000">WARNING </span> Skipping, instances already created.</span>
<span id="line-1493"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">prepare</span></span>
<span id="line-1494"><span style="color: #aa0000">WARNING </span> Skipping, instances already prepared.</span>
<span id="line-1495"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">converge</span></span>
<span id="line-1496"></span>
<span id="line-1497">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-1498"></span>
<span id="line-1499">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-1500"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1501"></span>
<span id="line-1502">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-1503"></span>
<span id="line-1504">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-1505"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1506"></span>
<span id="line-1507">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-1508"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1509"></span>
<span id="line-1510">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-1511"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1512"></span>
<span id="line-1513">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-1514"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1515"></span>
<span id="line-1516">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-1517"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1518"></span>
<span id="line-1519">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-1520"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-1521"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-1522"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-1523"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-1524"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-1525"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-1526"></span>
<span id="line-1527">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-1528"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-1529"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-1530"></span>
<span id="line-1531">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-1532"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1533"></span>
<span id="line-1534">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-1535"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-1536"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1537"></span>
<span id="line-1538">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-1539"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1540"></span>
<span id="line-1541">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-1542"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1543"></span>
<span id="line-1544">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-1545"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1546"></span>
<span id="line-1547">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-1548"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-1549"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-1550"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-1551"></span>
<span id="line-1552">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-1553"><span style="color: #aa5500">changed: [ubuntu-20.04]</span></span>
<span id="line-1554"></span>
<span id="line-1555">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-1556"><span style="color: #aa5500">changed: [ubuntu-20.04]</span></span>
<span id="line-1557"></span>
<span id="line-1558">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-1559"><span style="color: #aa5500">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> <span style="color: #aa5500">changed=2   </span> unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-1560"></span>
<span id="line-1561"></span>
<span id="line-1562">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule convergeidempotence</span>
<span id="line-1563"><span style="color: #0000aa">INFO    </span> default scenario test matrix: idempotence</span>
<span id="line-1564"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-1565"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-1566"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-1567"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">idempotence</span></span>
<span id="line-1568"></span>
<span id="line-1569">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-1570"></span>
<span id="line-1571">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-1572"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1573"></span>
<span id="line-1574">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-1575"></span>
<span id="line-1576">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-1577"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1578"></span>
<span id="line-1579">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-1580"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1581"></span>
<span id="line-1582">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-1583"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1584"></span>
<span id="line-1585">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-1586"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1587"></span>
<span id="line-1588">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-1589"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1590"></span>
<span id="line-1591">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-1592"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-1593"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-1594"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-1595"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-1596"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-1597"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-1598"></span>
<span id="line-1599">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-1600"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-1601"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-1602"></span>
<span id="line-1603">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-1604"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1605"></span>
<span id="line-1606">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-1607"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-1608"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1609"></span>
<span id="line-1610">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-1611"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1612"></span>
<span id="line-1613">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-1614"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1615"></span>
<span id="line-1616">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-1617"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1618"></span>
<span id="line-1619">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-1620"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-1621"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-1622"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-1623"></span>
<span id="line-1624">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-1625"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1626"></span>
<span id="line-1627">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-1628"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1629"></span>
<span id="line-1630">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-1631"><span style="color: #00aa00">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-1632"></span>
<span id="line-1633"></span>
<span id="line-1634"><span style="color: #0000aa">INFO    </span> Idempotence completed successfully.</span>
<span id="line-1635">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule login</span>
<span id="line-1636"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">login</span></span>
<span id="line-1637">Welcome to Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-72-generic x86_64)</span>
<span id="line-1638"></span>
<span id="line-1639"> * Documentation:  https://help.ubuntu.com</span>
<span id="line-1640"> * Management:     https://landscape.canonical.com</span>
<span id="line-1641"> * Support:        https://ubuntu.com/advantage</span>
<span id="line-1642"></span>
<span id="line-1643">  System information as of Tue May 25 21:00:06 UTC 2021</span>
<span id="line-1644"></span>
<span id="line-1645">  System load:  0.31              Processes:               135</span>
<span id="line-1646">  Usage of /:   7.8% of 38.71GB   Users logged in:         0</span>
<span id="line-1647">  Memory usage: 33%               IPv4 address for enp0s3: 10.0.2.15</span>
<span id="line-1648">  Swap usage:   0%                IPv4 address for enp0s8: 172.28.128.21</span>
<span id="line-1649"></span>
<span id="line-1650"> * Super-optimized for small spaces - read how we shrank the memory</span>
<span id="line-1651">   footprint of MicroK8s to make it the smallest full K8s around.</span>
<span id="line-1652"></span>
<span id="line-1653">   https://ubuntu.com/blog/microk8s-memory-optimisation</span>
<span id="line-1654"></span>
<span id="line-1655"></span>
<span id="line-1656"></span>
<span id="line-1657"></span>
<span id="line-1658">*** System restart required ***</span>
<span id="line-1659">Last login: Tue May 25 20:59:59 2021 from 10.0.2.2</span>
<span id="line-1660"></span>
<span id="line-1661">]0;vagrant@ubuntu-20: ~vagrant@ubuntu-20:~$ sudo -i</span>
<span id="line-1662">]0;root@ubuntu-20: ~root@ubuntu-20:~# ls -alh /etc/apache2/sites-available/</span>
<span id="line-1663">total 24K</span>
<span id="line-1664">drwxr-xr-x 2 root root     4.0K May 25 20:59 <span style="font-weight: bold; color: #0000aa">.</span></span>
<span id="line-1665">drwxr-xr-x 8 root root     4.0K May 20 21:19 <span style="font-weight: bold; color: #0000aa">..</span></span>
<span id="line-1666">-rw-r--r-- 1 root root     1.4K Apr 13  2020 000-default.conf</span>
<span id="line-1667">-rw-r--r-- 1 root root     6.2K Apr 13  2020 default-ssl.conf</span>
<span id="line-1668">-rwxrwxrwx 1 root www-data  320 May 25 20:59 <span style="font-weight: bold; color: #00aa00">leantime.conf</span></span>
<span id="line-1669">]0;root@ubuntu-20: ~root@ubuntu-20:~# ls -alh /etc/apache2/sites-available//////////e/n/a/b/l/e/d/</span>
<span id="line-1670">total 8.0K</span>
<span id="line-1671">drwxr-xr-x 2 root root 4.0K May 25 20:59 <span style="font-weight: bold; color: #0000aa">.</span></span>
<span id="line-1672">drwxr-xr-x 8 root root 4.0K May 20 21:19 <span style="font-weight: bold; color: #0000aa">..</span></span>
<span id="line-1673">lrwxrwxrwx 1 root root   35 May 20 21:19 <span style="font-weight: bold; color: #00aaaa">000-default.conf</span> -&gt; ../sites-available/000-default.conf</span>
<span id="line-1674">lrwxrwxrwx 1 root root   42 May 25 20:59 <span style="font-weight: bold; color: #00aaaa">leantime.conf</span> -&gt; <span style="font-weight: bold; color: #00aa00">/etc/apache2/sites-available/leantime.conf</span></span>
<span id="line-1675">]0;root@ubuntu-20: ~root@ubuntu-20:~# stat -c "%a %n" &amp;/etc/&amp;apache2/sites-available/leantime.conf </span>
<span id="line-1676">777 /etc/apache2/sites-available/leantime.conf</span>
<span id="line-1677">]0;root@ubuntu-20: ~root@ubuntu-20:~# stat -c "%a %n" /etc/apache2/sites-available/leantime.conf [1@e[1@n[1@a[1@b[1@l[1@e[1@d</span>
<span id="line-1678">777 /etc/apache2/sites-enabled/leantime.conf</span>
<span id="line-1679">]0;root@ubuntu-20: ~root@ubuntu-20:~# exit</span>
<span id="line-1680">logout</span>
<span id="line-1681">]0;vagrant@ubuntu-20: ~vagrant@ubuntu-20:~$ exit</span>
<span id="line-1682">logout</span>
<span id="line-1683">Connection to 127.0.0.1 closed.</span>
<span id="line-1684"></span>
<span id="line-1685">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano molecule/default/</span>
<span id="line-1686">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="font-weight: bold"></span><span style="font-weight: bold; color: #F5F1DE"></span><span style="font-weight: bold; color: #F5F1DE; background-color: #aa0000">[ "molecule/default/" √© uma pasta ]</span><span style="font-weight: bold"></span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                                  Novo buffer                                                               </span></span>
<span id="line-1687"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-1688"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-1689">[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span></span>
<span id="line-1690">v[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Gravar buffer modificado?                                                                                                                  S</span> Sim</span>
<span id="line-1691"><span style="background-color: #AAAAAA; color: #000000"> N</span> N√£o <span style="background-color: #AAAAAA; color: #000000">^C</span> Cancelar[?12l[?25h[?25l[?12l[?25h[?25l</span>
<span id="line-1692">[?12l[?25h[?1049l</span>
<span id="line-1693">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano molecule/default/verify.yml </span>
<span id="line-1694">[?2004h[?1049h[?7h[?1h=[?1h=[?25l<span style="background-color: #AAAAAA; color: #000000">[ A ler... ]</span><span style="background-color: #AAAAAA; color: #000000">[ 302 linhas lidas ]</span><span style="background-color: #AAAAAA; color: #000000">  GNU nano 4.8                                          molecule/default/verify.yml                                                       </span></span>
<span id="line-1695"><span style="background-color: #AAAAAA; color: #000000">^G</span> Ajuda<span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar<span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor    <span style="background-color: #AAAAAA; color: #000000">M-U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt</span>
<span id="line-1696"><span style="background-color: #AAAAAA; color: #000000">^X</span> Sair<span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer<span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-1697">---</span>
<span id="line-1698"><span style="color: #00aaaa"># Tutorial de inspira√ß√£o para a infraestrutura conduzida por teste no site</span>
<span id="line-1699"># https://www.adictosaltrabajo.com/2020/05/08/ansible-testing-using-molecule-with-ansible-as-verifier/</span>
<span id="line-1700"></span>- name: "Infraestrutura conduzida por testes"hosts: allgather_facts: falsebecome: truetasks:- name: Vari√°veisinclude_vars:file: ../../vars/main.yml- name: "Simula√ß√£o: Atualizar a cache do sistema"apt:update_cache: truecache_valid_time: 3600check_mode: trueregister: estado- name: "teste: a cache encontra-se actualizada?"assert:that:- not estado.changedsuccess_msg: "SUCESSO: A cache est√° atualizada"fail_msg: "ERRO: Existem actualiza√ß√µes pendentes"- name: "Atualizar o sistema operativo (equivalente a apt upgrade)"apt:upgrade: safecheck_mode: trueregister: estado- name: "teste: o sistema operativo encontra-se atualizado?"</span>
<span id="line-1701">[?12l[?25h[?25l  - name: "teste: o sistema operativo encontra-se atualizado?"</span>
<span id="line-1702">    assert:that: - not estado.changed    success_msg: "SUCESSO: O sistema operativo est√° atualizado"    fail_msg: "ERRO: Existem actualiza√ß√µes pendentes"</span>
<span id="line-1703">  - name: "Teste: a cache encontra-se atualizada?"  assert:    that:  - not estado.changedsuccess_msg: "SUCESSO: A cache est√° atualizada"fail_msg: "ERRO: Existem atualiza√ß√µes pendentes"</span>
<span id="line-1704">  - name: "Simula√ß√£o: testa se as aplica√ß√µes dependencia do software leantime se encontram instaladas"apt:pkg:  - mc  - screen- git    - apache2  - mysql-server- phpphp-mysql- php-ldap- php-cli- php-soap    - php-json  - graphviz- php-xml  - php-gd  - php-zip- libapache2-mod-php    - php-dev</span>
<span id="line-1705">[?12l[?25h[?25l- libapache2-mod-php    - php-dev  - libmcrypt-dev- gccmake- autoconf- libc-dev- pkg-config    - pwgen  - curl- unzipzip- php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurlcheck_mode: trueregister: estado</span>
<span id="line-1706">  - name: "Teste: as dependencias encontra-se instaladas?"assert:that:not estado.changedsuccess_msg: "SUCESSO: As dependencias estavam instaladas"fail_msg: "ERRO: Faltam instalar algumas dependencias. O software pode estar parcialmente instalado"</span>
<span id="line-1707"><span style="color: #00aaaa">  # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</span>- name: "Simula√ß√£o: Testar se o servi√ßo apache2 se encontra instalado, iniciado e ativo no arranque"service:name: apache2state: startedenabled: truecheck_mode: true</span>
<span id="line-1708">[?12l[?25h[?25lenabled: trueO servi√ßo apache2 encontra-se ativo no arranque no sistema, e est√° iniciado?"O servi√ßo apache2 est√° correctamente instalado e inicia com o arranque do sistema"O servi√ßo apache2 n√£o se encontra correcta<span style="color: #00aaaa">: https://www.mydailytutorials.com/using--find-module-search-filesfolder</span>Rotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurseregister: caminho_php_ini</span>
<span id="line-1709"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</span>- name: "Simula√ß√£o: Ativa a op√ß√£o file_uploads no ficheiro php.ini, utilizando o m√≥dulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:- regexp: "^file_uploads"line: "file_uploads = 1"- regexp: "^upload_max_filesize"line: "upload_max_filesize = 1G"- regexp: "^max_file_uploads"line: "max_file_uploads = 20"- regexp: "^post_max_size"line: "post_max_size = 2G"- regexp: "^memory_limit"</span>
<span id="line-1710">[?12l[?25h[?25l78line: "post_max_size = 2G"- regexp: "^memory_limit"line: "memory_limit = 2G"- regexp: "^max_input_time"  line: "max_input_time = 3600"As linhas do php.ini encontram-se alteradas ?"ficheiro php.ini foi alterado com sucesso"Algumas altera√ß√µes ao ficheiro php.ini n√£o tiveram sucesso"<span style="color: #00aaaa">O site deve existir na pasta /var/www/leantime. Este teste visa determinar se a pasta</span>
<span id="line-1711">  # existe e se temas permiss√µes certas</span>
<span id="line-1712">  # Fonte de inspira√ß√£o: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre a pastas /var/www/leantime"</span>
<span id="line-1713">    stat:    path: "/var/www/leantime"register: pasta</span>
<span id="line-1714">  - name: "Teste: A pasta /var/www/leantime existe e tem as permiss√µes certas?"assert:  that:  - pasta.stat.exists- pasta.stat.isdir  - pasta.stat.mode == "0755"- pasta.stat.pw_name == "www-data"  - pasta.stat.gr_name == "www-data"success_msg: "SUCESSO: Permiss√µes correctas no site leantime"fail_msg: "ERRO: Permiss√µes incorrectas no site leantime ou site n√£o existente"</span>
<span id="line-1715"><span style="color: #00aaaa">  # Outro dos requesitos √© a exist√™ncia de uma base de dados para o site.</span>
<span id="line-1716"></span>[?12l[?25h[?25l<span style="color: #00aaaa">  # Outro dos requesitos √© a exist√™ncia de uma base de dados para o site.</span>
<span id="line-1717">  # Esta base de dados deve ser criada, logo tem de ser testada para determinar se ela existe ou n√£o.</span>
<span id="line-1718">  # Fonte de inspira√ß√£o: https://serverfault.com/questions/173978/from-a-shell-script-how-can-i-check-whether-a-mysql-database-exists</span>- name: "Simula√ß√£o: Verifica se √© necess√°rio criar a base de dados leantime_database"shell: "mysql -u root -e 'use leantime_database'"resultfailed_when: false  changed_when: false</span>
<span id="line-1719">  - name: "Teste: A base de dados leantime_database existe ?"assert:that:- result.rc == 0success_msg: "SUCESSO: A base de dados leantime_database j√° se encontra criada"fail_msg: "ERRO: N√£o existe a base de dados leantime_database"</span>
<span id="line-1720"><span style="color: #00aaaa">  # Teste: O download do software leantime deve ser poss√≠vel, a partir do site do leantime</span>- name: "Simula√ß√£o e Teste: Verifica se o endere√ßo git para a vers√£o de leantime existe"uri:url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipregister: resultado<span style="color: #00aaaa">Teste: Do ficheiro configuration.php no site do leantime. A exist√™ncia deste ficheiro       com as permiss√µes certas indica que o processo de unzip correu bemDocumenta√ß√£o oficial em: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>o ficheiro /var/www/leantime/config/configuration.php"/config/configuration.php"ficheiroO ficheiro /var/www/leantime/config/configuration.php existe e tem as permiss√µes certas?"ficheiro.stat.exists</span>
<span id="line-1721">[?12l[?25h[?25lthat: - ficheiro.stat.exists - ficheiro.stat.isreg - ficheiro.stat.mode == "0755" - ficheiro.stat.pw_name == "www-data"    - ficheiro.stat.gr_name == "www-data"  success_msg: "SUCESSO: Permiss√µes correctas e ficheiro configuration.php existente"  fail_msg: "ERRO: Permiss√µes incorrectas ou ficheiro configuration.php n√£o existente"</span>
<span id="line-1722"><span style="color: #00aaaa">  # Teste: O ficheiro /var/www/leantime/config/configuration.php necessita de ser alterado.</span>
<span id="line-1723">  # As vari√°veis dbuser, dbDatabase, e dbPassword necessitam de estar configuradas.</span>
<span id="line-1724">  # Por simula√ß√£o o sistema vai determinar se estas est√£o configuradas com o valor esperado.</span>
<span id="line-1725">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:path: /var/www/leantime/config/configuration.phpregexp: 'dbUser=""' replace: 'dbUser="{{ login_leantime }}"'  check_mode: yesregister: conffailed_when: false</span>
<span id="line-1726">  - name: "Teste: O dbUser foi alterado?"</span>
<span id="line-1727">    assert: that: - conf is not changed    - conf is not failed  success_msg: "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"fail_msg: "ERRO: O dbUser n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1728"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:path: /var/www/leantime/config/configuration.php</span>
<span id="line-1729">[?12l[?25h[?25l    ansible.builtin.replace:path: /var/www/leantime/config/configuration.phpregexp: 'dbDatabase=""'replace: 'dbDatabase="leantime_database"'check_mode: yesregister: conffailed_when: false</span>
<span id="line-1730">  - name: "Teste: a vari√°vel dbDatabase foi alterada?"</span>
<span id="line-1731">    assert: that: - conf is not changed - conf is not failed    success_msg: "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"  fail_msg: "ERRO: O dbDatabase n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1732"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</span>- name: "Simula√ß√£o: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace."ansible.builtin.replace:  path: /var/www/leantime/config/configuration.php  regexp: 'dbPassword=""'replace: 'dbPassword="{{ password_leantime }}"'  check_mode: yesregister: conffailed_when: false</span>
<span id="line-1733">  - name: "Teste: O dbPassword foi alterado?"assert:that:- conf is not changed- conf is not failed success_msg: "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"    fail_msg: "ERRO: O dbPassword n√£o foi alterado no ficheiro configuration.php"</span>
<span id="line-1734"><span style="color: #00aaaa">  # A configura√ß√£o do site leantime necessita que seja criado um site atrav√©s de um ficheiro de</span>
<span id="line-1735"></span>[?12l[?25h[?25l<span style="color: #00aaaa">  # A configura√ß√£o do site leantime necessita que seja criado um site atrav√©s de um ficheiro de</span>
<span id="line-1736">  # configura√ß√£o, dentro das pasta do apache2. Deve existir um ficheiro de configura√ß√£o do</span>
<span id="line-1737">  # leantime em (/etc/apache2/sites-available</span></span>
<span id="line-1738"><span style="color: #00aaaa">  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-available/leantime.conf"stat:path: "/etc/apache2/sites-available/leantime.conf"  register: ficheiro</span>
<span id="line-1739">  - name: "Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?"assert:that:  - ficheiro.stat.exists  - ficheiro.stat.isreg- ficheiro.stat.mode == "0755" - ficheiro.stat.pw_name == "root" - ficheiro.stat.gr_name == "www-data"  success_msg: "SUCESSO: Permiss√µes correctas"fail_msg: "ERRO: Permiss√µes incorrectas"</span>
<span id="line-1740"><span style="color: #00aaaa">  # O site deve estar ativo no apache. Este teste vai verificar se o site se encontra ativo</span>
<span id="line-1741">  # https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-enabled/leantime.conf"stat:path: "/etc/apache2/sites-enabled/leantime.conf"  register: ficheiro</span>
<span id="line-1742">  - name: "Teste: O ficheiro /etc/apache2/sites-enabled/leantime.conf existe e tem as permiss√µes certas?"assert:that:  - ficheiro.stat.exists  - ficheiro.stat.islnk- ficheiro.stat.mode == "0777" - ficheiro.stat.pw_name == "root"</span>
<span id="line-1743">[?12l[?25h[?25l77root"</span>
<span id="line-1744">[?12l[?25h[?25l78M- ficheiro.stat.islnk</span>
<span id="line-1745">[?12l[?25h[?25l78M- ficheiro.stat.exists</span>
<span id="line-1746">[?12l[?25h[?25l78Mthat:</span>
<span id="line-1747">[?12l[?25h[?25l78Massert:</span>
<span id="line-1748">[?12l[?25h[?25l78M- name: "Teste: O ficheiro /etc/apache2/sites-enabled/leantime.conf existe e tem as permiss√µes certas?"</span>
<span id="line-1749">[?12l[?25h[?25l78M[?12l[?25h[?25l78Mregister: ficheiro</span>
<span id="line-1750">[?12l[?25h[?25l78Mpath: "/etc/apache2/sites-enabled/leantime.conf"</span>
<span id="line-1751">[?12l[?25h[?25l78Mstat:</span>
<span id="line-1752">[?12l[?25h[?25l78M- name: "Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-enabled/leantime.conf"</span>
<span id="line-1753">[?12l[?25h[?25l78M<span style="color: #00aaaa">  # https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</span>
<span id="line-1754"></span>[?12l[?25h[?25l78M<span style="color: #00aaaa">  # O site deve estar ativo no apache. Este teste vai verificar se o site se encontra ativo</span>
<span id="line-1755"></span>[?12l[?25h[?25l78M[?12l[?25h[?25l78Mfail_msg: "ERRO: Permiss√µes incorrectas"</span>
<span id="line-1756">[?12l[?25h[?25l78Msuccess_msg: "SUCESSO: Permiss√µes correctas"</span>
<span id="line-1757">[?12l[?25h[?25l78M- ficheiro.stat.gr_name == "www-data"</span>
<span id="line-1758">[?12l[?25h[?25l78M- ficheiro.stat.pw_name == "root"</span>
<span id="line-1759">[?12l[?25h[?25l78M- ficheiro.stat.mode == "0755"</span>
<span id="line-1760">[?12l[?25h[?25l78M- ficheiro.stat.isreg</span>
<span id="line-1761">[?12l[?25h[?25l78M- ficheiro.stat.exists</span>
<span id="line-1762">[?12l[?25h[?25l78Mthat:</span>
<span id="line-1763">[?12l[?25h[?25l78Massert:</span>
<span id="line-1764">[?12l[?25h[?25l78M- name: "Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?"</span>
<span id="line-1765">[?12l[?25h[?25l78M[?12l[?25h[?25l78Mregister: ficheiro</span>
<span id="line-1766">[?12l[?25h[?25l78Mpath: "/etc/apache2/sites-available/leantime.conf"</span>
<span id="line-1767">[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l<span style="background-color: #AAAAAA; color: #000000">Modificado</span>"[?12l[?25h[?25l"[?12l[?25h[?25l77"[?12l[?25h[?25l777"[?12l[?25h[?25l         <span style="background-color: #AAAAAA; color: #000000">M-D</span> Formato DOS<span style="background-color: #AAAAAA; color: #000000">M-A</span> Anexar<span style="background-color: #AAAAAA; color: #000000">B</span> Seguran√ßa<span style="background-color: #AAAAAA; color: #000000">C</span> Cancelar           <span style="background-color: #AAAAAA; color: #000000">M-M</span> Formato Mac<span style="background-color: #AAAAAA; color: #000000">M-P</span> Prepor<span style="background-color: #AAAAAA; color: #000000">^T</span> P/ ficheiros</span>
<span id="line-1768"><span style="background-color: #AAAAAA; color: #000000">Nome do ficheiro onde escrever: molecule/default/verify.yml                                                                               </span>[?12l[?25h[?25l <span style="background-color: #AAAAAA; color: #000000">[ A escrever... ]</span><span style="background-color: #AAAAAA; color: #000000">          </span><span style="background-color: #AAAAAA; color: #000000">[ 302 linhas escritas ]</span><span style="background-color: #AAAAAA; color: #000000">^O</span> Gravar<span style="background-color: #AAAAAA; color: #000000">^W</span> Procurar      <span style="background-color: #AAAAAA; color: #000000">^K</span> Cortar txt    <span style="background-color: #AAAAAA; color: #000000">^J</span> Justificar    <span style="background-color: #AAAAAA; color: #000000">^C</span> Pos cursor<span style="background-color: #AAAAAA; color: #000000">U</span> Desfazer     <span style="background-color: #AAAAAA; color: #000000">M-A</span> Marcar txt<span style="background-color: #AAAAAA; color: #000000">X</span> Sair    <span style="background-color: #AAAAAA; color: #000000">^R</span> Carregar<span style="background-color: #AAAAAA; color: #000000">^\</span> Substituir    <span style="background-color: #AAAAAA; color: #000000">^U</span> Colar txt     <span style="background-color: #AAAAAA; color: #000000">^T</span> Ortografia    <span style="background-color: #AAAAAA; color: #000000">^_</span> Ir p/ linha   <span style="background-color: #AAAAAA; color: #000000">M-E</span> Refazer      <span style="background-color: #AAAAAA; color: #000000">M-6</span> Copiar txt</span>
<span id="line-1769">[?12l[?25h[?25l</span>
<span id="line-1770">[?12l[?25h[?1049l</span>
<span id="line-1771">[?1l&gt;[?2004l]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ nano molecule/default/verify.yml molecule loginverify</span>
<span id="line-1772"><span style="color: #0000aa">INFO    </span> default scenario test matrix: verify</span>
<span id="line-1773"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-1774"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-1775"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-1776"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">verify</span></span>
<span id="line-1777"><span style="color: #0000aa">INFO    </span> Running Ansible Verifier</span>
<span id="line-1778"></span>
<span id="line-1779">PLAY [Infraestrutura conduzida por testes] ***********************************************************************************************</span>
<span id="line-1780"></span>
<span id="line-1781">TASK [Vari√°veis] *************************************************************************************************************************</span>
<span id="line-1782"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1783"></span>
<span id="line-1784">TASK [Simula√ß√£o: Atualizar a cache do sistema] *******************************************************************************************</span>
<span id="line-1785"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1786"></span>
<span id="line-1787">TASK [teste: a cache encontra-se actualizada?] *******************************************************************************************</span>
<span id="line-1788"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1789"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1790"><span style="color: #00aa00">    "msg": "SUCESSO: A cache est√° atualizada"</span></span>
<span id="line-1791"><span style="color: #00aa00">}</span></span>
<span id="line-1792"></span>
<span id="line-1793">TASK [Atualizar o sistema operativo (equivalente a apt upgrade)] *************************************************************************</span>
<span id="line-1794"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1795"></span>
<span id="line-1796">TASK [teste: o sistema operativo encontra-se atualizado?] ********************************************************************************</span>
<span id="line-1797"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1798"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1799"><span style="color: #00aa00">    "msg": "SUCESSO: O sistema operativo est√° atualizado"</span></span>
<span id="line-1800"><span style="color: #00aa00">}</span></span>
<span id="line-1801"></span>
<span id="line-1802">TASK [Teste: a cache encontra-se atualizada?] ********************************************************************************************</span>
<span id="line-1803"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1804"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1805"><span style="color: #00aa00">    "msg": "SUCESSO: A cache est√° atualizada"</span></span>
<span id="line-1806"><span style="color: #00aa00">}</span></span>
<span id="line-1807"></span>
<span id="line-1808">TASK [Simula√ß√£o: testa se as aplica√ß√µes dependencia do software leantime se encontram instaladas] ****************************************</span>
<span id="line-1809"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1810"></span>
<span id="line-1811">TASK [Teste: as dependencias encontra-se instaladas?] ************************************************************************************</span>
<span id="line-1812"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1813"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1814"><span style="color: #00aa00">    "msg": "SUCESSO: As dependencias estavam instaladas"</span></span>
<span id="line-1815"><span style="color: #00aa00">}</span></span>
<span id="line-1816"></span>
<span id="line-1817">TASK [Simula√ß√£o: Testar se o servi√ßo apache2 se encontra instalado, iniciado e ativo no arranque] ****************************************</span>
<span id="line-1818"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1819"></span>
<span id="line-1820">TASK [Teste: O servi√ßo apache2 encontra-se ativo no arranque no sistema, e est√° iniciado?] ***********************************************</span>
<span id="line-1821"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1822"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1823"><span style="color: #00aa00">    "msg": "SUCESSO: O servi√ßo apache2 est√° correctamente instalado e inicia com o arranque do sistema"</span></span>
<span id="line-1824"><span style="color: #00aa00">}</span></span>
<span id="line-1825"></span>
<span id="line-1826">TASK [Rotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2] ********************************************************</span>
<span id="line-1827"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1828"></span>
<span id="line-1829">TASK [Simula√ß√£o: Ativa a op√ß√£o file_uploads no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ****************************************</span>
<span id="line-1830"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-1831"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-1832"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-1833"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-1834"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-1835"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-1836"></span>
<span id="line-1837">TASK [Teste: As linhas do php.ini encontram-se alteradas ?] ******************************************************************************</span>
<span id="line-1838"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1839"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1840"><span style="color: #00aa00">    "msg": "SUCESSO: O ficheiro php.ini foi alterado com sucesso"</span></span>
<span id="line-1841"><span style="color: #00aa00">}</span></span>
<span id="line-1842"></span>
<span id="line-1843">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre a pastas /var/www/leantime] **********************************************************************</span>
<span id="line-1844"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1845"></span>
<span id="line-1846">TASK [Teste: A pasta /var/www/leantime existe e tem as permiss√µes certas?] ***************************************************************</span>
<span id="line-1847"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1848"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1849"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas no site leantime"</span></span>
<span id="line-1850"><span style="color: #00aa00">}</span></span>
<span id="line-1851"></span>
<span id="line-1852">TASK [Simula√ß√£o: Verifica se √© necess√°rio criar a base de dados leantime_database] *******************************************************</span>
<span id="line-1853"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1854"></span>
<span id="line-1855">TASK [Teste: A base de dados leantime_database existe ?] *********************************************************************************</span>
<span id="line-1856"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1857"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1858"><span style="color: #00aa00">    "msg": "SUCESSO: A base de dados leantime_database j√° se encontra criada"</span></span>
<span id="line-1859"><span style="color: #00aa00">}</span></span>
<span id="line-1860"></span>
<span id="line-1861">TASK [Simula√ß√£o e Teste: Verifica se o endere√ßo git para a vers√£o de leantime existe] ****************************************************</span>
<span id="line-1862"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1863"></span>
<span id="line-1864">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /var/www/leantime/config/configuration.php] *******************************************</span>
<span id="line-1865"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1866"></span>
<span id="line-1867">TASK [Teste: O ficheiro /var/www/leantime/config/configuration.php existe e tem as permiss√µes certas?] ***********************************</span>
<span id="line-1868"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1869"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1870"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas e ficheiro configuration.php existente"</span></span>
<span id="line-1871"><span style="color: #00aa00">}</span></span>
<span id="line-1872"></span>
<span id="line-1873">TASK [Simula√ß√£o: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] ******************************</span>
<span id="line-1874"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1875"></span>
<span id="line-1876">TASK [Teste: O dbUser foi alterado?] *****************************************************************************************************</span>
<span id="line-1877"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1878"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1879"><span style="color: #00aa00">    "msg": "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1880"><span style="color: #00aa00">}</span></span>
<span id="line-1881"></span>
<span id="line-1882">TASK [Simula√ß√£o: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] **************************</span>
<span id="line-1883"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1884"></span>
<span id="line-1885">TASK [Teste: a vari√°vel dbDatabase foi alterada?] ****************************************************************************************</span>
<span id="line-1886"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1887"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1888"><span style="color: #00aa00">    "msg": "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1889"><span style="color: #00aa00">}</span></span>
<span id="line-1890"></span>
<span id="line-1891">TASK [Simula√ß√£o: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o m√≥dulo replace.] **************************</span>
<span id="line-1892"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1893"></span>
<span id="line-1894">TASK [Teste: O dbPassword foi alterado?] *************************************************************************************************</span>
<span id="line-1895"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1896"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1897"><span style="color: #00aa00">    "msg": "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"</span></span>
<span id="line-1898"><span style="color: #00aa00">}</span></span>
<span id="line-1899"></span>
<span id="line-1900">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-available/leantime.conf] *******************************************</span>
<span id="line-1901"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1902"></span>
<span id="line-1903">TASK [Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permiss√µes certas?] ***********************************</span>
<span id="line-1904"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1905"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1906"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas"</span></span>
<span id="line-1907"><span style="color: #00aa00">}</span></span>
<span id="line-1908"></span>
<span id="line-1909">TASK [Simula√ß√£o: Obtem informa√ß√£o sobre o ficheiro /etc/apache2/sites-enabled/leantime.conf] *********************************************</span>
<span id="line-1910"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1911"></span>
<span id="line-1912">TASK [Teste: O ficheiro /etc/apache2/sites-enabled/leantime.conf existe e tem as permiss√µes certas?] *************************************</span>
<span id="line-1913"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; {</span></span>
<span id="line-1914"><span style="color: #00aa00">    "changed": false,</span></span>
<span id="line-1915"><span style="color: #00aa00">    "msg": "SUCESSO: Permiss√µes correctas"</span></span>
<span id="line-1916"><span style="color: #00aa00">}</span></span>
<span id="line-1917"></span>
<span id="line-1918">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-1919"><span style="color: #00aa00">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=30  </span> changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-1920"></span>
<span id="line-1921"><span style="color: #0000aa">INFO    </span> Verifier completed successfully.</span>
<span id="line-1922">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ molecule idempotence</span>
<span id="line-1923"><span style="color: #0000aa">INFO    </span> default scenario test matrix: idempotence</span>
<span id="line-1924"><span style="color: #0000aa">INFO    </span> Performing prerun<span style="color: #aa5500">...</span></span>
<span id="line-1925"><span style="color: #0000aa">INFO    </span> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.</span>
<span id="line-1926"><span style="color: #0000aa">INFO    </span> Added <span style="color: #aa5500">ANSIBLE_ROLES_PATH</span>=~<span style="color: #E850A8">/.ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/usr/share/ansible/</span><span style="color: #ff90e8">roles</span>:<span style="color: #E850A8">/etc/ansible/</span><span style="color: #ff90e8">roles</span>:.<span style="color: #E850A8">/.cache/</span><span style="color: #ff90e8">roles</span></span>
<span id="line-1927"><span style="color: #0000aa">INFO    </span> <span style="font-weight: lighter; color: #00aaaa">Running </span><span style="font-weight: lighter; color: #00aa00">default</span><span style="font-weight: lighter; color: #00aaaa"> &gt; </span><span style="font-weight: lighter; color: #00aa00">idempotence</span></span>
<span id="line-1928"></span>
<span id="line-1929">PLAY [Converge] **************************************************************************************************************************</span>
<span id="line-1930"></span>
<span id="line-1931">TASK [Gathering Facts] *******************************************************************************************************************</span>
<span id="line-1932"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1933"></span>
<span id="line-1934">TASK [Include leantime_ansible] **********************************************************************************************************</span>
<span id="line-1935"></span>
<span id="line-1936">TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************</span>
<span id="line-1937"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1938"></span>
<span id="line-1939">TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************</span>
<span id="line-1940"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1941"></span>
<span id="line-1942">TASK [leantime_ansible : Instalar as dependencias necess√°ria ao programa leantime] *******************************************************</span>
<span id="line-1943"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1944"></span>
<span id="line-1945">TASK [leantime_ansible : Instala o servi√ßo apache2 no arranque do sistema] ***************************************************************</span>
<span id="line-1946"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1947"></span>
<span id="line-1948">TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************</span>
<span id="line-1949"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1950"></span>
<span id="line-1951">TASK [leantime_ansible : Ativa v√°rias op√ß√µes no ficheiro php.ini, utilizando o m√≥dulo lineinfile.] ***************************************</span>
<span id="line-1952"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</span></span>
<span id="line-1953"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</span></span>
<span id="line-1954"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</span></span>
<span id="line-1955"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</span></span>
<span id="line-1956"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</span></span>
<span id="line-1957"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</span></span>
<span id="line-1958"></span>
<span id="line-1959">TASK [leantime_ansible : Cria a directoria tempor√°ria leantime e a directoria de apache leantime] ****************************************</span>
<span id="line-1960"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</span></span>
<span id="line-1961"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</span></span>
<span id="line-1962"></span>
<span id="line-1963">TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************</span>
<span id="line-1964"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1965"></span>
<span id="line-1966">TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************</span>
<span id="line-1967"><span style="font-weight: bold; color: #E850A8">[WARNING]: Module did not set no_log for update_password</span></span>
<span id="line-1968"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1969"></span>
<span id="line-1970">TASK [leantime_ansible : Faz o download do software leantime a partir do reposit√≥rio git] ************************************************</span>
<span id="line-1971"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1972"></span>
<span id="line-1973">TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************</span>
<span id="line-1974"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1975"></span>
<span id="line-1976">TASK [leantime_ansible : Copia o ficheiro de configura√ß√£o configuration.sample.php] ******************************************************</span>
<span id="line-1977"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1978"></span>
<span id="line-1979">TASK [leantime_ansible : Altera as vari√°veis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o m√≥dulo replace.] ***</span>
<span id="line-1980"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</span></span>
<span id="line-1981"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</span></span>
<span id="line-1982"><span style="color: #00aa00">ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</span></span>
<span id="line-1983"></span>
<span id="line-1984">TASK [leantime_ansible : Copia o template do site para a p√°sta /etc/apache2/sites-available] *********************************************</span>
<span id="line-1985"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1986"></span>
<span id="line-1987">TASK [leantime_ansible : Cria um link simb√≥lico para o ficheiro leantime.conf na pasta /etc/apache/sites-enabled] ************************</span>
<span id="line-1988"><span style="color: #00aa00">ok: [ubuntu-20.04]</span></span>
<span id="line-1989"></span>
<span id="line-1990">PLAY RECAP *******************************************************************************************************************************</span>
<span id="line-1991"><span style="color: #00aa00">ubuntu-20.04</span>               : <span style="color: #00aa00">ok=16  </span> changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
<span id="line-1992"></span>
<span id="line-1993"></span>
<span id="line-1994"><span style="color: #0000aa">INFO    </span> Idempotence completed successfully.</span>
<span id="line-1995">]0;admlocal@devOps: ~/leantime_ansibleadmlocal@devOps:~/leantime_ansible$ exit</span>
<span id="line-1996">exit</span>
<span id="line-1997"></span>

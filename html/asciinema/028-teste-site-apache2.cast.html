<!DOCTYPE html>
<html>
<head>
<style type="text/css">
body {background-color: black;}
pre {
	font-weight: normal;
	color: #bbb;
	white-space: -moz-pre-wrap;
	white-space: -o-pre-wrap;
	white-space: -pre-wrap;
	white-space: pre-wrap;
	word-wrap: break-word;
	overflow-wrap: break-word;
}
b {font-weight: normal}
b.BOLD {color: #fff}
b.ITA {font-style: italic}
b.UND {text-decoration: underline}
b.STR {text-decoration: line-through}
b.UNDSTR {text-decoration: underline line-through}
b.BLK {color: #000000}
b.RED {color: #aa0000}
b.GRN {color: #00aa00}
b.YEL {color: #aa5500}
b.BLU {color: #0000aa}
b.MAG {color: #aa00aa}
b.CYN {color: #00aaaa}
b.WHI {color: #aaaaaa}
b.HIK {color: #555555}
b.HIR {color: #ff5555}
b.HIG {color: #55ff55}
b.HIY {color: #ffff55}
b.HIB {color: #5555ff}
b.HIM {color: #ff55ff}
b.HIC {color: #55ffff}
b.HIW {color: #ffffff}
b.BBLK {background-color: #000000}
b.BRED {background-color: #aa0000}
b.BGRN {background-color: #00aa00}
b.BYEL {background-color: #aa5500}
b.BBLU {background-color: #0000aa}
b.BMAG {background-color: #aa00aa}
b.BCYN {background-color: #00aaaa}
b.BWHI {background-color: #aaaaaa}
</style>
</head>
<body>
<pre>admlocal@devOps:~/leantime_ansible$ nano moel&#x266A;&#x232B;&#x232B;lecule/ver&#x266A;i&#x232B;&#x232B;&#x232B;&#x232B;f&#x232B;default/verify.yml 
BB
<hr>
B<b class="BLK BWHI">[ A ler... ]B</b>B<b class="BLK BWHI">[ 264 linhas lidas ]B</b>B<b class="BLK BWHI">  GNU nano 4.8                                          molecule/default/verify.yml                                                       B</b>&crarr;
B<b class="BLK BWHI">^GB</b> AjudaB<b class="BLK BWHI">^OB</b> GravarB<b class="BLK BWHI">^WB</b> ProcurarB<b class="BLK BWHI">^KB</b> Cortar txt    B<b class="BLK BWHI">^JB</b> Justificar    B<b class="BLK BWHI">^CB</b> Pos cursor    B<b class="BLK BWHI">M-UB</b> Desfazer     B<b class="BLK BWHI">M-AB</b> Marcar txt&crarr;
B<b class="BLK BWHI">^XB</b> SairB<b class="BLK BWHI">^RB</b> CarregarB<b class="BLK BWHI">^\B</b> Substituir    B<b class="BLK BWHI">^UB</b> Colar txt     B<b class="BLK BWHI">^TB</b> Ortografia    B<b class="BLK BWHI">^_B</b> Ir p/ linha   B<b class="BLK BWHI">M-EB</b> RefazerB<b class="BLK BWHI">M-6B</b> Copiar txt&crarr;
B---&crarr;
<b class=CYN># Tutorial de inspiração para a infraestrutura conduzida por teste no site</b>&crarr;
# https://www.adictosaltrabajo.com/2020/05/08/ansible-testing-using-molecule-with-ansible-as-verifier/&crarr;
B- name: "Infraestrutura conduzida por testes"hosts: allgather_facts: falsebecome: truetasks:- name: Variáveisinclude_vars:file: ../../vars/main.yml- name: "Simulação: Atualizar a cache do sistema"apt:&#x232B;&#x232B;update_cache: truecache_valid_time: 3600check_mode: trueregister: estado- name: "teste: a cache encontra-se actualizada?"assert:that:- not estado.changedsuccess_msg: "SUCESSO: A cache está atualizada"fail_msg: "ERRO: Existem actualizações pendentes"- name: "Atualizar o sistema operativo (equivalente a apt upgrade)"apt:&#x232B;&#x232B;upgrade: safecheck_mode: trueregister: estado- name: "teste: o sistema operativo encontra-se atualizado?"&crarr;
  - name: "teste: o sistema operativo encontra-se atualizado?"&crarr;
    assert:that: - not estado.changed    success_msg: "SUCESSO: O sistema operativo está atualizado"    fail_msg: "ERRO: Existem actualizações pendentes"&crarr;
  - name: "Teste: a cache encontra-se atualizada?"  assert:    that:  - not estado.changedsuccess_msg: "SUCESSO: A cache está atualizada"fail_msg: "ERRO: Existem atualizações pendentes"&crarr;
  - name: "Simulação: testa se as aplicações dependencia do software leantime se encontram instaladas"apt:&#x232B;&#x232B;pkg:  - mc  - screen- git    - apache2  - mysql-server- phpphp-mysql- php-ldap- php-cli- php-soap    - php-json  - graphviz- php-xml  - php-gd  - php-zip- libapache2-mod-php    - php-dev&crarr;
- libapache2-mod-php    - php-dev  - libmcrypt-dev- gccmake- autoconf- libc-dev- pkg-config    - pwgen  - curl- unzipzip- php-mbstring- expect- net-tools    - python3-mysqldb  - python3-apt- python3-pycurlcheck_mode: trueregister: estado&crarr;
  - name: "Teste: as dependencias encontra-se instaladas?"assert:that:not estado.changedsuccess_msg: "SUCESSO: As dependencias estavam instaladas"fail_msg: "ERRO: Faltam instalar algumas dependencias. O software pode estar parcialmente instalado"&crarr;
<b class=CYN>  # Fonte de inspiração: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/service_module.html</b>B- name: "Simulação: Testar se o serviço apache2 se encontra instalado, iniciado e ativo no arranque"service:name: apache2state: startedenabled: truecheck_mode: true&crarr;
enabled: true&#x232B;O serviço apache2 encontra-se ativo no arranque no sistema, e está iniciado?"O serviço apache2 está correctamente instalado e inicia com o arranque do sistema"O serviço apache2 não se encontra correcta<b class=CYN>: https://www.mydailytutorials.com/using--find-module-search-filesfolder</b>BRotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2"find:paths: /etcpatterns: "php.ini"recurseregister: caminho_php_ini&crarr;
<b class=CYN>  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html</b>B- name: "Simulação: Ativa a opção file_uploads no ficheiro php.ini, utilizando o módulo lineinfile."ansible.builtin.lineinfile:path: "{{ caminho_php_ini.files[0].path }}"regexp: "{{ item.regexp  }}"line: "{{ item.line }}"with_items:- regexp: "^file_uploads"line: "file_uploads = 1"- regexp: "^upload_max_filesize"line: "upload_max_filesize = 1G"- regexp: "^max_file_uploads"line: "max_file_uploads = 20"- regexp: "^post_max_size"line: "post_max_size = 2G"- regexp: "^memory_limit"&crarr;
line: "post_max_size = 2G"- regexp: "^memory_limit"line: "memory_limit = 2G"- regexp: "^max_input_time"  line: "max_input_time = 3600"As linhas do php.ini encontram-se alteradas ?"ficheiro php.ini foi alterado com sucesso"Algumas alterações ao ficheiro php.ini não tiveram sucesso"<b class=CYN>O site deve existir na pasta /var/www/leantime. Este teste visa determinar se a pasta</b>&crarr;
  # existe e se temas permissões certas&crarr;
  # Fonte de inspiração: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.htmlB- name: "Simulação: Obtem informação sobre a pastas /var/www/leantime"&crarr;
    stat:    path: "/var/www/leantime"register: pasta&crarr;
  - name: "Teste: A pasta /var/www/leantime existe e tem as permissões certas?"assert:  that:  - pasta.stat.exists- pasta.stat.isdir  - pasta.stat.mode == "0755"- pasta.stat.pw_name == "www-data"  - pasta.stat.gr_name == "www-data"success_msg: "SUCESSO: Permissões correctas no site leantime"fail_msg: "ERRO: Permissões incorrectas no site leantime ou site não existente"&crarr;
<b class=CYN>  # Outro dos requesitos é a existência de uma base de dados para o site.</b>&crarr;
B<b class=CYN>  # Outro dos requesitos é a existência de uma base de dados para o site.</b>&crarr;
  # Esta base de dados deve ser criada, logo tem de ser testada para determinar se ela existe ou não.&crarr;
  # Fonte de inspiração: https://serverfault.com/questions/173978/from-a-shell-script-how-can-i-check-whether-a-mysql-database-existsB- name: "Simulação: Verifica se é necessário criar a base de dados leantime_database"shell: "mysql -u root -e 'use leantime_database'"resultfailed_when: false  changed_when: false&crarr;
  - name: "Teste: A base de dados leantime_database existe ?"assert:that:- result.rc == 0success_msg: "SUCESSO: A base de dados leantime_database já se encontra criada"fail_msg: "ERRO: Não existe a base de dados leantime_database"&crarr;
<b class=CYN>  # Teste: O download do software leantime deve ser possível, a partir do site do leantime</b>B- name: "Simulação e Teste: Verifica se o endereço git para a versão de leantime existe"uri:&#x232B;&#x232B;url: https://github.com/Leantime/leantime/releases/download/{{ versao_leantime }}/Leantime-{{ versao_leantime }}.zipregister: resultado<b class=CYN>Teste: Do ficheiro configuration.php no site do leantime. A existência deste ficheiro       com as permissões certas indica que o processo de unzip correu bemDocumentação oficial em: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/stat_module.html</b>Bo ficheiro /var/www/leantime/config/configuration.php"/config/configuration.php"ficheiroO ficheiro /var/www/leantime/config/configuration.php existe e tem as permissões certas?"ficheiro.stat.exists&crarr;
that: - ficheiro.stat.exists - ficheiro.stat.isreg - ficheiro.stat.mode == "0755" - ficheiro.stat.pw_name == "www-data"    - ficheiro.stat.gr_name == "www-data"  success_msg: "SUCESSO: Permissões correctas e ficheiro configuration.php existente"  fail_msg: "ERRO: Permissões incorrectas ou ficheiro configuration.php não existente"&crarr;
<b class=CYN>  # Teste: O ficheiro /var/www/leantime/config/configuration.php necessita de ser alterado.</b>&crarr;
  # As variáveis dbuser, dbDatabase, e dbPassword necessitam de estar configuradas.&crarr;
  # Por simulação o sistema vai determinar se estas estão configuradas com o valor esperado.&crarr;
  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.htmlB- name: "Simulação: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o módulo replace."ansible.builtin.replace:path: /var/www/leantime/config/configuration.phpregexp: 'dbUser=""' replace: 'dbUser="{{ login_leantime }}"'  check_mode: yesregister: conffailed_when: false&crarr;
  - name: "Teste: O dbUser foi alterado?"&crarr;
    assert: that: - conf is not changed    - conf is not failed  success_msg: "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"fail_msg: "ERRO: O dbUser não foi alterado no ficheiro configuration.php"&crarr;
<b class=CYN>  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</b>B- name: "Simulação: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o módulo replace."ansible.builtin.replace:path: /var/www/leantime/config/configuration.php&crarr;
    ansible.builtin.replace:path: /var/www/leantime/config/configuration.phpregexp: 'dbDatabase=""'replace: 'dbDatabase="leantime_database"'check_mode: yesregister: conffailed_when: false&crarr;
  - name: "Teste: a variável dbDatabase foi alterada?"&crarr;
    assert: that: - conf is not changed - conf is not failed    success_msg: "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"  fail_msg: "ERRO: O dbDatabase não foi alterado no ficheiro configuration.php"&crarr;
<b class=CYN>  # Fonte: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/replace_module.html</b>B- name: "Simulação: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o módulo replace."ansible.builtin.replace:  path: /var/www/leantime/config/configuration.php  regexp: 'dbPassword=""'replace: 'dbPassword="{{ password_leantime }}"'  check_mode: yesregister: conffailed_when: false&crarr;
  - name: "Teste: O dbPassword foi alterado?"assert:that:- conf is not changed- conf is not failed success_msg: "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"    fail_msg: "ERRO: O dbPassword não foi alterado no ficheiro configuration.php"&crarr;
fail_msg: "ERRO: O dbPassword não foi alterado no ficheiro configuration.php"&crarr;
success_msg: "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"&crarr;
- conf is not failed&crarr;
B<b class="BLK BWHI">ModificadoB</b>&crarr;
  &crarr;
<b class=CYN>  #</b>B<b class=CYN> </b>B<b class=CYN>A</b>B<b class=CYN> </b>B<b class=CYN>c</b>&crarr;
B<b class=CYN>o</b>B<b class=CYN>n</b>B<b class=CYN>f</b>B<b class=CYN>i</b>B<b class=CYN>g</b>B<b class=CYN>u</b>B<b class=CYN>r</b>B<b class=CYN>a</b>B<b class=CYN>ç</b>B<b class=CYN>ã</b>B<b class=CYN>o</b>B<b class=CYN> </b>B<b class=CYN>d</b>B<b class=CYN>o</b>B<b class=CYN> </b>B<b class=CYN>s</b>B<b class=CYN>i</b>B<b class=CYN>t</b>B<b class=CYN>e</b>B<b class=CYN> </b>B<b class=CYN>l</b>B<b class=CYN>e</b>B<b class=CYN>a</b>B<b class=CYN>n</b>B<b class=CYN>t</b>B<b class=CYN>i</b>B<b class=CYN>m</b>B<b class=CYN>e</b>B<b class=CYN> </b>B<b class=CYN>n</b>B<b class=CYN>e</b>B<b class=CYN>c</b>B<b class=CYN>e</b>B<b class=CYN>s</b>B<b class=CYN>s</b>B<b class=CYN>i</b>B<b class=CYN>t</b>B<b class=CYN>a</b>B<b class=CYN> </b>B<b class=CYN>q</b>B<b class=CYN>u</b>B<b class=CYN>e</b>B<b class=CYN> </b>B<b class=CYN>s</b>B<b class=CYN>e</b>B<b class=CYN>j</b>B<b class=CYN>a</b>B<b class=CYN> </b>B<b class=CYN>c</b>B<b class=CYN>r</b>B<b class=CYN>i</b>B<b class=CYN>a</b>B<b class=CYN>d</b>B<b class=CYN>o</b>B<b class=CYN> </b>B<b class=CYN>u</b>B<b class=CYN>m</b>B<b class=CYN> </b>B<b class=CYN>s</b>B<b class=CYN>i</b>B<b class=CYN>t</b>B<b class=CYN>e</b>B<b class=CYN> </b>B<b class=CYN>a</b>B<b class=CYN>t</b>B<b class=CYN>r</b>B<b class=CYN>a</b>B<b class=CYN>v</b>B<b class=CYN>é</b>B<b class=CYN>~s</b>B<b class=CYN> </b>B<b class=CYN>d</b>B<b class=CYN>e</b>B<b class=CYN> </b>B<b class=CYN>u</b>B<b class=CYN>m</b>B<b class=CYN> </b>B<b class=CYN>f</b>B<b class=CYN>i</b>B<b class=CYN>c</b>B<b class=CYN>h</b>B<b class=CYN>e</b>B<b class=CYN>i</b>B<b class=CYN>r</b>B<b class=CYN>o</b>B<b class=CYN> </b>B<b class=CYN>d</b>B<b class=CYN>e</b>B&crarr;
  &crarr;
<b class=CYN>  #</b>B<b class=CYN> </b>B<b class=CYN>c</b>B<b class=CYN>o</b>B<b class=CYN>n</b>B<b class=CYN>f</b>B<b class=CYN>i</b>B<b class=CYN>g</b>B<b class=CYN>u</b>B<b class=CYN>r</b>B<b class=CYN>a</b>B<b class=CYN>ç</b>B<b class=CYN>ã</b>B<b class=CYN>o</b>B<b class=CYN>,</b>B<b class=CYN> </b>B<b class=CYN>d</b>B<b class=CYN>e</b>B<b class=CYN>n</b>B<b class=CYN>t</b>B<b class=CYN>r</b>B<b class=CYN>o</b>B<b class=CYN> </b>B<b class=CYN>d</b>B<b class=CYN>a</b>B<b class=CYN>s</b>B<b class=CYN> </b>B<b class=CYN>p</b>B<b class=CYN>a</b>B<b class=CYN>s</b>B<b class=CYN>t</b>B<b class=CYN>a</b>B<b class=CYN> </b>B<b class=CYN>d</b>B<b class=CYN>o</b>B<b class=CYN> </b>B<b class=CYN>ap</b>B<b class=CYN>a</b>B<b class=CYN>c</b>B<b class=CYN>h</b>B<b class=CYN>e</b>B<b class=CYN>2</b>B<b class=CYN>.</b>B<b class=CYN> </b>B<b class=CYN>D</b>B<b class=CYN>e</b>B<b class=CYN>v</b>B<b class=CYN>e</b>B<b class=CYN> </b>B<b class=CYN>e</b>B<b class=CYN>x</b>B<b class=CYN>i</b>B<b class=CYN>s</b>B<b class=CYN>t</b>B<b class=CYN>i</b>B<b class=CYN>r</b>B<b class=CYN> </b>B<b class=CYN>u</b>B<b class=CYN>m</b>B<b class=CYN> </b>B<b class=CYN>f</b>B<b class=CYN>i</b>B<b class=CYN>c</b>B<b class=CYN>h</b>B<b class=CYN>e</b>B<b class=CYN>i</b>B<b class=CYN>r</b>B<b class=CYN>o</b>B<b class=CYN> </b>B<b class=CYN>d</b>B<b class=CYN>e</b>B<b class=CYN> </b>B<b class=CYN>c</b>B<b class=CYN>o</b>B<b class=CYN>n</b>B<b class=CYN>f</b>B<b class=CYN>i</b>B<b class=CYN>g</b>B<b class=CYN>u</b>B<b class=CYN>r</b>B<b class=CYN>a</b>B<b class=CYN>ç</b>B<b class=CYN>ã</b>B<b class=CYN>o</b>B<b class=CYN> </b>B<b class=CYN>d</b>B<b class=CYN>o</b>B&crarr;
  &crarr;
<b class=CYN>  #</b>B<b class=CYN> </b>B<b class=CYN>l</b>B<b class=CYN>e</b>B<b class=CYN>a</b>B<b class=CYN>n</b>B<b class=CYN>t</b>B<b class=CYN>i</b>B<b class=CYN>m</b>B<b class=CYN>e</b>B<b class=CYN> </b>B<b class=CYN>e</b>B<b class=CYN>m</b>B<b class=CYN> </b>B<b class=CYN>(</b>B<b class=CYN>&amp;</b>B<b class=CYN>e</b>B<b class=CYN>t</b>B<b class=CYN>c</b>B<b class=CYN>/</b>B<b class=CYN>a</b>B<b class=CYN>p</b>B<b class=CYN>a</b>B<b class=CYN>c</b>B<b class=CYN>h</b>B<b class=CYN>e</b>B<b class=CYN>2</b>B<b class=CYN>/</b>B<b class=CYN>s</b>B<b class=CYN>i</b>B<b class=CYN>t</b>B<b class=CYN>e</b>B<b class=CYN>s</b>B<b class=CYN>-</b>B<b class=CYN>a</b>B<b class=CYN>v</b>B<b class=CYN>a</b>B<b class=CYN>i</b>B<b class=CYN>l</b>B<b class=CYN>a</b>B<b class=CYN>b</b>B<b class=CYN>l</b>B<b class=CYN>e</b>B&crarr;
  &crarr;
<b class=CYN>  #</b>B<b class=CYN> </b>B<b class=CYN>F</b>B<b class=CYN>o</b>B<b class=CYN>n</b>B<b class=CYN>t</b>B<b class=CYN>e</b>B<b class=CYN>:</b>B<b class=CYN> </b>B<b class=CYN>h</b>B<b class=CYN>t</b>B<b class=CYN>t</b>B<b class=CYN>p</b>B<b class=CYN>s</b>B<b class=CYN>:</b>B<b class=CYN>/</b>B<b class=CYN>/</b>B<b class=CYN>d</b>B<b class=CYN>o</b>B<b class=CYN>c</b>B<b class=CYN>s</b>B<b class=CYN>.</b>B<b class=CYN>a</b>B<b class=CYN>n</b>B<b class=CYN>s</b>B<b class=CYN>i</b>B<b class=CYN>b</b>B&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;<b class=CYN>/etc/apache2/sites-available</b>B<b class=CYN>l</b>B<b class=CYN>e</b>B<b class=CYN>.</b>B<b class=CYN>c</b>B<b class=CYN>o</b>B<b class=CYN>m</b>B<b class=CYN>/</b>B<b class=CYN>a</b>B<b class=CYN>n</b>B<b class=CYN>s</b>B<b class=CYN>i</b>B<b class=CYN>b</b>B<b class=CYN>l</b>B<b class=CYN>e</b>B<b class=CYN>/</b>B<b class=CYN>l</b>B<b class=CYN>a</b>B<b class=CYN>t</b>B<b class=CYN>e</b>B<b class=CYN>s</b>B<b class=CYN>t</b>B<b class=CYN>/</b>B<b class=CYN>c</b>B<b class=CYN>o</b>B<b class=CYN>l</b>B<b class=CYN>l</b>B<b class=CYN>e</b>B<b class=CYN>c</b>B<b class=CYN>t</b>B<b class=CYN>i</b>B<b class=CYN>o</b>B<b class=CYN>n</b>B<b class=CYN>s</b>B<b class=CYN>/</b>B<b class=CYN>a</b>B<b class=CYN>n</b>B<b class=CYN>s</b>B<b class=CYN>i</b>B<b class=CYN>b</b>B<b class=CYN>l</b>B<b class=CYN>e</b>B<b class=CYN>/</b>B<b class=CYN>b</b>B<b class=CYN>u</b>B<b class=CYN>i</b>B<b class=CYN>l</b>B<b class=CYN>t</b>B<b class=CYN>i</b>B<b class=CYN>n</b>B<b class=CYN>/</b>B<b class=CYN>s</b>B<b class=CYN>t</b>B<b class=CYN>a</b>B<b class=CYN>t</b>B<b class=CYN>_</b>B<b class=CYN>m</b>B<b class=CYN>o</b>B<b class=CYN>d</b>B<b class=CYN>u</b>B<b class=CYN>l</b>B<b class=CYN>e</b>B<b class=CYN>.</b>B<b class=CYN>h</b>B<b class=CYN>t</b>B<b class=CYN>m</b>B<b class=CYN>l</b>B&crarr;
  - name: "Simulação: Obtem informação sobre o ficheiro /etc/apache2/sites-available/leantime.conf"&crarr;
    stat:&crarr;
      path: "/etc/apache2/sites-available/leantime.conf"&crarr;
    register: ficheiro&crarr;
 &#x232B;  - name: "Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permissões certas?"&crarr;
    assert:&crarr;
      that:&crarr;
        - ficheiro.stat.exists&crarr;
        - ficheiro.stat.isreg&crarr;
        - ficheiro.stat.mode == "0755"&crarr;
        - ficheiro.stat.pw_name == "root"&crarr;
        - ficheiro.stat.gr_name == "www-data"&crarr;
      success_msg: "SUCESSO: Permissões correctas"&crarr;
      fail_msg: "ERRO: Permissões incorrectas"&crarr;
         B<b class="BLK BWHI">M-DB</b> Formato DOSB<b class="BLK BWHI">M-AB</b> AnexarB<b class="BLK BWHI">BB</b> SegurançaB<b class="BLK BWHI">CB</b> Cancelar           B<b class="BLK BWHI">M-MB</b> Formato MacB<b class="BLK BWHI">M-PB</b> PreporB<b class="BLK BWHI">^TB</b> P/ ficheiros&crarr;
B<b class="BLK BWHI">Nome do ficheiro onde escrever: molecule/default/verify.yml                                                                               B</b> B<b class="BLK BWHI">[ A escrever... ]B</b>B<b class="BLK BWHI">          B</b>B<b class="BLK BWHI">[ 284 linhas escritas ]B</b>B<b class="BLK BWHI">^OB</b> GravarB<b class="BLK BWHI">^WB</b> Procurar      B<b class="BLK BWHI">^KB</b> Cortar txt    B<b class="BLK BWHI">^JB</b> Justificar    B<b class="BLK BWHI">^CB</b> Pos cursorB<b class="BLK BWHI">UB</b> Desfazer     B<b class="BLK BWHI">M-AB</b> Marcar txtB<b class="BLK BWHI">XB</b> Sair    B<b class="BLK BWHI">^RB</b> CarregarB<b class="BLK BWHI">^\B</b> Substituir    B<b class="BLK BWHI">^UB</b> Colar txt     B<b class="BLK BWHI">^TB</b> Ortografia    B<b class="BLK BWHI">^_B</b> Ir p/ linha   B<b class="BLK BWHI">M-EB</b> Refazer      B<b class="BLK BWHI">M-6B</b> Copiar txt&crarr;

<hr>
&crarr;
admlocal@devOps:~/leantime_ansible$ ls
<b class=HIB>asciinema</b>  <b class=HIB>defaults</b>  <b class=HIB>files</b>  <b class=HIB>handlers</b>  <b class=HIB>html</b>  <b class=HIB>latex</b>  <b class=HIB>meta</b>  <b class=HIB>molecule</b>  README.md  <b class=HIB>tasks</b>  <b class=HIB>templates</b>  <b class=HIB>tests</b>  <b class=HIB>vars</b>
admlocal@devOps:~/leantime_ansible$ molecule
<b class=YEL>Usage: </b>molecule [OPTIONS] COMMAND [ARGS]...

  Molecule aids in the development and testing of Ansible roles.

  Enable autocomplete issue:

    eval "$(_MOLECULE_COMPLETE=source molecule)"

<b class=YEL>Options</b>:
  <b class=GRN>--debug / --no-debug</b>    Enable or disable debug mode. Default is disabled.
  <b class=GRN>-v, --verbose</b>           Increase Ansible verbosity level. Default is 0.
  <b class=GRN>-c, --base-config TEXT</b>  Path to a base config (can be specified multiple times). If provided, Molecule will first load and deep merge
                          the configurations in the specified order, and deep merge each scenario's molecule.yml on top. By default
                          Molecule is looking for '.config/molecule/config.yml' in current VCS repository and if not found it will look
                          in user home. (None).
  <b class=GRN>-e, --env-file TEXT</b>     The file to read variables from when rendering molecule.yml. (.env.yml)
  <b class=GRN>--version</b>
  <b class=GRN>--help</b>                  Show this message and exit.

<b class=YEL>Commands</b>:
  <b class=GRN>check</b>        Use the provisioner to perform a Dry-Run (destroy, dependency, create, prepare, converge).
  <b class=GRN>cleanup</b>      Use the provisioner to cleanup any changes made to external systems during the stages of testing.
  <b class=GRN>converge</b>     Use the provisioner to configure instances (dependency, create, prepare converge).
  <b class=GRN>create</b>       Use the provisioner to start the instances.
  <b class=GRN>dependency</b>   Manage the role's dependencies.
  <b class=GRN>destroy</b>      Use the provisioner to destroy the instances.
  <b class=BLU>drivers</b>      List drivers.
  <b class=GRN>idempotence</b>  Use the provisioner to configure the instances and parse the output to determine idempotence.
  <b class=BLU>init</b>         Initialize a new role or scenario.
  <b class=GRN>lint</b>         Lint the role (dependency, lint).
  <b class=BLU>list</b>         List status of instances.
  <b style="color:#ffff55;">login</b>        Log in to one instance.
  <b class=BLU>matrix</b>       List matrix of steps used to test instances.
  <b class=GRN>prepare</b>      Use the provisioner to prepare the instances into a particular starting state.
  <b class=BLU>reset</b>        Reset molecule temporary folders.
  <b class=GRN>side-effect</b>  Use the provisioner to perform side-effects to the instances.
  <b class=GRN>syntax</b>       Use the provisioner to syntax check the role.
  <b style="color:#ffff55;">test</b>         Test (dependency, lint, cleanup, destroy, syntax, create, prepare, converge, idempotence, side_effect, verify,
               cleanup,...
  <b class=GRN>verify</b>       Run automated tests against instances.
admlocal@devOps:~/leantime_ansible$ molecule lint
<b class=BLU>INFO    </b> default scenario test matrix: dependency, lint
<b class=BLU>INFO    </b> Performing prerun<b class=YEL>...</b>
<b class=BLU>INFO    </b> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.
<b class=BLU>INFO    </b> Added <b class=YEL>ANSIBLE_ROLES_PATH</b>=~<b class=MAG>/.ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/usr/share/ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/etc/ansible/</b><b style="color:#ff55ff;">roles</b>:.<b class=MAG>/.cache/</b><b style="color:#ff55ff;">roles</b>
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>dependency</b>
<b class=RED>WARNING </b> Skipping, missing the requirements file.
<b class=RED>WARNING </b> Skipping, missing the requirements file.
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>lint</b>
COMMAND: set -e
yamllint .
ansible-lint

Loading custom .yamllint config file, this extends our internal yamllint config.
admlocal@devOps:~/leantime_ansible$ molecule verify
<b class=BLU>INFO    </b> default scenario test matrix: verify
<b class=BLU>INFO    </b> Performing prerun<b class=YEL>...</b>
<b class=BLU>INFO    </b> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.
<b class=BLU>INFO    </b> Added <b class=YEL>ANSIBLE_ROLES_PATH</b>=~<b class=MAG>/.ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/usr/share/ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/etc/ansible/</b><b style="color:#ff55ff;">roles</b>:.<b class=MAG>/.cache/</b><b style="color:#ff55ff;">roles</b>
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>verify</b>
<b class=BLU>INFO    </b> Running Ansible Verifier

PLAY [Infraestrutura conduzida por testes] ***********************************************************************************************

TASK [Variáveis] *************************************************************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Simulação: Atualizar a cache do sistema] *******************************************************************************************
<b class=YEL>changed: [ubuntu-20.04]</b>

TASK [teste: a cache encontra-se actualizada?] *******************************************************************************************
<b class=RED>fatal: [ubuntu-20.04]: FAILED! =&gt; {</b>
<b class=RED>    "assertion": "not estado.changed",</b>
<b class=RED>    "changed": false,</b>
<b class=RED>    "evaluated_to": false,</b>
<b class=RED>    "msg": "ERRO: Existem actualizações pendentes"</b>
<b class=RED>}</b>

PLAY RECAP *******************************************************************************************************************************
<b class=RED>ubuntu-20.04</b>               : <b class=GRN>ok=2   </b> <b class=YEL>changed=1   </b> unreachable=0    <b class=RED>failed=1   </b> skipped=0    rescued=0    ignored=0


<b class=HIR>CRITICAL</b> Ansible return code was <b class=HIC>2</b>, command was: ansible-playbook --inventory <b class=MAG>/home/admlocal/.cache/molecule/leantime_ansible/default/</b><b style="color:#ff55ff;">inventory</b> --skip-tags molecule-notest,notest <b class=MAG>/home/admlocal/leantime_ansible/molecule/default/</b><b style="color:#ff55ff;">verify.yml</b>
admlocal@devOps:~/leantime_ansible$ molecule verify&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;converge
<b class=BLU>INFO    </b> default scenario test matrix: dependency, create, prepare, converge
<b class=BLU>INFO    </b> Performing prerun<b class=YEL>...</b>
<b class=BLU>INFO    </b> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.
<b class=BLU>INFO    </b> Added <b class=YEL>ANSIBLE_ROLES_PATH</b>=~<b class=MAG>/.ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/usr/share/ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/etc/ansible/</b><b style="color:#ff55ff;">roles</b>:.<b class=MAG>/.cache/</b><b style="color:#ff55ff;">roles</b>
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>dependency</b>
<b class=RED>WARNING </b> Skipping, missing the requirements file.
<b class=RED>WARNING </b> Skipping, missing the requirements file.
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>create</b>
<b class=RED>WARNING </b> Skipping, instances already created.
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>prepare</b>
<b class=RED>WARNING </b> Skipping, instances already prepared.
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>converge</b>

PLAY [Converge] **************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Include leantime_ansible] **********************************************************************************************************

TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************
<b class=YEL>changed: [ubuntu-20.04]</b>

TASK [leantime_ansible : Instalar as dependencias necessária ao programa leantime] *******************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Instala o serviço apache2 no arranque do sistema] ***************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Ativa várias opções no ficheiro php.ini, utilizando o módulo lineinfile.] ***************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</b>

TASK [leantime_ansible : Cria a directoria temporária leantime e a directoria de apache leantime] ****************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</b>

TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************
<b class=HIM>[WARNING]: Module did not set no_log for update_password</b>
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Faz o download do software leantime a partir do repositório git] ************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Copia o ficheiro de configuração configuration.sample.php] ******************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Altera as variáveis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o módulo replace.] ***
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</b>

PLAY RECAP *******************************************************************************************************************************
<b class=YEL>ubuntu-20.04</b>               : <b class=GRN>ok=14  </b> <b class=YEL>changed=1   </b> unreachable=0    failed=0    skipped=0    rescued=0    ignored=0


admlocal@devOps:~/leantime_ansible$ molecule idempotence
<b class=BLU>INFO    </b> default scenario test matrix: idempotence
<b class=BLU>INFO    </b> Performing prerun<b class=YEL>...</b>
<b class=BLU>INFO    </b> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.
<b class=BLU>INFO    </b> Added <b class=YEL>ANSIBLE_ROLES_PATH</b>=~<b class=MAG>/.ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/usr/share/ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/etc/ansible/</b><b style="color:#ff55ff;">roles</b>:.<b class=MAG>/.cache/</b><b style="color:#ff55ff;">roles</b>
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>idempotence</b>

PLAY [Converge] **************************************************************************************************************************

TASK [Gathering Facts] *******************************************************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Include leantime_ansible] **********************************************************************************************************

TASK [leantime_ansible : Atualiza a cache (equivalente a apt update)] ********************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Atualiza o sistema operativo] ***********************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Instalar as dependencias necessária ao programa leantime] *******************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Instala o serviço apache2 no arranque do sistema] ***************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Rotina Auxiliar: Procura o caminho do ficheiro php.ini do servidor apache2] *************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Ativa várias opções no ficheiro php.ini, utilizando o módulo lineinfile.] ***************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</b>

TASK [leantime_ansible : Cria a directoria temporária leantime e a directoria de apache leantime] ****************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'path': '/tmp/leantime'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'path': '/var/www/leantime'})</b>

TASK [leantime_ansible : Cria a base de dados de mysql para o leantime] ******************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Cria o utilizador para a base de dados leantime] ****************************************************************
<b class=HIM>[WARNING]: Module did not set no_log for update_password</b>
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Faz o download do software leantime a partir do repositório git] ************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Descomprime o software leantime] ********************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Copia o ficheiro de configuração configuration.sample.php] ******************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [leantime_ansible : Altera as variáveis dbuser, dbpassword e dbdatabase no ficheiro configuration.php utilizando o módulo replace.] ***
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbUser=""', 'line': 'dbUser="leantimeDBadmin"'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbDatabase=""', 'line': 'dbDatabase="leantime_database"'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': 'dbPassword=""', 'line': 'dbPassword="#S3gr3d0S3cr3t0#"'})</b>

PLAY RECAP *******************************************************************************************************************************
<b class=GRN>ubuntu-20.04</b>               : <b class=GRN>ok=14  </b> changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0


<b class=BLU>INFO    </b> Idempotence completed successfully.
admlocal@devOps:~/leantime_ansible$ molecule idempotence&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;&#x232B;verify
<b class=BLU>INFO    </b> default scenario test matrix: verify
<b class=BLU>INFO    </b> Performing prerun<b class=YEL>...</b>
<b class=BLU>INFO    </b> Using .cache/roles/nunomourinho.leantime_ansible symlink to current repository in order to enable Ansible to find the role using its expected full name.
<b class=BLU>INFO    </b> Added <b class=YEL>ANSIBLE_ROLES_PATH</b>=~<b class=MAG>/.ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/usr/share/ansible/</b><b style="color:#ff55ff;">roles</b>:<b class=MAG>/etc/ansible/</b><b style="color:#ff55ff;">roles</b>:.<b class=MAG>/.cache/</b><b style="color:#ff55ff;">roles</b>
<b class=BLU>INFO    </b> <b class=HIK>Running </b><b class=HIK>default</b><b class=HIK> &gt; </b><b class=HIK>verify</b>
<b class=BLU>INFO    </b> Running Ansible Verifier

PLAY [Infraestrutura conduzida por testes] ***********************************************************************************************

TASK [Variáveis] *************************************************************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Simulação: Atualizar a cache do sistema] *******************************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [teste: a cache encontra-se actualizada?] *******************************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: A cache está atualizada"</b>
<b class=GRN>}</b>

TASK [Atualizar o sistema operativo (equivalente a apt upgrade)] *************************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [teste: o sistema operativo encontra-se atualizado?] ********************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: O sistema operativo está atualizado"</b>
<b class=GRN>}</b>

TASK [Teste: a cache encontra-se atualizada?] ********************************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: A cache está atualizada"</b>
<b class=GRN>}</b>

TASK [Simulação: testa se as aplicações dependencia do software leantime se encontram instaladas] ****************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: as dependencias encontra-se instaladas?] ************************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: As dependencias estavam instaladas"</b>
<b class=GRN>}</b>

TASK [Simulação: Testar se o serviço apache2 se encontra instalado, iniciado e ativo no arranque] ****************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: O serviço apache2 encontra-se ativo no arranque no sistema, e está iniciado?] ***********************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: O serviço apache2 está correctamente instalado e inicia com o arranque do sistema"</b>
<b class=GRN>}</b>

TASK [Rotina Auxiliar&gt; Procura o caminho do ficheiro php.ini do servidor apache2] ********************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Simulação: Ativa a opção file_uploads no ficheiro php.ini, utilizando o módulo lineinfile.] ****************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^file_uploads', 'line': 'file_uploads = 1'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^upload_max_filesize', 'line': 'upload_max_filesize = 1G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_file_uploads', 'line': 'max_file_uploads = 20'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^post_max_size', 'line': 'post_max_size = 2G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^memory_limit', 'line': 'memory_limit = 2G'})</b>
<b class=GRN>ok: [ubuntu-20.04] =&gt; (item={'regexp': '^max_input_time', 'line': 'max_input_time = 3600'})</b>

TASK [Teste: As linhas do php.ini encontram-se alteradas ?] ******************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: O ficheiro php.ini foi alterado com sucesso"</b>
<b class=GRN>}</b>

TASK [Simulação: Obtem informação sobre a pastas /var/www/leantime] **********************************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: A pasta /var/www/leantime existe e tem as permissões certas?] ***************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: Permissões correctas no site leantime"</b>
<b class=GRN>}</b>

TASK [Simulação: Verifica se é necessário criar a base de dados leantime_database] *******************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: A base de dados leantime_database existe ?] *********************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: A base de dados leantime_database já se encontra criada"</b>
<b class=GRN>}</b>

TASK [Simulação e Teste: Verifica se o endereço git para a versão de leantime existe] ****************************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Simulação: Obtem informação sobre o ficheiro /var/www/leantime/config/configuration.php] *******************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: O ficheiro /var/www/leantime/config/configuration.php existe e tem as permissões certas?] ***********************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: Permissões correctas e ficheiro configuration.php existente"</b>
<b class=GRN>}</b>

TASK [Simulação: Testa se o dbuser foi alterado no ficheiro configuration.php utilizando o módulo replace.] ******************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: O dbUser foi alterado?] *****************************************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: O dbUser foi alterado no ficheiro configuration.php"</b>
<b class=GRN>}</b>

TASK [Simulação: Testa se o dbDatabase foi alterado no ficheiro configuration.php utilizando o módulo replace.] **************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: a variável dbDatabase foi alterada?] ****************************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: O dbDatabase foi alterado no ficheiro configuration.php"</b>
<b class=GRN>}</b>

TASK [Simulação: Testa se o dbPassword foi alterado no ficheiro configuration.php utilizando o módulo replace.] **************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: O dbPassword foi alterado?] *************************************************************************************************
<b class=GRN>ok: [ubuntu-20.04] =&gt; {</b>
<b class=GRN>    "changed": false,</b>
<b class=GRN>    "msg": "SUCESSO: O dbPassword foi alterado no ficheiro configuration.php"</b>
<b class=GRN>}</b>

TASK [Simulação: Obtem informação sobre o ficheiro /etc/apache2/sites-available/leantime.conf] *******************************************
<b class=GRN>ok: [ubuntu-20.04]</b>

TASK [Teste: O ficheiro /etc/apache2/sites-available/leantime.conf existe e tem as permissões certas?] ***********************************
<b class=RED>fatal: [ubuntu-20.04]: FAILED! =&gt; {</b>
<b class=RED>    "assertion": "ficheiro.stat.exists",</b>
<b class=RED>    "changed": false,</b>
<b class=RED>    "evaluated_to": false,</b>
<b class=RED>    "msg": "ERRO: Permissões incorrectas"</b>
<b class=RED>}</b>

PLAY RECAP *******************************************************************************************************************************
<b class=RED>ubuntu-20.04</b>               : <b class=GRN>ok=27  </b> changed=0    unreachable=0    <b class=RED>failed=1   </b> skipped=0    rescued=0    ignored=0


<b class=HIR>CRITICAL</b> Ansible return code was <b class=HIC>2</b>, command was: ansible-playbook --inventory <b class=MAG>/home/admlocal/.cache/molecule/leantime_ansible/default/</b><b style="color:#ff55ff;">inventory</b> --skip-tags molecule-notest,notest <b class=MAG>/home/admlocal/leantime_ansible/molecule/default/</b><b style="color:#ff55ff;">verify.yml</b>
admlocal@devOps:~/leantime_ansible$ exiy&#x232B;

O comando 'exi' não foi encontrado, mas existem 13 semelhantes.

admlocal@devOps:~/leantime_ansible$ exit
exit
</pre>
</body>
</html>
